{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/tiled_scrolling_demo/TiledScrollingDemo.ts","src/wolfie2d/Game.ts","src/wolfie2d/ai/BugOneBehavior.ts","src/wolfie2d/ai/BugTwoBehavior.ts","src/wolfie2d/ai/MainCharacterBehavior.ts","src/wolfie2d/ai/SpriteBehavior.ts","src/wolfie2d/files/ResourceManager.ts","src/wolfie2d/loop/GameLoopTemplate.ts","src/wolfie2d/math/MathUtilities.ts","src/wolfie2d/math/Matrix.ts","src/wolfie2d/math/Vector3.ts","src/wolfie2d/physics/GamePhysics.ts","src/wolfie2d/rendering/TextRenderer.ts","src/wolfie2d/rendering/WebGLGameRenderingComponent.ts","src/wolfie2d/rendering/WebGLGameRenderingSystem.ts","src/wolfie2d/rendering/WebGLGameShader.ts","src/wolfie2d/rendering/WebGLGameSpriteRenderer.ts","src/wolfie2d/rendering/WebGLGameTexture.ts","src/wolfie2d/rendering/WebGLGameTiledLayerRenderer.ts","src/wolfie2d/scene/SceneGraph.ts","src/wolfie2d/scene/SceneObject.ts","src/wolfie2d/scene/Viewport.ts","src/wolfie2d/scene/sprite/AnimatedSprite.ts","src/wolfie2d/scene/sprite/AnimatedSpriteType.ts","src/wolfie2d/scene/tiles/TileSet.ts","src/wolfie2d/scene/tiles/TiledLayer.ts","src/wolfie2d/ui/UIController.ts"],"names":[],"mappings":"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","file":"demo.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/*\n * TiledScrollingDemo.ts - demonstrates how tiled layers can be rendered\n * and scrolled using a viewport. \n */\nimport {Game} from '../wolfie2d/Game'\nimport {AnimatedSprite} from '../wolfie2d/scene/sprite/AnimatedSprite'\nimport {AnimatedSpriteType} from '../wolfie2d/scene/sprite/AnimatedSpriteType'\nimport {TiledLayer} from '../wolfie2d/scene/tiles/TiledLayer'\nimport {SceneGraph} from '../wolfie2d/scene/SceneGraph'\nimport {Viewport} from '../wolfie2d/scene/Viewport'\nimport {TextToRender, TextRenderer} from '../wolfie2d/rendering/TextRenderer'\nimport { BugOneBehavior } from '../wolfie2d/ai/BugOneBehavior'\nimport { MainCharacterBehavior } from '../wolfie2d/ai/MainCharacterBehavior'\nimport { BugTwoBehavior } from '../wolfie2d/ai/BugTwoBehavior'\n\n// THIS IS THE ENTRY POINT INTO OUR APPLICATION, WE MAKE\n// THE Game OBJECT AND INITIALIZE IT WITH THE CANVASES\nlet game = new Game(\"game_canvas\", \"text_canvas\");\n\n// WE THEN LOAD OUR GAME SCENE, WHICH WILL FIRST LOAD\n// ALL GAME RESOURCES, THEN CREATE ALL SHADERS FOR\n// RENDERING, AND THEN PLACE ALL GAME OBJECTS IN THE SCENE.\n// ONCE IT IS COMPLETED WE CAN START THE GAME\nconst DESERT_SCENE_PATH = \"resources/scenes/ScrollableDesert.json\";\ngame.getResourceManager().loadScene(DESERT_SCENE_PATH, \n                                    game.getSceneGraph(),\n                                    game.getRenderingSystem(), \n                                    function() {\n    // ADD ANY CUSTOM STUFF WE NEED HERE, LIKE TEXT RENDERING\n    // LET'S ADD A BUNCH OF RANDOM SPRITES\n    let world : TiledLayer[] = game.getSceneGraph().getTiledLayers();\n    let worldWidth : number = world[0].getColumns() * world[0].getTileSet().getTileWidth();\n    let worldHeight : number = world[0].getRows() * world[0].getTileSet().getTileHeight();\n\n    //add the main character\n    let mc_type : AnimatedSpriteType = game.getResourceManager().getAnimatedSpriteType(\"MAIN_BUG\");\n    let main_bug : AnimatedSprite = new AnimatedSprite(mc_type, \"IDLE\", \"MAIN_BUG\", new MainCharacterBehavior());\n    let mc_randomX : number = Math.random() * worldWidth;\n    let mc_randomY : number = Math.random() * worldHeight;\n    main_bug.getPosition().set(mc_randomX, mc_randomY, 0, 1);\n    game.getSceneGraph().addAnimatedSprite(main_bug);\n    game.getSceneGraph().setMainCharacter(main_bug);\n\n    for (let i = 0; i < 100; i++) {\n        let type : AnimatedSpriteType;\n        let randomSprite : AnimatedSprite;\n        if(i < 50) {\n            type = game.getResourceManager().getAnimatedSpriteType(\"BUG_ONE\");\n            randomSprite = new AnimatedSprite(type, \"DANCING\", \"BUG_ONE\", new BugOneBehavior(game.getSceneGraph()));\n        } else {\n            type = game.getResourceManager().getAnimatedSpriteType(\"BUG_TWO\");\n            randomSprite = new AnimatedSprite(type, \"DANCING\", \"BUG_TWO\", new BugTwoBehavior(main_bug, game.getSceneGraph()));\n        }\n        let randomX : number = Math.random() * worldWidth;\n        let randomY : number = Math.random() * worldHeight;\n        randomSprite.getPosition().set(randomX, randomY, 0, 1);\n        game.getSceneGraph().addAnimatedSprite(randomSprite);\n    }\n    \n    // NOW ADD TEXT RENDERING. WE ARE GOING TO RENDER 3 THINGS:\n        // NUMBER OF SPRITES IN THE SCENE\n        // LOCATION IN GAME WORLD OF VIEWPORT\n        // NUMBER OF SPRITES IN VISIBLE SET (i.e. IN THE VIEWPORT)\n    let sceneGraph : SceneGraph = game.getSceneGraph();\n    let spritesInSceneText : TextToRender = new TextToRender(\"Sprites in Scene\", \"\", 20, 50, function() {\n        spritesInSceneText.text = \"Sprites in Scene: \" + sceneGraph.getNumSprites();\n    });\n    let viewportText : TextToRender = new TextToRender(\"Viewport\", \"\", 20, 70, function() {\n        let viewport : Viewport = sceneGraph.getViewport();\n        viewportText.text = \"Viewport (w, h, x, y): (\"  + viewport.getWidth() + \", \"\n                                                        + viewport.getHeight() + \", \"\n                                                        + viewport.getX() + \", \"\n                                                        + viewport.getY() + \")\";\n    });\n    let spritesInViewportText : TextToRender = new TextToRender(\"Sprites in Viewport\", \"\", 20, 90, function() {\n        spritesInViewportText.text = \"Sprites in Viewport: \" + sceneGraph.scope().length;\n    });\n    let worldDimensionsText : TextToRender = new TextToRender(\"World Dimensions\", \"\", 20, 110, function() {\n        worldDimensionsText.text = \"World Dimensions (w, h): (\" + worldWidth + \", \" + worldHeight + \")\";\n    });\n    let textRenderer = game.getRenderingSystem().getTextRenderer();\n    textRenderer.addTextToRender(spritesInSceneText);\n    textRenderer.addTextToRender(viewportText);\n    textRenderer.addTextToRender(spritesInViewportText);\n    textRenderer.addTextToRender(worldDimensionsText);\n\n    // AND START THE GAME LOOP\n    game.start();\n});","/*\n * Game is the focal point of the application, it has 4 subsystems,\n * the resource manager, the scene graph, the rendering system, and\n * the UI controller. In addition it serves as the game loop, providing\n * both an update and draw function that is called on a schedule.\n */\nimport {GameLoopTemplate} from './loop/GameLoopTemplate'\nimport {WebGLGameRenderingSystem} from './rendering/WebGLGameRenderingSystem'\nimport {SceneGraph} from './scene/SceneGraph'\nimport {AnimatedSprite} from './scene/sprite/AnimatedSprite'\nimport {TiledLayer} from './scene/tiles/TiledLayer'\nimport {ResourceManager} from './files/ResourceManager'\nimport {UIController} from './ui/UIController'\nimport {Viewport} from './scene/Viewport'\nimport {GamePhysics} from './physics/GamePhysics'\nimport {TextToRender, TextRenderer} from '../wolfie2d/rendering/TextRenderer'\n\nexport class Game extends GameLoopTemplate {\n    private resourceManager : ResourceManager;\n    private sceneGraph : SceneGraph;\n    private renderingSystem : WebGLGameRenderingSystem;\n    private uiController : UIController;\n    private gamePhysics : GamePhysics;\n    \n\n    public constructor(gameCanvasId : string, textCanvasId : string) {\n        super();\n        this.resourceManager= new ResourceManager();\n        this.sceneGraph= new SceneGraph();\n        this.renderingSystem= new WebGLGameRenderingSystem(gameCanvasId, textCanvasId);\n        this.uiController = new UIController(gameCanvasId, this.sceneGraph);\n        this.gamePhysics = new GamePhysics();\n\n        // MAKE SURE THE SCENE GRAPH' S VIEWPORT IS PROPERLY SETUP\n        let viewportWidth : number = (<HTMLCanvasElement>document.getElementById(gameCanvasId)).width;\n        let viewportHeight : number = (<HTMLCanvasElement>document.getElementById(gameCanvasId)).height;\n        let viewport : Viewport = new Viewport(viewportWidth, viewportHeight);\n        this.sceneGraph.setViewport(viewport);\n    }\n\n    public getRenderingSystem() : WebGLGameRenderingSystem {\n        return this.renderingSystem;\n    }\n\n    public getResourceManager() : ResourceManager {\n        return this.resourceManager;\n    }\n\n    public getSceneGraph() : SceneGraph {\n        return this.sceneGraph;\n    }\n\n    public begin() : void {\n    }\n\n    /*\n     * This draws the game. Note that we are not currently using the \n     * interpolation value, but could once physics is involved.\n     */\n    public draw(interpolationPercentage : number) : void {\n        // GET THE TILED LAYERS TO RENDER FROM THE SCENE GRAPH\n        let visibleLayers : Array<TiledLayer>;\n        visibleLayers = this.sceneGraph.getTiledLayers();\n\n        // GET THE VISIBLE SET FROM THE SCENE GRAPH\n        let visibleSprites : Array<AnimatedSprite>;\n        visibleSprites = <Array<AnimatedSprite>>this.sceneGraph.scope();\n\n        let viewport : Viewport = this.sceneGraph.getViewport();\n\n        // RENDER THE VISIBLE SET, WHICH SHOULD ALL BE RENDERABLE\n        this.renderingSystem.render(viewport, visibleLayers, visibleSprites);\n    }\n\n    /**\n     * Updates the scene.\n     */\n    public update(delta : number) : void {\n        this.sceneGraph.update(delta);\n        this.gamePhysics.update(this.sceneGraph);\n        let enemy_sprites : Array<AnimatedSprite> = [];\n        for(let sprite of this.sceneGraph.getAnimatedSprites()) {\n            if(sprite.getTypeName() == \"BUG_ONE\") {\n                enemy_sprites.push(sprite);\n            }\n        }\n        if(Game.is_won(enemy_sprites)) {\n            let textRenderer = this.getRenderingSystem().getTextRenderer();\n            let win_text : TextToRender = new TextToRender(\"Win Message\", \"\", 494, 349, function() {\n                win_text.text = \"You Win!!!!\";\n            });\n            win_text.fontSize = 9000;\n            console.log(\"win\");\n            textRenderer.addTextToRender(win_text);\n            this.getRenderingSystem().getTextRenderer().render();\n        }\n    }\n    \n    /**\n     * Updates the FPS counter.\n     */\n    public end(fps : number, panic : boolean) : void {\n        if (panic) {\n            var discardedTime = Math.round(this.resetFrameDelta());\n            console.warn('Main loop panicked, probably because the browser tab was put in the background. Discarding ' + discardedTime + 'ms');\n        }\n    }\n\n    static is_won(enemy_sprites : Array<AnimatedSprite>) : boolean {\n        for(let sprite of enemy_sprites) {\n            if(sprite.getState() != \"DEAD\") {\n                return false;\n            }\n        }\n        return true;\n    }\n}","import { SpriteBehavior } from \"./SpriteBehavior\";\nimport { AnimatedSprite } from \"../scene/sprite/AnimatedSprite\";\nimport {TiledLayer} from '../scene/tiles/TiledLayer';\nimport { SceneGraph } from \"../scene/SceneGraph\";\n\nexport class BugOneBehavior extends SpriteBehavior{\n    private current_direction : string;\n    private frames_until_change : number;\n    private sceneGraph : SceneGraph;\n\n    constructor(init_sceneGraph : SceneGraph) {\n        super();\n        this.current_direction = BugOneBehavior.random_direction();\n        this.frames_until_change = BugOneBehavior.random_frame_num();\n        this.sceneGraph = init_sceneGraph;\n    }\n\n    public update() : void {\n        if(this.getSprite() == null) { return; }\n        if(this.getSprite().getState() == \"DYING\" || this.getSprite().getState() == \"DEAD\"){ return; }\n        switch(this.current_direction) {\n            case \"UP\": this.moveUp(); break;\n            case \"DOWN\": this.moveDown(); break;\n            case \"LEFT\": this.moveLeft(); break;\n            case \"RIGHT\": this.moveRight(); break;\n        }\n        this.frames_until_change--;\n        if(this.frames_until_change == 0){\n            //TODO Make sure it doesn't leave the map\n            this.current_direction = BugOneBehavior.random_direction();\n            this.frames_until_change = BugOneBehavior.random_frame_num();\n\n            //Make sure it doesn't leave the map\n            let world : TiledLayer[] = this.sceneGraph.getTiledLayers();\n            let worldWidth : number = world[0].getColumns() * world[0].getTileSet().getTileWidth();\n            let worldHeight : number = world[0].getRows() * world[0].getTileSet().getTileHeight();\n            \n            if(this.current_direction == \"UP\" && this.getSprite().getPosition().getY() - (this.getSprite().getSpriteType().getSpriteHeight()/2) - this.frames_until_change + this.sceneGraph.getViewport().getY() <= 0){\n                this.current_direction = \"DOWN\";\n            }else if(this.current_direction == \"DOWN\" && this.getSprite().getPosition().getY() + (this.getSprite().getSpriteType().getSpriteHeight()/2) + this.frames_until_change - this.sceneGraph.getViewport().getY() >= worldHeight){\n                this.current_direction = \"UP\";\n            }\n\n            if(this.current_direction == \"LEFT\" && this.getSprite().getPosition().getX() - (this.getSprite().getSpriteType().getSpriteWidth()/2) - this.frames_until_change + this.sceneGraph.getViewport().getX() <= 0){\n                this.current_direction = \"RIGHT\"; console.log(\"c\");\n            }else if(this.current_direction == \"RIGHT\" && this.getSprite().getPosition().getX() + (this.getSprite().getSpriteType().getSpriteWidth()/2) + this.frames_until_change - this.sceneGraph.getViewport().getX() >= worldWidth){\n                this.current_direction = \"LEFT\";\n            }\n        }\n\n    }\n\n    static random_direction() : string {\n        //return \"RIGHT\";\n        let dur_num = Math.floor(Math.random() * 4);\n        switch(dur_num) {\n            case 0: return \"UP\";\n            case 1: return \"DOWN\";\n            case 2: return \"LEFT\";\n            default: return \"RIGHT\";\n        }\n    }\n\n    static random_frame_num() : number {\n        return Math.floor(Math.random() * 10) + 1;\n    }\n}","import { SpriteBehavior } from \"./SpriteBehavior\";\nimport { AnimatedSprite } from \"../scene/sprite/AnimatedSprite\";\nimport { SceneGraph } from \"../scene/SceneGraph\";\n\nexport class BugTwoBehavior extends SpriteBehavior{\n    private current_direction : string;\n    private frames_until_change : number;\n    private main_sprite : AnimatedSprite;\n    private sceneGraph : SceneGraph;\n\n    constructor(init_main_sprite : AnimatedSprite, init_scene_graph : SceneGraph) {\n        super();\n        this.current_direction = \"UP\";\n        this.frames_until_change = 50;\n        this.main_sprite = init_main_sprite;\n        this.sceneGraph = init_scene_graph;\n    }\n\n    public update() : void {\n        if(this.getSprite() == null) { return; }\n        if(this.getSprite().getState() == \"DYING\" || this.getSprite().getState() == \"DEAD\"){ return; }\n\n        //Check if the main character is nearby\n        //distance = ((x2-x1)^2 + (y2-y1)^2)^0.5\n        let distance = Math.sqrt((Math.pow(((this.main_sprite.getPosition().getX() + this.sceneGraph.getViewport().getX()) - (this.getSprite().getPosition().getX() + this.sceneGraph.getViewport().getX())), 2)\n        + Math.pow(((this.main_sprite.getPosition().getY() + this.sceneGraph.getViewport().getY()) - (this.getSprite().getPosition().getY() + this.sceneGraph.getViewport().getY())), 2)));\n        let main_character_radius = Math.pow(Math.pow(this.main_sprite.getSpriteType().getSpriteWidth()/2, 2) + Math.pow(this.main_sprite.getSpriteType().getSpriteHeight()/2, 2), 0.5);\n        let bug_radius = Math.pow(Math.pow(this.getSprite().getSpriteType().getSpriteWidth()/4, 2) + Math.pow(this.getSprite().getSpriteType().getSpriteHeight()/4, 2), 0.5);\n        if(distance <= 50 + main_character_radius + bug_radius) {\n            if(this.main_sprite.getPosition().getX() < this.getSprite().getPosition().getX()) {\n                this.moveRight();\n            }else if(this.main_sprite.getPosition().getX() > this.getSprite().getPosition().getX()) {\n                this.moveLeft();\n            }\n\n            if(this.main_sprite.getPosition().getY() < this.getSprite().getPosition().getY()) {\n                this.moveDown();\n            }else if(this.main_sprite.getPosition().getY() > this.getSprite().getPosition().getY()) {\n                this.moveUp();\n            }\n            return;\n        }\n\n        switch(this.current_direction) {\n            case \"UP\": this.moveUp(); break;\n            case \"DOWN\": this.moveDown(); break;\n            case \"LEFT\": this.moveLeft(); break;\n            case \"RIGHT\": this.moveRight(); break;\n        }\n        this.frames_until_change--;\n        if(this.frames_until_change == 0) {\n            //TODO Make sure it doesn't leave the map\n            this.current_direction = this.current_direction==\"UP\"?\"DOWN\":\"UP\";\n            this.frames_until_change = 50;\n        }\n\n    }\n}","import { SpriteBehavior } from \"./SpriteBehavior\";\nimport { AnimatedSprite } from \"../scene/sprite/AnimatedSprite\";\n\nexport class MainCharacterBehavior extends SpriteBehavior{\n\n    constructor() {\n        super();\n    }\n\n    public update() : void {\n\n    }\n}","import { AnimatedSprite } from \"../scene/sprite/AnimatedSprite\"\n\nexport abstract class SpriteBehavior {\n    private sprite : AnimatedSprite;\n\n    public constructor() {\n        this.sprite = null;\n    }\n\n    public getSprite() : AnimatedSprite {\n        return this.sprite;\n    }\n\n    public setSprite(newSprite : AnimatedSprite) : void {\n        this.sprite = newSprite;\n    }\n\n    public moveUp() : void {\n        this.getSprite().getPosition().set(this.getSprite().getPosition().getX(), \n                                                     this.getSprite().getPosition().getY() - 1,\n                                                     this.getSprite().getPosition().getZ(),\n                                                     this.getSprite().getPosition().getW());\n    }\n\n    public moveDown() : void {\n        this.getSprite().getPosition().set(this.getSprite().getPosition().getX(), \n                                                     this.getSprite().getPosition().getY() + 1,\n                                                     this.getSprite().getPosition().getZ(),\n                                                     this.getSprite().getPosition().getW());\n    }\n\n    public moveLeft() : void {\n        this.getSprite().getPosition().set(this.getSprite().getPosition().getX() - 1, \n                                                     this.getSprite().getPosition().getY(),\n                                                     this.getSprite().getPosition().getZ(),\n                                                     this.getSprite().getPosition().getW());\n    }\n\n    public moveRight() : void {\n        this.getSprite().getPosition().set(this.getSprite().getPosition().getX() + 1, \n                                                     this.getSprite().getPosition().getY(),\n                                                     this.getSprite().getPosition().getZ(),\n                                                     this.getSprite().getPosition().getW());\n    }\n\n    public abstract update() : void;\n}","/*\n * ResourceManager.js\n *\n * This class is responsible for managing all shared resources. This means things\n * that may be needed by multiple game objects. In this application this means\n * textures for the purpose of GPU rendering and animated sprite types.\n */\nimport { SpriteTypeData, AnimationStateData } from './SpriteTypeData'\nimport { MapData, TiledLayerData, TiledLayerProperty, TileSetData } from './MapData'\nimport { SceneData, NamedPath } from './SceneData'\nimport { WebGLGameRenderingSystem } from '../rendering/WebGLGameRenderingSystem'\nimport { WebGLGameTexture } from '../rendering/WebGLGameTexture'\nimport { AnimatedSpriteType } from '../scene/sprite/AnimatedSpriteType'\nimport { SceneGraph } from '../scene/SceneGraph'\nimport { TiledLayer } from '../scene/tiles/TiledLayer'\nimport { TileSet } from '../scene/tiles/TileSet'\n\nexport class ResourceManager {\n    // GAME SHADER PROGRAM SOURCE CODE WILL BE LOADED HERE. NOTE THAT\n    // WE HAVE ONE MAP FOR MAPPING THE SHADER NAME TO THE SOURCE CODE\n    // AND ANOTHER FOR MAPPING THE SHADER NAME TO THE FILE PATH\n    private gameShadersSource: Map<string, string> = new Map();\n    private gameShadersSourcePaths: Map<string, string> = new Map();\n    private numShadersToLoad: number;\n    private numShadersLoaded: number;\n\n    // SPRITE TYPES\n    private gameSpriteTypes: Map<string, AnimatedSpriteType> = new Map();\n    private gameSpriteTypePaths: Map<string, string> = new Map();\n    private numSpriteTypesToLoad: number;\n    private numSpriteTypesLoaded: number;\n\n    // TILE SETS\n    private gameTileSets: Map<string, TileSet> = new Map();\n    private gameTileSetPaths: Map<string, string> = new Map();\n    private numTileSetsToLoad: number;\n    private numTileSetsLoaded: number;\n\n    // GAME TEXTURES \n    private gameTextures: Map<string, WebGLGameTexture> = new Map();\n    private numTexturesToLoad: number;\n    private numTexturesLoaded: number;\n\n    public constructor() { }\n\n    // ACCESSOR METHODS\n\n    public getShaderSource(shaderName: string): string {\n        return this.gameShadersSource.get(shaderName);\n    }\n\n    public getAnimatedSpriteType(spriteTypeName: string): AnimatedSpriteType {\n        return this.gameSpriteTypes.get(spriteTypeName);\n    }\n\n    public getTileSet(tileSetName: string): TileSet {\n        return this.gameTileSets.get(tileSetName);\n    }\n\n    public getTexture(texturePath: string): WebGLGameTexture {\n        return this.gameTextures.get(texturePath);\n    }\n\n    public clear() : void {\n        // CLEAR THE SHADER SOURCE \n        this.gameShadersSource.clear();\n        this.gameShadersSourcePaths.clear();\n\n        // CLEAR THE SPRITE TYPES\n        this.gameSpriteTypes.clear();\n        this.gameSpriteTypePaths.clear();\n\n        // CLEAR THE TEXTURES\n        this.gameTextures.clear();\n\n        // WE REALLY SHOULD ADD FUNCTIONALITY TO REMOVE\n        // ALL THE RESOURCES FROM THE GPU ONE BY ONE\n        // BUT THAT'S SOMETHING FOR THE FUTURE\n    }\n\n    /**\n     * loadScene is responsible for loading all the external files needed for\n     * playing the game. These will be used for loading the scene, maps,\n     * animated sprites, textures, and shaders.\n     */\n    public loadScene(   scenePath: string,\n                        sceneGraph: SceneGraph,\n                        renderingSystem: WebGLGameRenderingSystem,\n                        callback: Function): void {\n        // CLEAR THE SCENE GRAPH TO GET RID OF ALL THE OLD STUFF\n        // THAT MAY HAVE BEEN LOADED FOR SOME OTHER LEVEL\n        sceneGraph.clear();\n\n        // CLEAR ALL THE SCENE RESOURCES \n        this.clear();\n\n        // WE HAVE OUR OWN CUSTOM JSON FILE FORMAT TO REPRESENT OUR SCENE\n        let thisResourceManager: ResourceManager = this;\n        this.loadTextFile(scenePath, function (jsonSceneText: string) {\n            let sceneData: SceneData = <SceneData>JSON.parse(jsonSceneText);\n            thisResourceManager.loadShadersSource(renderingSystem, sceneData.shaderSourcePaths, function () {\n                // NEXT LOAD THE MAP, WHICH WILL FORCE A LOADING OF\n                // ANY USED TILE SET TEXTURES AS WELL AS THE CREATION\n                // OF TILED LAYERS TO BE ADDED TO THE SCENE\n                thisResourceManager.loadMap(sceneData.mapPath, renderingSystem, sceneGraph, function () {\n                    // NOW THAT THE MAP HAS BEEN LOADED LOAD ALL THE SPRITE TYPES\n                    thisResourceManager.loadSpriteTypes(renderingSystem, sceneData.spriteTypePaths, function () {\n                        // NOW WE CAN INIT ALL SHADERS\n                        thisResourceManager.initAllShaders(renderingSystem, sceneGraph);\n\n                        callback();\n                    });\n                });\n            });\n        });\n    }\n\n    public initAllShaders(  renderingSystem: WebGLGameRenderingSystem,\n                            sceneGraph: SceneGraph): void {\n        // SETUP THE SPRITE RENDERER FOR USE WITH THE SPRITE SHADER THAT'S BEEN LOADED\n        let spriteRendererVertexShaderSource: string = this.getShaderSource(\"SPRITE_VERTEX_SHADER\");\n        let spriteRendererFragmentShaderSource: string = this.getShaderSource(\"SPRITE_FRAGMENT_SHADER\");\n        renderingSystem.getSpriteRenderer().init(renderingSystem.getWebGL(), spriteRendererVertexShaderSource, spriteRendererFragmentShaderSource, null);\n\n        // SETUP THE TILED LAYER RENDERER FOR USE WITH THE TILED SHADER THAT'S BEEN LOADED\n        let tiledLayerVertexShaderSource: string = this.getShaderSource(\"TILED_LAYER_VERTEX_SHADER\");\n        let tiledLayerFragmentShaderSource: string = this.getShaderSource(\"TILED_LAYER_FRAGMENT_SHADER\");\n        renderingSystem.getTiledLayerRenderer().init(renderingSystem.getWebGL(), tiledLayerVertexShaderSource, tiledLayerFragmentShaderSource, sceneGraph.getTiledLayers());\n    }\n\n    public loadShadersSource(   renderingSystem: WebGLGameRenderingSystem,\n                                namedPaths: Array<NamedPath>,\n                                callback: Function): void {\n        // START BY LOADING ALL THE SHADER SOURCE FILES THESE CAN THEN BE\n        // RETRIEVED LATER BY THE RENDERERS WHEN ITS TIME TO BUILD THE \n        // SHADER PROGRAMS\n        let thisResourceManager: ResourceManager = this;\n        this.numShadersLoaded = 0;\n        this.numShadersToLoad = namedPaths.length;\n        for (let i: number = 0; i < namedPaths.length; i++) {\n            let namedPath: NamedPath = namedPaths[i];\n            let shaderName: string = namedPath.name;\n            let shaderPath: string = namedPath.path;\n            this.loadTextFile(shaderPath, function (shaderSourceCode: string) {\n                thisResourceManager.gameShadersSource.set(shaderName, shaderSourceCode);\n                thisResourceManager.gameShadersSourcePaths.set(shaderName, shaderPath);\n                thisResourceManager.completeLoadingShader(function () {\n                    // ALL SOURCE CODE IS LOADED SO DO WHAT'S NEXT\n                    callback();\n                });\n            });\n        }\n    }\n\n    public buildPathToFileInSameDirectory(baseFileWithPath : string, targetFileName : string) : string {\n        let lastIndexOfSlash: number = baseFileWithPath.lastIndexOf('/');\n        let targetFilePath : string = \"./\";\n        if (lastIndexOfSlash > 0)\n            targetFilePath = baseFileWithPath.substring(0, lastIndexOfSlash);\n        targetFilePath += \"/\" + targetFileName;\n        return targetFilePath;\n    }\n\n    public loadMap( mapPath: string,\n                    renderingSystem: WebGLGameRenderingSystem,\n                    sceneGraph: SceneGraph,\n                    callback: Function): void {\n        let thisResourceManager: ResourceManager = this;\n        this.loadTextFile(mapPath, function (jsonMapText: string) {\n            let mapData: MapData = <MapData>JSON.parse(jsonMapText);\n\n            // WE ONLY USE ONE TILE SET\n            let tilesetFileName: string = mapData.tilesets[0].image;\n            let tilesetFilePath = thisResourceManager.buildPathToFileInSameDirectory(mapPath, tilesetFileName);\n\n            // USE THE PATHS TOLOAD THE TILE SET TEXTURES\n            thisResourceManager.loadTexture(tilesetFilePath, renderingSystem, function (tilesetTexture : WebGLGameTexture) {\n                // NOW THAT THE TILE SET TEXTURES HAVE BEEN LOADED,\n                // LOAD ALL THEIR ASSOCIATED TILESET DATA\n                for (let i = 0; i < mapData.tilesets.length; i++) {\n                    let tileSetData : TileSetData = mapData.tilesets[i];\n                    let rows : number = Math.ceil(tileSetData.tilecount/tileSetData.columns);\n                    let tileSetToAdd : TileSet = new TileSet(\n                                                    tileSetData.name,\n                                                    tileSetData.columns,\n                                                    rows,\n                                                    tileSetData.tilewidth,\n                                                    tileSetData.tileheight,\n                                                    tileSetData.spacing,\n                                                    tileSetData.imagewidth,\n                                                    tileSetData.imageheight,\n                                                    tileSetData.firstgid - 1,\n                                                    tilesetTexture);                    \n                    thisResourceManager.gameTileSets.set(tileSetToAdd.getName(), tileSetToAdd);\n                }\n\n                // AND NOW THAT THE TILE SETS HAVE BEEN LOADED\n                // WE CAN LOAD THE MAP'S TILED LAYERS, THOUGH NOTE\n                // IN THIS EXAMPLE WE ARE GOING TO KEEP IT SIMPLE\n                // AND ASSUME THERE IS ONLY ONE TILE SET\n                for (let i = 0; i < mapData.layers.length; i++) {\n                    let layerData : TiledLayerData = mapData.layers[i];\n\n                    // THIS LINE OF CODE IS FUNKY, WE CAN ONLY DO THIS WITH A SINGLE TILE SET,\n                    // SO TO MAKE THIS A REAL GAME ENGINE THIS WOULD NEED TO BE FIXED\n                    let layerTileSet : TileSet = thisResourceManager.gameTileSets.values().next().value;\n\n                    // WE ARE ASSUMING EACH LAYER USES JUST ONE TILE SET, WHICH MIGHT NOT\n                    // NECESSARILY BE TRUE. BUT FOR NOW, LET'S JUST MAKE THE LAYERS ALL\n                    // USING THE SAME TILE SET, ADD THE TILES, AND THEN ADD THEM TO THE SCENE GRAPH\n                    let tiledLayer : TiledLayer = new TiledLayer(layerData.width, layerData.height,layerTileSet);\n                    for (let j = 0; j < layerData.data.length; j++) {\n                        let tileIndex : number = layerData.data[j] - 1;\n                        tiledLayer.addTile(tileIndex);\n                    }\n                    sceneGraph.addLayer(tiledLayer);\n                }\n\n                callback();\n            });\n        });\n    }\n\n    /*\n     * Loads the texturePath file argument and once\n     * that is done it calls the callback function.\n     */\n    public loadTexture(texturePath: string,\n        renderingSystem: WebGLGameRenderingSystem,\n        callback: Function): void {\n        let thisResourceManager = this;\n        thisResourceManager.loadImage(texturePath, function (path: string, image: HTMLImageElement) {\n            let textureToLoad: WebGLGameTexture = new WebGLGameTexture();\n            let id: number = thisResourceManager.gameTextures.size;\n            thisResourceManager.gameTextures.set(path, textureToLoad);\n            renderingSystem.initWebGLTexture(textureToLoad, id, image, function () {\n                callback(textureToLoad);\n            });\n        });\n    }\n\n    /*\n     * Loads all the sprite types listed in the spriteTypePaths argument and once\n     * that is done it calls the callback function.\n     */\n    public loadSpriteTypes( renderingSystem : WebGLGameRenderingSystem,\n                            spriteTypePaths: Array<NamedPath>,\n                            callback: Function): void {\n        // THEN LOAD THE TEXTURES WE'LL BE USING\n        this.numSpriteTypesToLoad = spriteTypePaths.length;\n        this.numSpriteTypesLoaded = 0;\n        let thisResourceManager = this;\n        for (let namedPath of spriteTypePaths) {\n            let name: string = namedPath.name;\n            let path: string = namedPath.path;\n            this.loadSpriteType(renderingSystem, name, path, function () {\n                thisResourceManager.completeLoadingSpriteType(callback);\n            });\n        }\n    }\n\n    // PRIVATE HELPER METHODS\n\n    // LOADS A NEW JSON FILE AND UPON COMPLETION CALLS THE callback FUNCTION\n    private loadTextFile(textFilePath: string, callback: Function): void {\n        let xobj: XMLHttpRequest = new XMLHttpRequest();\n        xobj.overrideMimeType(\"application/json\");\n        xobj.open('GET', textFilePath, true);\n        xobj.onreadystatechange = function () {\n            if ((xobj.readyState == 4) && (xobj.status == 200)) {\n                callback(xobj.responseText);\n            }\n        };\n        xobj.send(null);\n    }\n\n    // CHECKS TO SEE IF ALL SHADER LOADING IS COMPLETE, IF YES, callback IS INVOKED\n    private completeLoadingShader(callback: Function): void {\n        this.numShadersLoaded++;\n        if (this.numShadersLoaded === this.numShadersToLoad) {\n            callback();\n        }\n    }\n\n    // CHECKS TO SEE IF ALL SPRITE TYPE LOADING IS COMPLETE, IF YES, callback IS INVOKED\n    private completeLoadingSpriteType(callback: Function): void {\n        this.numSpriteTypesLoaded++;\n        if (this.numSpriteTypesLoaded === this.numSpriteTypesToLoad) {\n            callback();\n        }\n    }\n\n    // CHECKS TO SEE IF ALL TEXTURE LOADING IS COMPLETE, IF YES, callback IS INVOKED\n    private completeLoadingTexture(callback: Function): void {\n        this.numTexturesLoaded++;\n        if (this.numTexturesLoaded === this.numTexturesToLoad) {\n            callback();\n        }\n    }\n\n    /**\n     * Loads an Image into RAM and once that process is complete it\n     * calls the callback method argument, presumably to then load\n     * it into GPU memory.\n     */\n    private loadImage(path: string, callback: Function): void {\n        // MAKE THE IMAGE\n        var image = new Image();\n\n        // ONCE THE IMAGE LOADING IS COMPLETED, THE CALLBACK WILL GET CALLED\n        image.onload = function () {\n            callback(path, image);\n        }\n\n        // START IMAGE LOADING\n        image.src = path;\n    }\n\n    /*\n     * This function loads a single sprite type resource from a JSON file and upon\n     * completion calls the callback function.\n     */\n    private loadSpriteType(renderingSystem : WebGLGameRenderingSystem, spriteTypeName: string, jsonFilePath: string, callback: Function): void {\n        let thisResourceManager: ResourceManager = this;\n        this.loadTextFile(jsonFilePath, function (jsonText: string) {\n            thisResourceManager.loadSpriteTypeData(renderingSystem, jsonFilePath, jsonText, function(spriteType : AnimatedSpriteType) {\n                thisResourceManager.gameSpriteTypes.set(spriteTypeName, spriteType);\n                thisResourceManager.gameSpriteTypePaths.set(spriteTypeName, jsonFilePath);\n                callback();\n            });\n        });\n    }\n\n    /*\n     * This helper function loads all the json text into an AnimatedSpriteType\n     * object and returns it.\n     */\n    private loadSpriteTypeData = (  renderingSystem : WebGLGameRenderingSystem, \n                                    spriteFilePath : string, \n                                    jsonText: string,\n                                    callback : Function): void => {\n        let jsonData: SpriteTypeData = <SpriteTypeData>JSON.parse(jsonText);\n        let texturePath : string = this.buildPathToFileInSameDirectory(spriteFilePath, jsonData.spriteSheetImage);\n        let thisResourceManager : ResourceManager = this;\n        this.loadTexture(texturePath, renderingSystem, function(spritesheetTexture : WebGLGameTexture) {\n            let spriteWidth: number = jsonData.spriteWidth;\n            let spriteHeight: number = jsonData.spriteHeight;\n            let animatedSpriteType = new AnimatedSpriteType(spritesheetTexture, spriteWidth, spriteHeight);\n            for (let i = 0; i < jsonData.animations.length; i++) {\n                let animation = <AnimationStateData>jsonData.animations[i];\n                animatedSpriteType.addAnimation(animation.name);\n                for (var j = 0; j < animation.frames.length; j++) {\n                    var frame = animation.frames[j];\n                    animatedSpriteType.addAnimationFrame(animation.name, frame.index, frame.duration);\n                }\n            }\n            callback(animatedSpriteType);\n        });\n    }\n}","export abstract class GameLoopTemplate {\n    // ALL INSTANCE VARIABLES WILL BE INITIALIZED VIA THE CONSTRUCTOR\n    private fps: number;\n    private simulationTimestep: number;\n    private frameDelta: number;\n    private lastFrameTimeMs: number;\n    private fpsAlpha: number;\n    private fpsUpdateInterval: number;\n    private lastFpsUpdate: number;\n    private framesSinceLastFpsUpdate: number;\n    private numUpdateSteps: number;\n    private minFrameDelay: number;\n    private running: boolean;\n    private started: boolean;\n    private panic: boolean;\n    private raf: number;\n\n    constructor() {\n        // An exponential moving average of the frames per second.\n        this.fps = 60;\n\n        // The amount of time (in milliseconds) to simulate each time update() runs.\n        // See `MainLoop.setSimulationTimestep()` for details.\n        this.simulationTimestep = 1000 / this.fps;\n\n        // The cumulative amount of in-app time that hasn't been simulated yet.\n        // See the comments inside animate() for details.\n        this.frameDelta = 0;\n\n        // The timestamp in milliseconds of the last time the main loop was run.\n        // Used to compute the time elapsed between frames.\n        this.lastFrameTimeMs = 0;\n\n        // A factor that affects how heavily to weight more recent seconds'\n        // performance when calculating the average frames per second. Valid values\n        // range from zero to one inclusive. Higher values result in weighting more\n        // recent seconds more heavily.\n        this.fpsAlpha = 0.9;\n\n        // The minimum duration between updates to the frames-per-second estimate.\n        // Higher values increase accuracy, but result in slower updates.\n        this.fpsUpdateInterval = 1000;\n\n        // The timestamp (in milliseconds) of the last time the `fps` moving\n        // average was updated.\n        this.lastFpsUpdate = 0;\n\n        // The number of frames delivered since the last time the `fps` moving\n        // average was updated (i.e. since `lastFpsUpdate`).\n        this.framesSinceLastFpsUpdate = 0;\n\n        // The number of times update() is called in a given frame. This is only\n        // relevant inside of animate(), but a reference is held externally so that\n        // this variable is not marked for garbage collection every time the main\n        // loop runs.\n        this.numUpdateSteps = 0;\n\n        // The minimum amount of time in milliseconds that must pass since the last\n        // frame was executed before another frame can be executed. The\n        // multiplicative inverse caps the FPS (the default of zero means there is\n        // no cap).\n        this.minFrameDelay = 0;\n\n        // Whether the main loop is running.\n        this.running = false;\n\n        // `true` if `MainLoop.start()` has been called and the most recent time it\n        // was called has not been followed by a call to `MainLoop.stop()`. This is\n        // different than `running` because there is a delay of a few milliseconds\n        // after `MainLoop.start()` is called before the application is considered\n        // \"running.\" This delay is due to waiting for the next frame.\n        this.started = false;\n\n        // Whether the simulation has fallen too far behind real time.\n        // Specifically, `panic` will be set to `true` if too many updates occur in\n        // one frame. This is only relevant inside of animate(), but a reference is\n        // held externally so that this variable is not marked for garbage\n        // collection every time the main loop runs.\n        this.panic = false;\n    }\n\n    /**\n     * Gets how many milliseconds should be simulated by every run of update().\n     *\n     * See `MainLoop.setSimulationTimestep()` for details on this value.\n     *\n     * @return {Number}\n     *   The number of milliseconds that should be simulated by every run of\n     *   {@link #setUpdate update}().\n     */\n    getSimulationTimestep(): number {\n        return this.simulationTimestep;\n    }\n\n    /**\n     * Sets how many milliseconds should be simulated by every run of update().\n     *\n     * The perceived frames per second (FPS) is effectively capped at the\n     * multiplicative inverse of the simulation timestep. That is, if the\n     * timestep is 1000 / 60 (which is the default), then the maximum perceived\n     * FPS is effectively 60. Decreasing the timestep increases the maximum\n     * perceived FPS at the cost of running {@link #setUpdate update}() more\n     * times per frame at lower frame rates. Since running update() more times\n     * takes more time to process, this can actually slow down the frame rate.\n     * Additionally, if the amount of time it takes to run update() exceeds or\n     * very nearly exceeds the timestep, the application will freeze and crash\n     * in a spiral of death (unless it is rescued; see `MainLoop.setEnd()` for\n     * an explanation of what can be done if a spiral of death is occurring).\n     *\n     * The exception to this is that interpolating between updates for each\n     * render can increase the perceived frame rate and reduce visual\n     * stuttering. See `MainLoop.setDraw()` for an explanation of how to do\n     * this.\n     *\n     * If you are considering decreasing the simulation timestep in order to\n     * raise the maximum perceived FPS, keep in mind that most monitors can't\n     * display more than 60 FPS. Whether humans can tell the difference among\n     * high frame rates depends on the application, but for reference, film is\n     * usually displayed at 24 FPS, other videos at 30 FPS, most games are\n     * acceptable above 30 FPS, and virtual reality might require 75 FPS to\n     * feel natural. Some gaming monitors go up to 144 FPS. Setting the\n     * timestep below 1000 / 144 is discouraged and below 1000 / 240 is\n     * strongly discouraged. The default of 1000 / 60 is good in most cases.\n     *\n     * The simulation timestep should typically only be changed at\n     * deterministic times (e.g. before the main loop starts for the first\n     * time, and not in response to user input or slow frame rates) to avoid\n     * introducing non-deterministic behavior. The update timestep should be\n     * the same for all players/users in multiplayer/multi-user applications.\n     *\n     * See also `MainLoop.getSimulationTimestep()`.\n     *\n     * @param {Number} timestep\n     *   The number of milliseconds that should be simulated by every run of\n     *   {@link #setUpdate update}().\n     */\n    setSimulationTimestep(timestep: number): void {\n        this.simulationTimestep = timestep;\n    }\n\n    /**\n     * Returns the exponential moving average of the frames per second.\n     *\n     * @return {Number}\n     *   The exponential moving average of the frames per second.\n     */\n    getFPS(): number {\n        return this.fps;\n    }\n\n    /**\n     * Gets the maximum frame rate.\n     *\n     * Other factors also limit the FPS; see `MainLoop.setSimulationTimestep`\n     * for details.\n     *\n     * See also `MainLoop.setMaxAllowedFPS()`.\n     *\n     * @return {Number}\n     *   The maximum number of frames per second allowed.\n     */\n    getMaxAllowedFPS(): number {\n        return 1000 / this.minFrameDelay;\n    }\n\n    /**\n     * Sets a maximum frame rate.\n     *\n     * See also `MainLoop.getMaxAllowedFPS()`.\n     *\n     * @param {Number} [fps=Infinity]\n     *   The maximum number of frames per second to execute. If Infinity or not\n     *   passed, there will be no FPS cap (although other factors do limit the\n     *   FPS; see `MainLoop.setSimulationTimestep` for details). If zero, this\n     *   will stop the loop, and when the loop is next started, it will return\n     *   to the previous maximum frame rate. Passing negative values will stall\n     *   the loop until this function is called again with a positive value.\n     *\n     * @chainable\n     */\n    setMaxAllowedFPS(fps: number): void {\n        if (typeof fps === 'undefined') {\n            fps = Infinity;\n        }\n        if (fps === 0) {\n            this.stop();\n        }\n        else {\n            // Dividing by Infinity returns zero.\n            this.minFrameDelay = 1000 / fps;\n        }\n    }\n\n    /**\n     * Reset the amount of time that has not yet been simulated to zero.\n     *\n     * This introduces non-deterministic behavior if called after the\n     * application has started running (unless it is being reset, in which case\n     * it doesn't matter). However, this can be useful in cases where the\n     * amount of time that has not yet been simulated has grown very large\n     * (for example, when the application's tab gets put in the background and\n     * the browser throttles the timers as a result). In applications with\n     * lockstep the player would get dropped, but in other networked\n     * applications it may be necessary to snap or ease the player/user to the\n     * authoritative state and discard pending updates in the process. In\n     * non-networked applications it may also be acceptable to simply resume\n     * the application where it last left off and ignore the accumulated\n     * unsimulated time.\n     *\n     * @return {Number}\n     *   The cumulative amount of elapsed time in milliseconds that has not yet\n     *   been simulated, but is being discarded as a result of calling this\n     *   function.\n     */\n    resetFrameDelta() : number {\n        var oldFrameDelta = this.frameDelta;\n        this.frameDelta = 0;\n        return oldFrameDelta;\n    }\n\n    /**\n     * Starts the main loop.\n     *\n     * Note that the application is not considered \"running\" immediately after\n     * this function returns; rather, it is considered \"running\" after the\n     * application draws its first frame. The distinction is that event\n     * handlers should remain paused until the application is running, even\n     * after `MainLoop.start()` is called. Check `MainLoop.isRunning()` for the\n     * current status. To act after the application starts, register a callback\n     * with requestAnimationFrame() after calling this function and execute the\n     * action in that callback. It is safe to call `MainLoop.start()` multiple\n     * times even before the application starts running and without calling\n     * `MainLoop.stop()` in between, although there is no reason to do this;\n     * the main loop will only start if it is not already started.\n     *\n     * See also `MainLoop.stop()`.\n     */\n    start(): void {\n        if (!this.started) {\n            // Since the application doesn't start running immediately, track\n            // whether this function was called and use that to keep it from\n            // starting the main loop multiple times.\n            this.started = true;\n\n            // In the main loop, draw() is called after update(), so if we\n            // entered the main loop immediately, we would never render the\n            // initial state before any updates occur. Instead, we run one\n            // frame where all we do is draw, and then start the main loop with\n            // the next frame.\n            this.raf = requestAnimationFrame(this.startLoop.bind(this));\n        }\n    }\n\n    startLoop(timestamp : number): void {\n        // Render the initial state before any updates occur.\n        this.draw(1);\n\n        // The application isn't considered \"running\" until the\n        // application starts drawing.\n        this.running = true;\n\n        // Reset variables that are used for tracking time so that we\n        // don't simulate time passed while the application was paused.\n        this.lastFrameTimeMs = timestamp;\n        this.lastFpsUpdate = timestamp;\n        this.framesSinceLastFpsUpdate = 0;\n\n        // Start the main loop.\n        this.raf = window.requestAnimationFrame(this.animate.bind(this));\n    }\n\n    /**\n     * Returns whether the main loop is currently running.\n     *\n     * See also `MainLoop.start()` and `MainLoop.stop()`.\n     *\n     * @return {Boolean}\n     *   Whether the main loop is currently running.\n     */\n    isRunning(): boolean {\n        return this.running;\n    }\n\n    /**\n     * Stops the main loop.\n     *\n     * Event handling and other background tasks should also be paused when the\n     * main loop is paused.\n     *\n     * Note that pausing in multiplayer/multi-user applications will cause the\n     * player's/user's client to become out of sync. In this case the\n     * simulation should exit, or the player/user needs to be snapped to their\n     * updated position when the main loop is started again.\n     *\n     * See also `MainLoop.start()` and `MainLoop.isRunning()`.\n     */\n    stop(): void {\n        this.running = false;\n        this.started = false;\n        window.cancelAnimationFrame(this.raf);\n    }\n\n    /**\n     * The main loop that runs updates and rendering.\n     * \n     * @param {DOMHighResTimeStamp} timestamp\n     * The current timestamp. In practice this is supplied by\n     * requestAnimationFrame at the time that it starts to fire callbacks. This\n     * should only be used for comparison to other timestamps because the epoch\n     * (i.e. the \"zero\" time) depends on the engine running this code. In engines\n     * that support `DOMHighResTimeStamp` (all modern browsers except iOS Safari\n     * 8) the epoch is the time the page started loading, specifically\n     * `performance.timing.navigationStart`. Everywhere else, including node.js,\n     * the epoch is the Unix epoch (1970-01-01T00:00:00Z).\n     * \n     * @ignore\n     */\n    animate(timestamp : number): void {\n        // Run the loop again the next time the browser is ready to render.\n        // We set rafHandle immediately so that the next frame can be canceled\n        // during the current frame.\n        this.raf = window.requestAnimationFrame(this.animate.bind(this));\n\n        // Throttle the frame rate (if minFrameDelay is set to a non-zero value by\n        // `MainLoop.setMaxAllowedFPS()`).\n        if (timestamp < this.lastFrameTimeMs + this.minFrameDelay) {\n            return;\n        }\n\n        // frameDelta is the cumulative amount of in-app time that hasn't been\n        // simulated yet. Add the time since the last frame. We need to track total\n        // not-yet-simulated time (as opposed to just the time elapsed since the\n        // last frame) because not all actually elapsed time is guaranteed to be\n        // simulated each frame. See the comments below for details.\n        this.frameDelta += timestamp - this.lastFrameTimeMs;\n        this.lastFrameTimeMs = timestamp;\n\n        // Run any updates that are not dependent on time in the simulation. See\n        // `MainLoop.setBegin()` for additional details on how to use this.\n        this.begin(timestamp, this.frameDelta);\n\n        // Update the estimate of the frame rate, `fps`. Approximately every\n        // second, the number of frames that occurred in that second are included\n        // in an exponential moving average of all frames per second. This means\n        // that more recent seconds affect the estimated frame rate more than older\n        // seconds.\n        if (timestamp > this.lastFpsUpdate + this.fpsUpdateInterval) {\n            // Compute the new exponential moving average.\n            this.fps =\n                // Divide the number of frames since the last FPS update by the\n                // amount of time that has passed to get the mean frames per second\n                // over that period. This is necessary because slightly more than a\n                // second has likely passed since the last update.\n                this.fpsAlpha * this.framesSinceLastFpsUpdate * 1000 / (timestamp - this.lastFpsUpdate) +\n                (1 - this.fpsAlpha) * this.fps;\n\n            // Reset the frame counter and last-updated timestamp since their\n            // latest values have now been incorporated into the FPS estimate.\n            this.lastFpsUpdate = timestamp;\n            this.framesSinceLastFpsUpdate = 0;\n        }\n        // Count the current frame in the next frames-per-second update. This\n        // happens after the previous section because the previous section\n        // calculates the frames that occur up until `timestamp`, and `timestamp`\n        // refers to a time just before the current frame was delivered.\n        this.framesSinceLastFpsUpdate++;\n\n        /*\n         * A naive way to move an object along its X-axis might be to write a main\n         * loop containing the statement `obj.x += 10;` which would move the object\n         * 10 units per frame. This approach suffers from the issue that it is\n         * dependent on the frame rate. In other words, if your application is\n         * running slowly (that is, fewer frames per second), your object will also\n         * appear to move slowly, whereas if your application is running quickly\n         * (that is, more frames per second), your object will appear to move\n         * quickly. This is undesirable, especially in multiplayer/multi-user\n         * applications.\n         *\n         * One solution is to multiply the speed by the amount of time that has\n         * passed between rendering frames. For example, if you want your object to\n         * move 600 units per second, you might write `obj.x += 600 * delta`, where\n         * `delta` is the time passed since the last frame. (For convenience, let's\n         * move this statement to an update() function that takes `delta` as a\n         * parameter.) This way, your object will move a constant distance over\n         * time. However, at low frame rates and high speeds, your object will move\n         * large distances every frame, which can cause it to do strange things\n         * such as move through walls. Additionally, we would like our program to\n         * be deterministic. That is, every time we run the application with the\n         * same input, we would like exactly the same output. If the time between\n         * frames (the `delta`) varies, our output will diverge the longer the\n         * program runs due to accumulated rounding errors, even at normal frame\n         * rates.\n         *\n         * A better solution is to separate the amount of time simulated in each\n         * update() from the amount of time between frames. Our update() function\n         * doesn't need to change; we just need to change the delta we pass to it\n         * so that each update() simulates a fixed amount of time (that is, `delta`\n         * should have the same value each time update() is called). The update()\n         * function can be run multiple times per frame if needed to simulate the\n         * total amount of time passed since the last frame. (If the time that has\n         * passed since the last frame is less than the fixed simulation time, we\n         * just won't run an update() until the the next frame. If there is\n         * unsimulated time left over that is less than our timestep, we'll just\n         * leave it to be simulated during the next frame.) This approach avoids\n         * inconsistent rounding errors and ensures that there are no giant leaps\n         * through walls between frames.\n         *\n         * That is what is done below. It introduces a new problem, but it is a\n         * manageable one: if the amount of time spent simulating is consistently\n         * longer than the amount of time between frames, the application could\n         * freeze and crash in a spiral of death. This won't happen as long as the\n         * fixed simulation time is set to a value that is high enough that\n         * update() calls usually take less time than the amount of time they're\n         * simulating. If it does start to happen anyway, see `MainLoop.setEnd()`\n         * for a discussion of ways to stop it.\n         *\n         * Additionally, see `MainLoop.setUpdate()` for a discussion of performance\n         * considerations.\n         *\n         * Further reading for those interested:\n         *\n         * - http://gameprogrammingpatterns.com/game-loop.html\n         * - http://gafferongames.com/game-physics/fix-your-timestep/\n         * - https://gamealchemist.wordpress.com/2013/03/16/thoughts-on-the-javascript-game-loop/\n         * - https://developer.mozilla.org/en-US/docs/Games/Anatomy\n         */\n        this.numUpdateSteps = 0;\n        while (this.frameDelta >= this.simulationTimestep) {\n            this.update(this.simulationTimestep);\n            this.frameDelta -= this.simulationTimestep;\n\n            /*\n             * Sanity check: bail if we run the loop too many times.\n             *\n             * One way this could happen is if update() takes longer to run than\n             * the time it simulates, thereby causing a spiral of death. For ways\n             * to avoid this, see `MainLoop.setEnd()`. Another way this could\n             * happen is if the browser throttles serving frames, which typically\n             * occurs when the tab is in the background or the device battery is\n             * low. An event outside of the main loop such as audio processing or\n             * synchronous resource reads could also cause the application to hang\n             * temporarily and accumulate not-yet-simulated time as a result.\n             *\n             * 240 is chosen because, for any sane value of simulationTimestep, 240\n             * updates will simulate at least one second, and it will simulate four\n             * seconds with the default value of simulationTimestep. (Safari\n             * notifies users that the script is taking too long to run if it takes\n             * more than five seconds.)\n             *\n             * If there are more updates to run in a frame than this, the\n             * application will appear to slow down to the user until it catches\n             * back up. In networked applications this will usually cause the user\n             * to get out of sync with their peers, but if the updates are taking\n             * this long already, they're probably already out of sync.\n             */\n            if (++this.numUpdateSteps >= 240) {\n                this.panic = true;\n                break;\n            }\n        }\n\n        /*\n         * Render the screen. We do this regardless of whether update() has run\n         * during this frame because it is possible to interpolate between updates\n         * to make the frame rate appear faster than updates are actually\n         * happening. See `MainLoop.setDraw()` for an explanation of how to do\n         * that.\n         *\n         * We draw after updating because we want the screen to reflect a state of\n         * the application that is as up-to-date as possible. (`MainLoop.start()`\n         * draws the very first frame in the application's initial state, before\n         * any updates have occurred.) Some sources speculate that rendering\n         * earlier in the requestAnimationFrame callback can get the screen painted\n         * faster; this is mostly not true, and even when it is, it's usually just\n         * a trade-off between rendering the current frame sooner and rendering the\n         * next frame later.\n         *\n         * See `MainLoop.setDraw()` for details about draw() itself.\n         */\n        this.draw(this.frameDelta / this.simulationTimestep);\n\n        // Run any updates that are not dependent on time in the simulation. See\n        // `MainLoop.setEnd()` for additional details on how to use this.\n        this.end(this.fps, this.panic);\n\n        this.panic = false;\n    }\n\n    // SUBCLASSES MUST OVERRIDE FOUR REQUIRED METHODS:\n        // begin\n        // update\n        // draw\n        // end\n\n    /**\n     * A function that runs at the beginning of the main loop.\n     *\n     * The begin() function is typically used to process input before the\n     * updates run. Processing input here (in chunks) can reduce the running\n     * time of event handlers, which is useful because long-running event\n     * handlers can sometimes delay frames.\n     *\n     * Unlike {@link #setUpdate update}(), which can run zero or more times per\n     * frame, begin() always runs exactly once per frame. This makes it useful\n     * for any updates that are not dependent on time in the simulation.\n     * Examples include adjusting HUD calculations or performing long-running\n     * updates incrementally. Compared to {@link #setEnd end}(), generally\n     * actions should occur in begin() if they affect anything that\n     * {@link #setUpdate update}() or {@link #setDraw draw}() use.\n     *\n     * @param {Function} begin\n     *   The begin() function.\n     * @param {Number} [begin.timestamp]\n     *   The current timestamp (when the frame started), in milliseconds. This\n     *   should only be used for comparison to other timestamps because the\n     *   epoch (i.e. the \"zero\" time) depends on the engine running this code.\n     *   In engines that support `DOMHighResTimeStamp` (all modern browsers\n     *   except iOS Safari 8) the epoch is the time the page started loading,\n     *   specifically `performance.timing.navigationStart`. Everywhere else,\n     *   including node.js, the epoch is the Unix epoch (1970-01-01T00:00:00Z).\n     * @param {Number} [begin.delta]\n     *   The total elapsed time that has not yet been simulated, in\n     *   milliseconds.\n     */\n    abstract begin(timestamp : number, delta : number) : void;\n\n    /**\n     * A function that runs updates (i.e. AI and physics).\n     *\n     * The update() function should simulate anything that is affected by time.\n     * It can be called zero or more times per frame depending on the frame\n     * rate.\n     *\n     * As with everything in the main loop, the running time of update()\n     * directly affects the frame rate. If update() takes long enough that the\n     * frame rate drops below the target (\"budgeted\") frame rate, parts of the\n     * update() function that do not need to execute between every frame can be\n     * moved into Web Workers. (Various sources on the internet sometimes\n     * suggest other scheduling patterns using setTimeout() or setInterval().\n     * These approaches sometimes offer modest improvements with minimal\n     * changes to existing code, but because JavaScript is single-threaded, the\n     * updates will still block rendering and drag down the frame rate. Web\n     * Workers execute in separate threads, so they free up more time in the\n     * main loop.)\n     *\n     * This script can be imported into a Web Worker using importScripts() and\n     * used to run a second main loop in the worker. Some considerations:\n     *\n     * - Profile your code before doing the work to move it into Web Workers.\n     *   It could be the rendering that is the bottleneck, in which case the\n     *   solution is to decrease the visual complexity of the scene.\n     * - It doesn't make sense to move the *entire* contents of update() into\n     *   workers unless {@link #setDraw draw}() can interpolate between frames.\n     *   The lowest-hanging fruit is background updates (like calculating\n     *   citizens' happiness in a city-building game), physics that doesn't\n     *   affect the scene (like flags waving in the wind), and anything that is\n     *   occluded or happening far off screen.\n     * - If draw() needs to interpolate physics based on activity that occurs\n     *   in a worker, the worker needs to pass the interpolation value back to\n     *   the main thread so that is is available to draw().\n     * - Web Workers can't access the state of the main thread, so they can't\n     *   directly modify objects in your scene. Moving data to and from Web\n     *   Workers is a pain. The fastest way to do it is with Transferable\n     *   Objects: basically, you can pass an ArrayBuffer to a worker,\n     *   destroying the original reference in the process.\n     *\n     * You can read more about Web Workers and Transferable Objects at\n     * [HTML5 Rocks](http://www.html5rocks.com/en/tutorials/workers/basics/).\n     *\n     * @param {Function} update\n     *   The update() function.\n     * @param {Number} [update.delta]\n     *   The amount of time in milliseconds to simulate in the update. In most\n     *   cases this timestep never changes in order to ensure deterministic\n     *   updates. The timestep is the same as that returned by\n     *   `MainLoop.getSimulationTimestep()`.\n     */\n    abstract update(timeStep : number) : void;\n\n    /**\n     * A function that draws things on the screen.\n     *\n     * The draw() function gets passed the percent of time that the next run of\n     * {@link #setUpdate update}() will simulate that has actually elapsed, as\n     * a decimal. In other words, draw() gets passed how far between update()\n     * calls it is. This is useful because the time simulated by update() and\n     * the time between draw() calls is usually different, so the parameter to\n     * draw() can be used to interpolate motion between frames to make\n     * rendering appear smoother. To illustrate, if update() advances the\n     * simulation at each vertical bar in the first row below, and draw() calls\n     * happen at each vertical bar in the second row below, then some frames\n     * will have time left over that is not yet simulated by update() when\n     * rendering occurs in draw():\n     *\n     *     update() timesteps:  |  |  |  |  |  |  |  |  |\n     *     draw() calls:        |   |   |   |   |   |   |\n     *\n     * To interpolate motion for rendering purposes, objects' state after the\n     * last update() must be retained and used to calculate an intermediate\n     * state. Note that this means renders will be up to one update() behind.\n     * This is still better than extrapolating (projecting objects' state after\n     * a future update()) which can produce bizarre results. Storing multiple\n     * states can be difficult to set up, and keep in mind that running this\n     * process takes time that could push the frame rate down, so it's often\n     * not worthwhile unless stuttering is visible.\n     *\n     * @param {Function} draw\n     *   The draw() function.\n     * @param {Number} [draw.interpolationPercentage]\n     *   The cumulative amount of time that hasn't been simulated yet, divided\n     *   by the amount of time that will be simulated the next time update()\n     *   runs. Useful for interpolating frames.\n     */\n    public abstract draw(interpolationPercentage : number) : void;\n\n    /**\n     * A function that runs at the end of the main loop.\n     *\n     * Unlike {@link #setUpdate update}(), which can run zero or more times per\n     * frame, end() always runs exactly once per frame. This makes it useful\n     * for any updates that are not dependent on time in the simulation.\n     * Examples include cleaning up any temporary state set up by\n     * {@link #setBegin begin}(), lowering the visual quality if the frame rate\n     * is too low, or performing long-running updates incrementally. Compared\n     * to begin(), generally actions should occur in end() if they use anything\n     * that update() or {@link #setDraw draw}() affect.\n     *\n     * @param {Function} end\n     *   The end() function.\n     * @param {Number} [end.fps]\n     *   The exponential moving average of the frames per second. This is the\n     *   same value returned by `MainLoop.getFPS()`. It can be used to take\n     *   action when the FPS is too low (or to restore to normalcy if the FPS\n     *   moves back up). Examples of actions to take if the FPS is too low\n     *   include exiting the application, lowering the visual quality, stopping\n     *   or reducing activities outside of the main loop like event handlers or\n     *   audio playback, performing non-critical updates less frequently, or\n     *   increasing the simulation timestep (by calling\n     *   `MainLoop.setSimulationTimestep()`). Note that this last option\n     *   results in more time being simulated per update() call, which causes\n     *   the application to behave non-deterministically.\n     * @param {Boolean} [end.panic=false]\n     *   Indicates whether the simulation has fallen too far behind real time.\n     *   Specifically, `panic` will be `true` if too many updates occurred in\n     *   one frame. In networked lockstep applications, the application should\n     *   wait for some amount of time to see if the user can catch up before\n     *   dropping the user. In networked but non-lockstep applications, this\n     *   typically indicates that the user needs to be snapped or eased to the\n     *   current authoritative state. When this happens, it may be convenient\n     *   to call `MainLoop.resetFrameDelta()` to discard accumulated pending\n     *   updates. In non-networked applications, it may be acceptable to allow\n     *   the application to keep running for awhile to see if it will catch up.\n     *   However, this could also cause the application to look like it is\n     *   running very quickly for a few frames as it transitions through the\n     *   intermediate states. An alternative that may be acceptable is to\n     *   simply ignore the unsimulated elapsed time by calling\n     *   `MainLoop.resetFrameDelta()` even though this introduces\n     *   non-deterministic behavior. In all cases, if the application panics\n     *   frequently, this is an indication that the main loop is running too\n     *   slowly. However, most of the time the drop in frame rate will probably\n     *   be noticeable before a panic occurs. To help the application catch up\n     *   after a panic caused by a spiral of death, the same steps can be taken\n     *   that are suggested above if the FPS drops too low.\n     */\n    abstract end(fps : number, panic : boolean) : void;\n}","/*\n * MathUtilities provides a number of services for rendering using 4x4 matrices, like\n * transformting (i.e. translation, rotation, and scaling) 3d or 2d points from world\n * coordinate systems to screen coordinate systems.\n */\nimport {Matrix} from './Matrix'\nimport {Vector3} from './Vector3'\n\nexport namespace MathUtilities {\n    export function determinant4x4(result : Matrix) : number {\n        let det0 = result.get(0, 0) * (\n            (result.get(1, 1) * ((result.get(2, 2) * result.get(3, 3)) - (result.get(2, 3) * result.get(3, 2))))\n            - (result.get(1, 2) * ((result.get(2, 1) * result.get(3, 3)) - (result.get(2, 3) * result.get(3, 1))))\n            + (result.get(1, 3) * ((result.get(2, 1) * result.get(3, 2)) - (result.get(3, 1) * result.get(2, 2)))));\n        let det1 = result.get(0, 1) * (\n            (result.get(1, 0) * ((result.get(2, 2) * result.get(3, 3)) - (result.get(2, 3) * result.get(3, 2))))\n            - (result.get(1, 2) * ((result.get(2, 0) * result.get(3, 3)) - (result.get(3, 0) * result.get(2, 3))))\n            + (result.get(1, 3) * ((result.get(2, 0) * result.get(3, 2)) - (result.get(3, 0) * result.get(2, 2)))));\n        let det2 = result.get(0, 2) * (\n            (result.get(1, 0) * ((result.get(2, 1) * result.get(3, 3)) - (result.get(2, 3) * result.get(3, 1))))\n            - (result.get(1, 1) * ((result.get(2, 0) * result.get(3, 3)) - (result.get(2, 3) * result.get(3, 0))))\n            + (result.get(1, 3) * ((result.get(2, 0) * result.get(3, 1)) - (result.get(2, 1) * result.get(3, 0)))));\n        let det3 = result.get(0, 3) * (\n            (result.get(1, 0) * ((result.get(2, 1) * result.get(3, 2)) - (result.get(2, 2) * result.get(3, 1))))\n            - (result.get(1, 1) * ((result.get(2, 0) * result.get(3, 2)) - (result.get(2, 2) * result.get(3, 0))))\n            + (result.get(1, 2) * ((result.get(2, 0) * result.get(3, 1)) - (result.get(2, 1) * result.get(3, 0)))));\n        let det = det0 - det1 + det2 - det3;\n        console.log(\"det = \" + det0 + \" + \" + det1 + \" + \" + det2 + \" + \" + det3);\n        return det;\n    }\n    export function identity(result : Matrix) : void {\n        if (result.getRows() === result.getColumns()) {\n            for (let i = 0; i < result.getRows(); i++) {\n                for (let j = 0; j < result.getColumns(); j++) {\n                    if (i === j)\n                        result.set(1.0, i, j);\n                    else\n                        result.set(0.0, i, j);\n                }\n            }\n        }\n    }\n    export function inverse(result : Matrix, mat : Matrix) : void {\n        let det = this.determinant(mat);\n        let m00 = mat.get(0, 0); let m01 = mat.get(0, 1); let m02 = mat.get(0, 2); let m03 = mat.get(0, 3);\n        let m10 = mat.get(1, 0); let m11 = mat.get(1, 1); let m12 = mat.get(1, 2); let m13 = mat.get(1, 3);\n        let m20 = mat.get(2, 0); let m21 = mat.get(2, 1); let m22 = mat.get(2, 2); let m23 = mat.get(2, 3);\n        let m30 = mat.get(3, 0); let m31 = mat.get(3, 1); let m32 = mat.get(3, 2); let m33 = mat.get(3, 3);\n        let temp = new Matrix(4, 4);\n        temp.set((m12 * m23 * m31) - (m13 * m22 * m31) + (m13 * m21 * m32) - (m11 * m23 * m32) - (m12 * m21 * m33) + (m11 * m22 * m33), 0, 0);\n        temp.set((m03 * m22 * m31) - (m02 * m23 * m31) - (m03 * m21 * m32) + (m01 * m23 * m32) + (m02 * m21 * m33) - (m01 * m22 * m33), 0, 1);\n        temp.set((m02 * m13 * m31) - (m03 * m12 * m31) + (m03 * m11 * m32) - (m01 * m13 * m32) - (m02 * m11 * m33) + (m01 * m12 * m33), 0, 2);\n        temp.set((m03 * m12 * m21) - (m02 * m13 * m21) - (m03 * m11 * m22) + (m01 * m13 * m22) + (m02 * m11 * m23) - (m01 * m12 * m23), 0, 3);\n        temp.set((m13 * m22 * m30) - (m12 * m23 * m30) - (m13 * m20 * m32) + (m10 * m23 * m32) + (m12 * m20 * m33) - (m10 * m22 * m33), 1, 0);\n        temp.set((m02 * m23 * m30) - (m03 * m22 * m30) + (m03 * m20 * m32) - (m00 * m23 * m32) - (m02 * m20 * m33) + (m00 * m22 * m33), 1, 1);\n        temp.set((m03 * m12 * m30) - (m02 * m13 * m30) - (m03 * m10 * m32) + (m00 * m13 * m32) + (m02 * m10 * m33) - (m00 * m12 * m33), 1, 2);\n        temp.set((m02 * m13 * m20) - (m03 * m12 * m20) + (m03 * m10 * m22) - (m00 * m13 * m22) - (m02 * m10 * m23) + (m00 * m12 * m23), 1, 3);\n        temp.set((m11 * m23 * m30) - (m13 * m21 * m30) + (m13 * m20 * m31) - (m10 * m23 * m31) - (m11 * m20 * m33) + (m10 * m21 * m33), 2, 0);\n        temp.set((m03 * m21 * m30) - (m01 * m23 * m30) - (m03 * m20 * m31) + (m00 * m23 * m31) + (m01 * m20 * m33) - (m00 * m21 * m33), 2, 1);\n        temp.set((m01 * m13 * m30) - (m03 * m11 * m30) + (m03 * m10 * m31) - (m00 * m13 * m31) - (m01 * m10 * m33) + (m00 * m11 * m33), 2, 2);\n        temp.set((m03 * m11 * m20) - (m01 * m13 * m20) - (m03 * m10 * m21) + (m00 * m13 * m21) + (m01 * m10 * m23) - (m00 * m11 * m23), 2, 3);\n        temp.set((m12 * m21 * m30) - (m11 * m22 * m30) - (m12 * m20 * m31) + (m10 * m22 * m31) + (m11 * m20 * m32) - (m10 * m21 * m32), 3, 0);\n        temp.set((m01 * m22 * m30) - (m02 * m21 * m30) + (m02 * m20 * m31) - (m00 * m22 * m31) - (m01 * m20 * m32) + (m00 * m21 * m32), 3, 1);\n        temp.set((m02 * m11 * m30) - (m01 * m12 * m30) - (m02 * m10 * m31) + (m00 * m12 * m31) + (m01 * m10 * m32) - (m00 * m11 * m32), 3, 2);\n        temp.set((m01 * m12 * m20) - (m02 * m11 * m20) + (m02 * m10 * m21) - (m00 * m12 * m21) - (m01 * m10 * m22) + (m00 * m11 * m22), 3, 3);\n        for (let i = 0; i < 4; i++) {\n            for (let j = 0; j < 4; j++) {\n                result.set(temp.get(i, j) / det, i, j);\n            }\n        }\n    }\n    export function model(result : Matrix, translation : Vector3, rotation : Vector3, scale : Vector3) : void {\n        // TRANSLATION MATRIX\t\n        let translationMatrix = new Matrix(4, 4);\n        this.identity(translationMatrix);\n        this.translate(translationMatrix, translation);\n\n        // ROTATION MATRIX\n        let rotationMatrix = new Matrix(4, 4);\n        this.identity(rotationMatrix);\n        this.rotate(rotationMatrix, rotation);\n\n        // SCALING MATRIX\n        let scaleMatrix = new Matrix(4, 4);\n        this.identity(scaleMatrix);\n        this.scale(scaleMatrix, scale);\n\n        // AND NOW MULTIPLY THEM TOGETHER IN THE CORRECT ORDER\n        let tempMatrix = new Matrix(4, 4);\n        this.multiply(tempMatrix, translationMatrix, rotationMatrix);\n        this.multiply(result, tempMatrix, scaleMatrix);\n    }\n\n    export function multiply(result : Matrix, mat0 : Matrix, mat1 : Matrix) : void {\n        // result MIGHT BE mat0 OR mat1 SO IT'S BEST IF WE\n        // CALCULATE TEMP VALUES FIRST BEFORE ASSIGNMENT\n        let r00 = (mat0.get(0, 0) * mat1.get(0, 0))\n            + (mat0.get(0, 1) * mat1.get(1, 0))\n            + (mat0.get(0, 2) * mat1.get(2, 0))\n            + (mat0.get(0, 3) * mat1.get(3, 0));\n        let r10 = (mat0.get(1, 0) * mat1.get(0, 0))\n            + (mat0.get(1, 1) * mat1.get(1, 0))\n            + (mat0.get(1, 2) * mat1.get(2, 0))\n            + (mat0.get(1, 3) * mat1.get(3, 0));\n        let r20 = (mat0.get(2, 0) * mat1.get(0, 0))\n            + (mat0.get(2, 1) * mat1.get(1, 0))\n            + (mat0.get(2, 2) * mat1.get(2, 0))\n            + (mat0.get(2, 3) * mat1.get(3, 0));\n        let r30 = (mat0.get(3, 0) * mat1.get(0, 0))\n            + (mat0.get(3, 1) * mat1.get(1, 0))\n            + (mat0.get(3, 2) * mat1.get(2, 0))\n            + (mat0.get(3, 3) * mat1.get(3, 0));\n        let r01 = (mat0.get(0, 0) * mat1.get(0, 1))\n            + (mat0.get(0, 1) * mat1.get(1, 1))\n            + (mat0.get(0, 2) * mat1.get(2, 1))\n            + (mat0.get(0, 3) * mat1.get(3, 1));\n        let r11 = (mat0.get(1, 0) * mat1.get(0, 1))\n            + (mat0.get(1, 1) * mat1.get(1, 1))\n            + (mat0.get(1, 2) * mat1.get(2, 1))\n            + (mat0.get(1, 3) * mat1.get(3, 1));\n        let r21 = (mat0.get(2, 0) * mat1.get(0, 1))\n            + (mat0.get(2, 1) * mat1.get(1, 1))\n            + (mat0.get(2, 2) * mat1.get(2, 1))\n            + (mat0.get(2, 3) * mat1.get(3, 1));\n        let r31 = (mat0.get(3, 0) * mat1.get(0, 1))\n            + (mat0.get(3, 1) * mat1.get(1, 1))\n            + (mat0.get(3, 2) * mat1.get(2, 1))\n            + (mat0.get(3, 3) * mat1.get(3, 1));\n        let r02 = (mat0.get(0, 0) * mat1.get(0, 2))\n            + (mat0.get(0, 1) * mat1.get(1, 2))\n            + (mat0.get(0, 2) * mat1.get(2, 2))\n            + (mat0.get(0, 3) * mat1.get(3, 2));\n        let r12 = (mat0.get(1, 0) * mat1.get(0, 2))\n            + (mat0.get(1, 1) * mat1.get(1, 2))\n            + (mat0.get(1, 2) * mat1.get(2, 2))\n            + (mat0.get(1, 3) * mat1.get(3, 2));\n        let r22 = (mat0.get(2, 0) * mat1.get(0, 2))\n            + (mat0.get(2, 1) * mat1.get(1, 2))\n            + (mat0.get(2, 2) * mat1.get(2, 2))\n            + (mat0.get(2, 3) * mat1.get(3, 2));\n        let r32 = (mat0.get(3, 0) * mat1.get(0, 2))\n            + (mat0.get(3, 1) * mat1.get(1, 2))\n            + (mat0.get(3, 2) * mat1.get(2, 2))\n            + (mat0.get(3, 3) * mat1.get(3, 2));\n        let r03 = (mat0.get(0, 0) * mat1.get(0, 3))\n            + (mat0.get(0, 1) * mat1.get(1, 3))\n            + (mat0.get(0, 2) * mat1.get(2, 3))\n            + (mat0.get(0, 3) * mat1.get(3, 3));\n        let r13 = (mat0.get(1, 0) * mat1.get(0, 3))\n            + (mat0.get(1, 1) * mat1.get(1, 3))\n            + (mat0.get(1, 2) * mat1.get(2, 3))\n            + (mat0.get(1, 3) * mat1.get(3, 3));\n        let r23 = (mat0.get(2, 0) * mat1.get(0, 3))\n            + (mat0.get(2, 1) * mat1.get(1, 3))\n            + (mat0.get(2, 2) * mat1.get(2, 3))\n            + (mat0.get(2, 3) * mat1.get(3, 3));\n        let r33 = (mat0.get(3, 0) * mat1.get(0, 3))\n            + (mat0.get(3, 1) * mat1.get(1, 3))\n            + (mat0.get(3, 2) * mat1.get(2, 3))\n            + (mat0.get(3, 3) * mat1.get(3, 3));\n\n        // NOW PUT ALL THE CALCULATED VALUES IN THE result MATRIX\n        result.set(r00, 0, 0);\n        result.set(r10, 1, 0);\n        result.set(r20, 2, 0);\n        result.set(r30, 3, 0);\n        result.set(r01, 0, 1);\n        result.set(r11, 1, 1);\n        result.set(r21, 2, 1);\n        result.set(r31, 3, 1);\n        result.set(r02, 0, 2);\n        result.set(r12, 1, 2);\n        result.set(r22, 2, 2);\n        result.set(r32, 3, 2);\n        result.set(r03, 0, 3);\n        result.set(r13, 1, 3);\n        result.set(r23, 2, 3);\n        result.set(r33, 3, 3);\n    }\n\n    export function projection(result : Matrix, nearZ : number, farZ : number, viewportWidth : number, viewportHeight : number, fovY : number) : void {\n        let aspectRatio = viewportWidth / viewportHeight;\n        let fieldOfViewY = this.math.degreesToRadians(fovY);\n        let fieldOfViewX = 2 * Math.atan(Math.tan(fieldOfViewY / 2) * aspectRatio);\n\n        // WE'LL USE THESE AS SHORTHAND FOR LOADING OUR MATRIX\n        let n = nearZ;\n        let f = farZ;\n        let r = Math.tan(fieldOfViewX / 2) * n;\n        let t = Math.tan(fieldOfViewY / 2) * n;\n\n        // 0-3\n        result.set(n / r, 0, 0);\n        result.set(0.0, 0, 1);\n        result.set(0.0, 0, 2);\n        result.set(0.0, 0, 3);\n        // 4-7\n        result.set(0.0, 1, 0);\n        result.set(n / t, 1, 1);\n        result.set(0.0, 1, 2);\n        result.set(0.0, 1, 3);\n        // 8-11\n        result.set(0.0, 2, 0);\n        result.set(0.0, 2, 1);\n        result.set((-(f + n)) / (f - n), 2, 2);\n        result.set((-2 * f * n) / (f - n), 2, 3);\n        // 12-15 \n        result.set(0.0, 3, 0);\n        result.set(0.0, 3, 1);\n        result.set(-1.0, 3, 2);\n        result.set(0.0, 3, 3);\n    }\n\n    export function rotate(result : Matrix, rotationVector : Vector3) : void {\n        // START WITH THE X-AXIS ROTATION\n        let xRotationMatrix = new Matrix(4, 4);\n        this.identity(xRotationMatrix);\n        let thetaX = rotationVector.getThetaX();\n        xRotationMatrix.set(Math.cos(thetaX), 1, 1);\n        xRotationMatrix.set(Math.sin(thetaX), 2, 1);\n        xRotationMatrix.set(-1 * Math.sin(thetaX), 1, 2);\n        xRotationMatrix.set(Math.cos(thetaX), 2, 2);\n\n        // START WITH THE Y-AXIS ROTATION\n        let yRotationMatrix = new Matrix(4, 4);\n        this.identity(yRotationMatrix);\n        let thetaY = rotationVector.getThetaY();\n        yRotationMatrix.set(Math.cos(thetaY), 0, 0);\n        yRotationMatrix.set(-1 * Math.sin(thetaY), 2, 0);\n        yRotationMatrix.set(Math.sin(thetaY), 0, 2);\n        yRotationMatrix.set(Math.cos(thetaY), 2, 2);\n\n        // START WITH THE Z-AXIS ROTATION\n        let zRotationMatrix = new Matrix(4, 4);\n        this.identity(zRotationMatrix);\n        let thetaZ = rotationVector.getThetaZ();\n        zRotationMatrix.set(Math.cos(thetaZ), 0, 0);\n        zRotationMatrix.set(Math.sin(thetaZ), 1, 0);\n        zRotationMatrix.set(-1 * Math.sin(thetaZ), 0, 1);\n        zRotationMatrix.set(Math.cos(thetaZ), 1, 1);\n\n        // START WITH THE X-AXIS ROTATION\n        let tempMatrix = new Matrix(4, 4);\n        this.identity(tempMatrix);\n        this.multiply(tempMatrix, xRotationMatrix, yRotationMatrix);\n        this.multiply(result, tempMatrix, zRotationMatrix);\n    }\n\n    export function scale(result : Matrix, scaleVector : Vector3) : void {\n        // START WITH THE IDENTITY MATRIX\n        this.identity(result, scaleVector);\n\n        // AND THEN LOAD IN THE TRANSLATION VALUES\n        result.set(scaleVector.getX(), 0, 0);\n        result.set(scaleVector.getY(), 1, 1);\n        result.set(scaleVector.getZ(), 2, 2);\n    }\n\n    export function transform(result : Vector3, mat : Matrix, vec : Vector3) : void {\n        result.setX((mat.get(0, 0) * vec.getX()) + (mat.get(0, 1) * vec.getY()) + (mat.get(0, 2) * vec.getZ()) + (mat.get(0, 3) * vec.getW()));\n        result.setY((mat.get(1, 0) * vec.getX()) + (mat.get(1, 1) * vec.getY()) + (mat.get(1, 2) * vec.getZ()) + (mat.get(1, 3) * vec.getW()));\n        result.setZ((mat.get(2, 0) * vec.getX()) + (mat.get(2, 1) * vec.getY()) + (mat.get(2, 2) * vec.getZ()) + (mat.get(2, 3) * vec.getW()));\n        result.setW((mat.get(3, 0) * vec.getX()) + (mat.get(3, 1) * vec.getY()) + (mat.get(3, 2) * vec.getZ()) + (mat.get(3, 3) * vec.getW()));\n    }\n\n    export function translate(result : Matrix, translationVector : Vector3) : void {\n        // START WITH THE IDENTITY MATRIX\n        this.identity(result);\n\n        // AND THEN LOAD IN THE TRANSLATION VALUES\n        result.set(translationVector.getX(), 0, 3);\n        result.set(translationVector.getY(), 1, 3);\n        result.set(translationVector.getZ(), 2, 3);\n    }\n\n    export function transpose(result : Matrix, mat : Matrix) : void {\n        for (let i = 0; i < 4; i++) {\n            for (let j = 0; j < 4; j++) {\n                let temp = mat.get(i, j);\n                result.set(temp, j, i);\n            }\n        }\n    }\n\n    export function view(result : Matrix, cameraPosition : Vector3, cameraOrientation : Vector3) : void {\n        let pitch = this.math.degreesToRadians(cameraOrientation.getThetaX());\n        let yaw = this.math.degreesToRadians(cameraOrientation.getThetaY());\n        let roll = this.math.degreesToRadians(cameraOrientation.getThetaZ());\n\n        // TO TRANSLATE\n        let translateVector = this.math.vectorMath.createPositionVector();\n        translateVector.set(-cameraPosition.getX(), -cameraPosition.getY(), -cameraPosition.getZ());\n        let translateMatrix = new Matrix(4, 4);\n        this.identity(translateMatrix);\n        this.translate(translateMatrix, translateVector);\n\n        // TO ROTATE\n        let rotateVector = this.math.vectorMath.createRotationVector();\n        rotateVector.set(-pitch, -yaw, -roll);\n        let rotateMatrix = new Matrix(4, 4);\n        this.rotate(rotateMatrix, rotateVector);\n\n        // NOW COMBINE THE 2 MATRICES\n        this.multiply(result, rotateMatrix, translateMatrix);\n    }\n\n    export function addVectors(result : Vector3, vec0 : Vector3, vec1 : Vector3) : void {\n        for (let i = 0; i < vec0.getSize(); i++) {\n            let total = vec0.getAt(i) + vec1.getAt(i);\n            result.setAt(i, total);\n        }\n    }\n\n    export function crossProduct(result : Vector3, vec0 : Vector3, vec1 : Vector3) : void {\n        let result0 = (vec0.getY() * vec1.getZ())\n            - (vec1.getY() * vec0.getZ());\n        let result1 = (vec0.getZ() * vec1.getX())\n            - (vec1.getZ() * vec0.getX());\n        let result2 = (vec0.getX() * vec1.getY())\n            - (vec1.getX() * vec0.getY());\n        result.setX(result0);\n        result.setY(result1);\n        result.setZ(result2);\n    }\n\n    export function dotProduct(vec0 : Vector3, vec1 : Vector3) : number {\n        let resultX = vec0.getX() * vec1.getX();\n        let resultY = vec0.getY() * vec1.getY();\n        let resultZ = vec0.getZ() * vec1.getZ();\n        return resultX + resultY + resultZ;\n    }\n\n    export function multiplyVectors(result : Vector3, vec : Vector3, scalar : number) : void {\n        let vecX = vec.getX() * scalar;\n        let vecY = vec.getY() * scalar;\n        let vecZ = vec.getZ() * scalar;\n        result.setX(vecX);\n        result.setY(vecY);\n        result.setZ(vecZ);\n    }\n\n    export function normalize(result : Vector3, vec : Vector3) : void {\n        let xSquared = vec.getX() * vec.getX();\n        let ySquared = vec.getY() * vec.getY();\n        let zSquared = vec.getZ() * vec.getZ();\n        let distance = Math.sqrt(xSquared + ySquared + zSquared);\n        result.setX(vec.getX() / distance);\n        result.setY(vec.getY() / distance);\n        result.setZ(vec.getZ() / distance);\n    }\n\n    export function subtractVectors(result : Vector3, vec0 : Vector3, vec1 : Vector3) : void {\n        let resultX = vec0.getX() - vec1.getX();\n        let resultY = vec0.getY() - vec1.getY();\n        let resultZ = vec0.getZ() - vec1.getZ();\n        result.setX(resultX);\n        result.setY(resultY);\n        result.setZ(resultZ);\n    }\n}","/*\n * A Matrix is used for transforming points from local\n * coordinates to world coordinates.\n */\nexport class Matrix {\n    private mat : Float32Array;\n    private rows : number;\n    private columns : number;\n\n    public constructor(rows : number, columns : number) {\n        this.rows = rows;\n        this.columns = columns;\n        this.mat = new Float32Array(rows * columns);\n        for (let i = 0; i < (rows * columns); i++)\n            this.mat[i] = 0.0;\n    }\n\n    public getData() : Float32Array {\n        return this.mat;\n    }\n\n    public getRows() : number {\n        return this.rows;\n    }\n\n    public getColumns() : number {\n        return this.columns;\n    }\n\n    public getIndex (rows : number, columns : number) : number {\n        return (this.rows * columns) + rows;\n    }\n    \n    public get (row : number, column : number) : number {\n        let index = this.getIndex(row, column);\n        let valueToReturn = this.mat[index];\n        return valueToReturn;\n    }\n\n    public set (value : number, row : number, column : number) {\n        let index = this.getIndex(row, column);\n        this.mat[index] = value;\n    }\n    \n    public print () : void {\n        let maxWidth = 0;\n        for (let i = 0; i < 4; i++) {\n            for (let j = 0; j < 4; j++) {\n                let testNum = this.get(j, i) + \"\";\n                if (testNum.length > maxWidth) {\n                    maxWidth = testNum.length;\n                }\n            }\n        }\n        let text = \"[ \";\n        for (let i = 0; i < this.rows; i++) {\n            if (i > 0)\n                text += \"  \";\n            for (var j = 0; j < this.columns; j++) {\n                var numText = this.get(i, j) + \"\";\n                while (numText.length < maxWidth) {\n                    numText = \" \" + numText;\n                }\n                text += numText;\n                if (j < (this.columns - 1)) {\n                    text += \",\";\n                }\n                text += \" \";\n            }\n            if (i < (this.rows - 1)) {\n                text += \"\\n\";\n            }\n            text += \"]\";\n            console.log(text);\n        }\n    }\n}","/**\n * Vector3\n * \n * The Vector3 class can be used for any 2d or 3d point, vector, \n * or rotation (i.e. angles of orientation).\n */\nexport class Vector3 {\n    private vec : Float32Array;\n    private size : number;\n\n    public constructor() {\n        this.vec = new Float32Array(4);\n        for (let i = 0; i < 4; i++)\n            this.vec[i] = 0.0;\n        this.size = 4;\n    }\n\n    public getSize() : number {\n        return this.size;\n    }\n\n    public getAt(index : number) : number {\n        return this.vec[index];\n    }\n\n    public getX() : number {\n        return this.vec[0];\n    }\n\n    public getY() : number {\n        return this.vec[1];\n    }\n\n    public getZ() : number {\n        return this.vec[2];\n    }\n\n    public getW() : number {\n        return this.vec[3];\n    }\n\n    public getThetaX() : number {\n        return this.vec[0];\n    }\n\n    public getThetaY() : number {\n        return this.vec[1];\n    }\n\n    public getThetaZ() : number {\n        return this.vec[2];\n    }\n\n    public set(init0 : number, init1 : number, init2 : number, init3 : number) : void {\n        this.vec[0] = init0;\n        this.vec[1] = init1;\n        this.vec[2] = init2;\n        this.vec[3] = init3;\n    }\n\n    public setAt(index : number, value : number) : void {\n        this.vec[index] = value;\n    }\n\n    public setX(initX : number) : void {\n        this.vec[0] = initX;\n    }\n\n    public setY(initY : number) : void {\n        this.vec[1] = initY;\n    }\n\n    public setZ(initZ : number) : void {\n        this.vec[2] = initZ;\n    }\n\n    public setW(initW : number) : void {\n        this.vec[3] = initW;\n    }\n\n    public setThetaX(initThetaX : number) : void {\n        this.setX(initThetaX);\n    }\n\n    public setThetaY(initThetaY : number) : void {\n        this.setY(initThetaY);\n    }\n\n    public setThetaZ(initThetaZ : number) : void {\n        this.setZ(initThetaZ);\n    }\n\n    public print() : void {\n        let text = \"[\";\n        for (let i = 0; i < this.size; i++) {\n            text += this.vec[i];\n            if (i < (this.size - 1)) {\n                text += \", \";\n            }\n        }\n        text += \"]\";\n        console.log(text);\n    }\n}","import {SceneGraph} from '../scene/SceneGraph'\nimport {AnimatedSprite} from \"../scene/sprite/AnimatedSprite\"\n\nexport class GamePhysics {\n    constructor() {\n\n    }\n\n    update(sceneGraph : SceneGraph) : void {\n        // UPDATE ALL OBJECT POSITIONS ACCORDING TO THEIR VELOCITIES\n        // BUT MAKE SURE TO PERFORM COLLISION DETECTION AS WELL\n        // NOTE, FOR THIS YOU SHOULD MAKE SURE EACH SCENE OBJECT\n        // HAS A BOUNDING VOLUME LIKE EITHER AN AABB OR A CIRCLE\n\n        //Collision detection\n        let main_character : AnimatedSprite = sceneGraph.getMainCharacter();\n        let main_character_radius = Math.pow(Math.pow(main_character.getSpriteType().getSpriteWidth()/3, 2) + Math.pow(main_character.getSpriteType().getSpriteHeight()/3, 2), 0.5);\n        for(let sprite of <Array<AnimatedSprite>>sceneGraph.scope()) {\n            if(main_character != null && sprite.getTypeName() != \"MAIN_BUG\"){\n                //distance = ((x2-x1)^2 + (y2-y1)^2)^0.5\n                let distance = Math.sqrt((Math.pow(((main_character.getPosition().getX() + sceneGraph.getViewport().getX()) - (sprite.getPosition().getX() + sceneGraph.getViewport().getX())), 2)\n                 + Math.pow(((main_character.getPosition().getY() + sceneGraph.getViewport().getY()) - (sprite.getPosition().getY() + sceneGraph.getViewport().getY())), 2)));\n                let sprite_radius = Math.pow(Math.pow(sprite.getSpriteType().getSpriteWidth()/9, 2) + Math.pow(sprite.getSpriteType().getSpriteHeight()/9, 2), 0.5);\n                if(distance <= (main_character_radius + sprite_radius)){\n                    //We have a collision\n                    if(sprite.getTypeName() == \"BUG_ONE\" && sprite.getState() != \"DYING\" && sprite.getState() != \"DEAD\"){\n                        sprite.setState(\"DYING\");\n                    }\n                }\n            }\n        }\n    }\n}","/*\n * This class renders text to a canvas, updated each frame.\n */\nexport class TextToRender {\n    public id : string;\n    public text : string;\n    public x : number;\n    public y : number;\n    public update : Function;\n    public fontFamily : string;\n    public fontSize : number;\n    public fontColor : string;\n    public properties : Map<string, object>;\n\n    public constructor(initId : string, initText : string, initX : number, initY : number, initUpdate : Function) {\n        this.id = initId;\n        this.text = initText;\n        this.x = initX;\n        this.y = initY;\n        this.update = initUpdate;\n        this.fontFamily = \"\";\n        this.fontSize = 0;\n        this.fontColor = \"\";\n        this.properties = new Map();\n    }\n}\n\nexport class TextRenderer {\n    private textToRender : Array<TextToRender>;\n    private textCanvas : HTMLCanvasElement;\n    private textCanvasWidth : number;\n    private textCanvasHeight : number;\n    private textCtx : CanvasRenderingContext2D;\n    private defaultFontFamily : string;\n    private defaultFontSize : number;\n    private defaultFontColor : string;\n\n    public constructor(textCanvasId : string, initFontFamily : string, initFontSize : number, initFontColor : string) {\n        this.textToRender = new Array();\n        this.textCanvas = <HTMLCanvasElement>document.getElementById(textCanvasId);\n        this.textCanvas.width = window.innerWidth;\n        this.textCanvas.height = window.innerHeight;\n        this.textCanvasWidth = this.textCanvas.width;\n        this.textCanvasHeight = this.textCanvas.height;\n        this.textCtx = this.textCanvas.getContext(\"2d\");\n        this.defaultFontFamily = initFontFamily;\n        this.defaultFontSize = initFontSize;\n        this.defaultFontColor = initFontColor;\n    }\n    \n    public addTextToRender(textToAdd : TextToRender) : void {\n        textToAdd.fontFamily = this.defaultFontFamily;\n        textToAdd.fontSize = this.defaultFontSize;\n        textToAdd.fontColor = this.defaultFontColor;\n        this.textToRender.push(textToAdd);\n    }\n\n    public clear() : void {\n        this.textToRender = [];\n    }\n\n    public getCanvasWidth() : number {\n        return this.textCanvasWidth;\n    }\n\n    public getCanvasHeight() : number {\n        return this.textCanvasHeight;\n    }\n\n    public render() : void {\n        this.textCtx.clearRect(0, 0, this.textCanvas.width, this.textCanvas.height);\n        for (var i = 0; i < this.textToRender.length; i++) {\n            var textToRender = this.textToRender[i];\n            textToRender.update();\n            this.textCtx.font = \"\" + textToRender.fontSize + \"px \" + textToRender.fontFamily;\n            this.textCtx.fillStyle = textToRender.fontColor;\n            this.textCtx.fillText(textToRender.text, textToRender.x, textToRender.y);\n        }\n    }\n}","import { WebGLGameShader } from './WebGLGameShader'\nimport { Matrix } from '../math/Matrix'\nimport { Vector3 } from '../math/Vector3'\n\nexport abstract class WebGLGameRenderingComponent {\n    protected readonly A_POSITION = \"a_Position\";\n    protected readonly A_TEX_COORD = \"a_TexCoord\";\n    protected readonly U_MESH_TRANSFORM = \"u_MeshTransform\";\n    protected readonly U_TEX_COORD_FACTOR = \"u_TexCoordFactor\";\n    protected readonly U_TEX_COORD_SHIFT = \"u_TexCoordShift\";\n    protected readonly U_SAMPLER = \"u_Sampler\";\n    protected readonly NUM_VERTICES = 4;\n    protected readonly FLOATS_PER_VERTEX = 2;\n    protected readonly FLOATS_PER_TEXTURE_COORDINATE = 2;\n    protected readonly TOTAL_BYTES = 16;\n    protected readonly VERTEX_POSITION_OFFSET = 0;\n    protected readonly TEXTURE_COORDINATE_OFFSET = 8;\n    protected readonly INDEX_OF_FIRST_VERTEX = 0;\n\n    // THESE WILL BE PROVIDED CUSTOMLY AFTER CONSTRUCTION DURING init\n    protected shader: WebGLGameShader;\n    protected vertexDataBuffer: WebGLBuffer;\n    protected webGLAttributeLocations: Map<string, GLuint>;\n    protected webGLUniformLocations: Map<string, WebGLUniformLocation>;\n\n    // WE'LL USE THESE FOR TRANSOFMRING OBJECTS WHEN WE DRAW THEM\n    protected meshTransform: Matrix;\n    protected meshTranslate: Vector3;\n    protected meshRotate: Vector3;\n    protected meshScale: Vector3;\n\n    constructor() {\n        // WE'LL MANAGE THESE FOR OUR WebGL SHADERS\n        this.webGLAttributeLocations = new Map();\n        this.webGLUniformLocations = new Map();\n\n        // WE'LL USE THESE FOR TRANSLATING, ROTATING, AND SCALING THE MESH\n        this.meshTransform = new Matrix(4, 4);\n        this.meshTranslate = new Vector3();\n        this.meshRotate = new Vector3();\n        this.meshScale = new Vector3();\n    }\n\n    public init(webGL: WebGLRenderingContext,\n                vertexShaderSource: string,\n                fragmentShaderSource: string,\n                renderSetupData: object): void {\n        // FIRST WE NEED TO MAKE THE SHADER\n        this.shader = new WebGLGameShader();\n        this.shader.init(webGL, vertexShaderSource, fragmentShaderSource);\n\n        // CREATE THE BUFFER ON THE GPU\n        this.vertexDataBuffer = webGL.createBuffer();\n\n        // BIND THE BUFFER TO BE VERTEX DATA\n        webGL.bindBuffer(webGL.ARRAY_BUFFER, this.vertexDataBuffer);\n\n        // MAKE THE MESH DATA OURSELVES IN A CHILD CLASS\n        let meshVertexData : Float32Array = this.getVertexData(renderSetupData);\n\n        // AND SEND THE DATA TO THE BUFFER WE CREATED ON THE GPU\n        webGL.bufferData(webGL.ARRAY_BUFFER, meshVertexData, webGL.STATIC_DRAW);\n\n        // SETUP THE SHADER ATTRIBUTES AND UNIFORMS\n        this.loadAttributeLocations(webGL, this.getShaderAttributeNames());\n        this.loadUniformLocations(webGL, this.getShaderUniformNames());\n    }\n\n    public abstract getVertexData(renderData : object) : Float32Array;\n    public abstract getShaderAttributeNames(): string[];\n    public abstract getShaderUniformNames(): string[];\n\n    /**\n     * This function loads all the attribute data values so that we can\n     * retrieve them later when it is time to render. Note that this function\n     * can only be called after the shader program has been created.\n     */\n    protected loadAttributeLocations(webGL: WebGLRenderingContext, attributeLocationNames: Array<string>) {\n        for (var i = 0; i < attributeLocationNames.length; i++) {\n            let locationName: string = attributeLocationNames[i];\n            let location: GLuint = webGL.getAttribLocation(this.shader.getProgram(), locationName);\n            this.webGLAttributeLocations.set(locationName, location);\n        }\n    }\n\n    /**\n     * This function loads all the uniform data values so that we can\n     * retrieve them later when it is time to render. Note that this function\n     * can only be called after the shader program has been created.\n     */\n    protected loadUniformLocations(webGL: WebGLRenderingContext, uniformLocationNames: Array<string>) {\n        for (let i: number = 0; i < uniformLocationNames.length; i++) {\n            let locationName: string = uniformLocationNames[i];\n            let location: WebGLUniformLocation = webGL.getUniformLocation(this.shader.getProgram(), locationName);\n            this.webGLUniformLocations.set(locationName, location);\n        }\n    }\n}","/*\n * This serves as the subsystem that manages all game rendering.\n */\nimport { TextRenderer } from './TextRenderer'\nimport { WebGLGameTiledLayerRenderer } from './WebGLGameTiledLayerRenderer'\nimport { WebGLGameSpriteRenderer } from './WebGLGameSpriteRenderer'\nimport { WebGLGameTexture } from './WebGLGameTexture';\nimport { AnimatedSprite } from '../scene/sprite/AnimatedSprite'\nimport { TiledLayer } from '../scene/tiles/TiledLayer'\nimport { Viewport } from '../scene/Viewport'\n\n\nexport class WebGLGameRenderingSystem {\n    private renderingCanvas: HTMLCanvasElement;\n    private webGL: WebGLRenderingContext;\n    private canvasWidth: number;\n    private canvasHeight: number;\n\n    // OUR GAMES RENDER THREE DIFFERENT TYPES OF THINGS\n    private tiledLayerRenderer: WebGLGameTiledLayerRenderer;\n    private spriteRenderer: WebGLGameSpriteRenderer;\n    private textRenderer: TextRenderer;\n\n    public constructor( renderingCanvasId: string,\n                        textCanvasId: string) {\n        // FIRST SETUP webGL\n        this.renderingCanvas = <HTMLCanvasElement>document.getElementById(renderingCanvasId);\n        this.renderingCanvas.width = window.innerWidth;\n        this.renderingCanvas.height = window.innerHeight;\n        this.canvasWidth = this.renderingCanvas.width;\n        this.canvasHeight = this.renderingCanvas.height;\n        this.webGL = this.renderingCanvas.getContext(\"webgl\");\n\n        // IF THE USER'S MACHINE/BROWSER DOESN'T SUPPORT\n        // WebGL THEN THERE'S NO POINT OF GOING ON\n        if (!this.webGL) {\n            // PROVIDE SOME FEEDBACK THAT WebGL WON'T WORK BECAUSE\n            // THE USER'S' GRAPHICS CARD IS FOR THE BIRDS\n            console.error(\"WebGL is not supported by this device\");\n\n            // AND END INITIALIZATION\n            return;\n        }\n\n        // WebGL IS SUPPORTED, SO INIT EVERYTHING THAT USES IT\n\n        // MAKE THE CLEAR COLOR BLACK\n        this.setClearColor(0.0, 0.0, 0.0, 1.0);\n\n        // ENABLE DEPTH TESTING\n        this.webGL.disable(this.webGL.DEPTH_TEST);\n        this.webGL.enable(this.webGL.BLEND);\n        this.webGL.blendFunc(this.webGL.SRC_ALPHA, this.webGL.ONE_MINUS_SRC_ALPHA);\n\n        // TURN ON BACKFACE CULLING\n        this.webGL.enable(this.webGL.CULL_FACE);\n\n        // THIS SPECIFIES THAT WE'RE USING THE ENTIRE CANVAS\n        this.webGL.viewport(0, 0, this.canvasWidth, this.canvasHeight);\n\n        // MAKE THE TILED LAYER RENDERER\n        this.tiledLayerRenderer = new WebGLGameTiledLayerRenderer();\n\n        // MAKE THE SPRITE RENDERER\n        this.spriteRenderer = new WebGLGameSpriteRenderer();\n\n        // THIS WILL STORE OUR TEXT\n        this.textRenderer = new TextRenderer(textCanvasId, \"serif\", 18, \"#FFFF00\");\n    }\n\n    public getTextureConstant(id: number): number {\n        // WE ONLY ALLOW FOR 10 TEXTURES TO BE PUT ON THE GPU\n        switch (id) {\n            case 0: return this.webGL.TEXTURE0;\n            case 1: return this.webGL.TEXTURE1;\n            case 2: return this.webGL.TEXTURE2;\n            case 3: return this.webGL.TEXTURE3;\n            case 4: return this.webGL.TEXTURE4;\n            case 5: return this.webGL.TEXTURE5;\n            case 6: return this.webGL.TEXTURE6;\n            case 7: return this.webGL.TEXTURE7;\n            case 8: return this.webGL.TEXTURE8;\n            default: return this.webGL.TEXTURE9;\n        }\n    }\n\n    public getWebGL(): WebGLRenderingContext {\n        return this.webGL;\n    }\n\n    public getTiledLayerRenderer(): WebGLGameTiledLayerRenderer {\n        return this.tiledLayerRenderer;\n    }\n\n    public getSpriteRenderer(): WebGLGameSpriteRenderer {\n        return this.spriteRenderer;\n    }\n\n    public getTextRenderer(): TextRenderer {\n        return this.textRenderer;\n    }\n\n    public initWebGLTexture(textureToInit: WebGLGameTexture, textureId: number, image: HTMLImageElement, callback: Function): void {\n        textureToInit.width = image.width;\n        textureToInit.height = image.height;\n\n        // CREATE A WebGL TEXTURE ON THE GPU\n        textureToInit.webGLTexture = this.webGL.createTexture();\n        textureToInit.webGLTextureId = textureId;\n\n        // FLIP THE IMAGE'S y-AXIS\n        //webGL.pixelStorei(webGL.UNPACK_FLIP_Y_WEBGL, 1);\n\n        // ACTIVATE THE WebGL TEXTURE ON THE GPU\n        //let textureNumName : string = \"TEXTURE\" + textureId;\n        let textureNameConstant: number = this.getTextureConstant(textureId);\n        this.webGL.activeTexture(textureNameConstant);\n\n        // BIND THE TEXTURE TO A 2D TYPE\n        this.webGL.bindTexture(this.webGL.TEXTURE_2D, textureToInit.webGLTexture);\n\n        // SPECIFY RENDERING SETTINGS\n        this.webGL.texParameteri(this.webGL.TEXTURE_2D, this.webGL.TEXTURE_MIN_FILTER, this.webGL.LINEAR);\n\n        // SET THE IMAGE FOR THE TEXTURE\n        this.webGL.texImage2D(this.webGL.TEXTURE_2D, 0, this.webGL.RGBA, this.webGL.RGBA, this.webGL.UNSIGNED_BYTE, image);\n\n        // KEEP IT FOR WHEN WE RENDER\n        callback();\n    }\n\n    public setClearColor(r: number, g: number, b: number, a: number): void {\n        this.webGL.clearColor(r, g, b, a);\n    }\n\n    public render(  viewport : Viewport,\n                    tiledLayers: Array<TiledLayer>,\n                    visibleSprites: Array<AnimatedSprite>): void {\n        // CLEAR THE CANVAS\n        this.webGL.clear(this.webGL.COLOR_BUFFER_BIT | this.webGL.DEPTH_BUFFER_BIT);\n\n        // RENDER THE TILED LAYER FIRST\n        this.tiledLayerRenderer.render(this.webGL, viewport, tiledLayers);\n\n        // RENDER THE SPRITES ON ONE CANVAS\n        this.spriteRenderer.render(this.webGL, viewport, visibleSprites);\n\n        // THEN THE TEXT ON ANOTHER OVERLAPPING CANVAS\n        this.textRenderer.render();\n    }\n}","/*\n * This is a wrapper class for a WebGLProgram, i.e. a shader for custom rendering\n * using WebGL's programmable pipeline.\n */\nexport class WebGLGameShader {\n    private program : WebGLProgram;\n    private vertexShader : WebGLShader;\n    private fragmentShader : WebGLShader;\n\n    public constructor() {}\n\n    public getProgram() : WebGLProgram {\n        return this.program;\n    }\n\n    public init(webGL : WebGLRenderingContext, vSource : string, fSource : string) : void {\n        this.vertexShader = <WebGLShader>this.createShader(webGL, webGL.VERTEX_SHADER, vSource);\n        this.fragmentShader = <WebGLShader>this.createShader(webGL, webGL.FRAGMENT_SHADER, fSource);\n        this.program = this.createShaderProgram(webGL, this.vertexShader, this.fragmentShader);\n    }\n\n    public createShader(webGL : WebGLRenderingContext, type : number, source : string) : WebGLShader {\n        // MAKE A NEW SHADER OBJECT, LOAD IT'S SOURCE, AND COMPILE IT\n        var shader = webGL.createShader(type);\n        webGL.shaderSource(shader, source);\n        webGL.compileShader(shader);\n\n        // DID IT COMPILE?\n        var success = webGL.getShaderParameter(shader, webGL.COMPILE_STATUS);\n        if (success) {\n            return shader;\n        }\n\n        // DISASTER\n        console.log(webGL.getShaderInfoLog(shader));\n        webGL.deleteShader(shader);\n        return null;\n    }\n\n    public createShaderProgram(webGL : WebGLRenderingContext, vShader : WebGLShader, fShader : WebGLShader) : WebGLProgram {\n        // MAKE THE GLSL SHADER PROGRAM\n        let programToCreate = webGL.createProgram();\n\n        // LINK THE VERT AND FRAG\n        webGL.attachShader(programToCreate, vShader);\n        webGL.attachShader(programToCreate, fShader);\n\n        // NOW WE CAN LINK THE SHADER PROGRAM\n        webGL.linkProgram(programToCreate);\n        let linked : boolean = webGL.getProgramParameter(programToCreate, webGL.LINK_STATUS);\n\n        // IS IT LINKED?\n        if (!linked) {\n            // DISASTER\n            let errorFeedback : string = webGL.getProgramInfoLog(programToCreate);\n            console.log(errorFeedback);\n\n            // DISASTER\n            console.log(webGL.getProgramInfoLog(programToCreate));\n            webGL.deleteProgram(programToCreate);\n        }\n        return programToCreate;\n    }\n}","import {WebGLGameRenderingComponent} from './WebGLGameRenderingComponent'\nimport {MathUtilities} from '../math/MathUtilities'\nimport {AnimatedSprite} from '../scene/sprite/AnimatedSprite'\nimport {AnimatedSpriteType} from '../scene/sprite/AnimatedSpriteType'\nimport {WebGLGameTexture} from './WebGLGameTexture'\nimport {Viewport} from '../scene/Viewport'\n\nexport class WebGLGameSpriteRenderer extends WebGLGameRenderingComponent {\n    protected vertexData : Float32Array;\n\n    public constructor() {\n        super();\n        this.vertexData = new Float32Array([\n            -0.5,  0.5, 0.0, 0.0,\n            -0.5, -0.5, 0.0, 1.0,\n             0.5,  0.5, 1.0, 0.0,\n             0.5, -0.5, 1.0, 1.0\n        ]);\n    }\n\n    public getVertexData() : Float32Array {\n        return this.vertexData;\n    }\n    public getShaderAttributeNames() : string[] {\n        return [this.A_POSITION, this.A_TEX_COORD];\n    }\n    public getShaderUniformNames() : string[] {\n        return [this.U_MESH_TRANSFORM, this.U_SAMPLER, this.U_TEX_COORD_FACTOR, this.U_TEX_COORD_SHIFT];\n    }\n\n    public render(  webGL : WebGLRenderingContext,\n                    viewport : Viewport,\n                    visibleSprites : Array<AnimatedSprite>) : void {\n        // SELECT THE ANIMATED SPRITE RENDERING SHADER PROGRAM FOR USE\n        let shaderProgramToUse = this.shader.getProgram();\n        webGL.useProgram(shaderProgramToUse);\n\n       // AND THEN RENDER EACH ONE\n       for (let sprite of visibleSprites) {\n            this.renderAnimatedSprite(webGL, viewport, sprite);        \n        }\n    }\n\n    private renderAnimatedSprite(   webGL : WebGLRenderingContext,\n                                    viewport : Viewport, \n                                    sprite : AnimatedSprite) : void {\n        // YOU'LL NEED TO UPDATE THIS METHOD TO MAKE SURE SPRITES SCROLL AND ROTATE\n        \n        let canvasWidth : number = webGL.canvas.width;\n        let canvasHeight : number = webGL.canvas.height;\n        let spriteType : AnimatedSpriteType = sprite.getSpriteType();\n        let texture : WebGLGameTexture = spriteType.getSpriteSheetTexture();\n\n        // CALCULATE HOW MUCH TO TRANSLATE THE QUAD PER THE SPRITE POSITION\n        let spriteWidth : number = spriteType.getSpriteWidth();\n        let spriteHeight : number = spriteType.getSpriteHeight();\n        let spriteXInPixels : number = sprite.getPosition().getX() + (spriteWidth/2) - viewport.getX();\n        let spriteYInPixels : number = sprite.getPosition().getY() + (spriteHeight/2) - viewport.getY();\n        let spriteXTranslate : number = (spriteXInPixels - (canvasWidth/2))/(canvasWidth/2);\n        let spriteYTranslate : number = (spriteYInPixels - (canvasHeight/2))/(canvasHeight/2);\n        this.meshTranslate.setX(spriteXTranslate);\n        this.meshTranslate.setY(-spriteYTranslate);\n\n        // CALCULATE HOW MUCH TO SCALE THE QUAD PER THE SPRITE SIZE\n        let defaultWidth : number = canvasWidth;\n        let defaultHeight : number = canvasHeight;\n        let scaleX : number = 2*spriteWidth/defaultWidth;\n        let scaleY : number = 2*spriteHeight/defaultHeight;\n        this.meshScale.set(scaleX, scaleY, 0.0, 0.0);//1.0, 1.0);\n        //this.meshRotate.set(0, 0, (3.14/4), 0);\n\n        // @todo - COMBINE THIS WITH THE ROTATE AND SCALE VALUES FROM THE SPRITE\n        MathUtilities.identity(this.meshTransform);\n        MathUtilities.model(this.meshTransform, this.meshTranslate, this.meshRotate, this.meshScale);\n        \n        // FIGURE OUT THE TEXTURE COORDINATE FACTOR AND SHIFT\n        let texCoordFactorX : number = spriteWidth/texture.width;\n        let texCoordFactorY : number = spriteHeight/texture.height;\n        let spriteLeft : number = sprite.getLeft();\n        let spriteTop : number = sprite.getTop();\n        let texCoordShiftX : number = spriteLeft/texture.width;\n        let texCoordShiftY : number = spriteTop/texture.height;\n\n        // USE THE ATTRIBUTES\n        webGL.bindBuffer(webGL.ARRAY_BUFFER, this.vertexDataBuffer);\n        webGL.bindTexture(webGL.TEXTURE_2D, texture.webGLTexture);\n\n        // HOOK UP THE ATTRIBUTES\n        let a_PositionLocation : GLuint = this.webGLAttributeLocations.get(this.A_POSITION);\n        webGL.vertexAttribPointer(a_PositionLocation, this.FLOATS_PER_TEXTURE_COORDINATE, webGL.FLOAT, false, this.TOTAL_BYTES, this.VERTEX_POSITION_OFFSET);\n        webGL.enableVertexAttribArray(a_PositionLocation);\n        let a_TexCoordLocation : GLuint = this.webGLAttributeLocations.get(this.A_TEX_COORD);\n        webGL.vertexAttribPointer(a_TexCoordLocation, this.FLOATS_PER_TEXTURE_COORDINATE, webGL.FLOAT, false, this.TOTAL_BYTES, this.TEXTURE_COORDINATE_OFFSET);\n        webGL.enableVertexAttribArray(a_TexCoordLocation);\n\n        // USE THE UNIFORMS\n        let u_MeshTransformLocation : WebGLUniformLocation = this.webGLUniformLocations.get(this.U_MESH_TRANSFORM);\n        webGL.uniformMatrix4fv(u_MeshTransformLocation, false, this.meshTransform.getData());\n        let u_SamplerLocation : WebGLUniformLocation = this.webGLUniformLocations.get(this.U_SAMPLER);\n        webGL.uniform1i(u_SamplerLocation, texture.webGLTextureId);\n        let u_TexCoordFactorLocation : WebGLUniformLocation = this.webGLUniformLocations.get(this.U_TEX_COORD_FACTOR);\n        webGL.uniform2f(u_TexCoordFactorLocation, texCoordFactorX, texCoordFactorY);\n        let u_TexCoordShiftLocation : WebGLUniformLocation = this.webGLUniformLocations.get(this.U_TEX_COORD_SHIFT);\n        webGL.uniform2f(u_TexCoordShiftLocation, texCoordShiftX, texCoordShiftY);\n\n        // DRAW THE SPRITE AS A TRIANGLE STRIP USING 4 VERTICES, STARTING AT THE START OF THE ARRAY (index 0)\n        webGL.drawArrays(webGL.TRIANGLE_STRIP, this.INDEX_OF_FIRST_VERTEX, this.NUM_VERTICES);\n    }\n}","export class WebGLGameTexture {\n    public webGLTextureId: number;\n    public webGLTexture: WebGLTexture;\n    public image: HTMLImageElement;\n    public width : number;\n    public height : number;\n}","import { MathUtilities } from \"../math/MathUtilities\"\nimport { TiledLayer } from \"../scene/tiles/TiledLayer\"\nimport { TileSet } from \"../scene/tiles/TileSet\"\nimport { WebGLGameRenderingComponent } from './WebGLGameRenderingComponent'\nimport { WebGLGameTexture } from './WebGLGameTexture'\nimport { Viewport } from '../scene/Viewport'\n\nexport class WebGLGameTiledLayerRenderer extends WebGLGameRenderingComponent {\n    public constructor() {\n        super();\n    }\n\n    /**\n     * This function generates the array of attribute data needed to \n     * render our TiledLayer and puts it in the tiled layer argument.\n     */\n    public generateVertexData(tiledLayer: TiledLayer): Float32Array {\n        let someNumberYouHaveToDetermine : number = 4;\n        let dataToFill = [someNumberYouHaveToDetermine];\n        let vertexData: Float32Array = new Float32Array(dataToFill);\n        return vertexData;\n    }\n\n    public getVertexData(renderSetupData: object): Float32Array {\n        // WE WILL NEED THIS TO KNOW HOW LARGE TO MAKE OUR VERTEX DATA BUFFER\n        let tiledLayers: Array<TiledLayer> = <Array<TiledLayer>>renderSetupData;\n        let tiledLayer: TiledLayer = tiledLayers[0];\n        return this.generateVertexData(tiledLayer);\n    }\n\n    public getShaderAttributeNames(): string[] {\n        // YOU'LL NEED TO DEFINE THIS METHOD\n        return [];\n    }\n\n    public getShaderUniformNames(): string[] {\n        // YOU'LL NEED TO DEFINE THIS METHOD\n        return [];\n    }\n\n    public render(  webGL: WebGLRenderingContext,\n                    viewport : Viewport,\n                    tiledLayers: Array<TiledLayer>): void {\n\n            // SELECT THE ANIMATED SPRITE RENDERING SHADER PROGRAM FOR USE\n        let shaderProgramToUse = this.shader.getProgram();\n        webGL.useProgram(shaderProgramToUse);\n\n        // AND THEN RENDER EACH LAYER\n        for (let tiledLayer of tiledLayers) {\n            this.renderTiledLayer(webGL, viewport, tiledLayer);\n        }\n    }\n\n    private renderTiledLayer(\n        webGL: WebGLRenderingContext,\n        viewport : Viewport,\n        tiledLayer: TiledLayer) {\n            // YOU'LL NEED TO DEFINE THIS METHOD\n    }\n}","import {SceneObject} from './SceneObject'\nimport {AnimatedSprite} from './sprite/AnimatedSprite'\nimport {TiledLayer} from './tiles/TiledLayer'\nimport {TileSet} from './tiles/TileSet'\nimport {Viewport} from './Viewport';\n\nexport class SceneGraph {\n    // AND ALL OF THE ANIMATED SPRITES, WHICH ARE NOT STORED\n    // SORTED OR IN ANY PARTICULAR ORDER. NOTE THAT ANIMATED SPRITES\n    // ARE SCENE OBJECTS\n    private animatedSprites : Array<AnimatedSprite>;\n\n    // SET OF VISIBLE OBJECTS, NOTE THAT AT THE MOMENT OUR\n    // SCENE GRAPH IS QUITE SIMPLE, SO THIS IS THE SAME AS\n    // OUR LIST OF ANIMATED SPRITES\n    private visibleSet : Array<SceneObject>;\n    private mainCharacter : AnimatedSprite;\n\n    // WE ARE ALSO USING A TILING ENGINE FOR RENDERING OUR LEVEL\n    // NOTE THAT WE MANAGE THIS HERE BECAUSE WE MAY INVOLVE THE TILED\n    // LAYERS IN PHYSICS AND PATHFINDING AS WELL\n    private tiledLayers : Array<TiledLayer>;\n    private tileSets : Array<TileSet>;\n\n    // THE VIEWPORT IS USED TO FILTER OUT WHAT IS NOT VISIBLE\n    private viewport : Viewport;\n\n    //THESE VARIABLES WILL BE USED TO MOVE THE VIEWPORT\n    static moveUp : boolean;\n    static moveDown : boolean;\n    static moveLeft : boolean;\n    static moveRight : boolean;\n    private upPos : number;\n    private downPos : number;\n    private leftPos : number;\n    private rightPos : number;\n\n    public constructor() {\n        // DEFAULT CONSTRUCTOR INITIALIZES OUR DATA STRUCTURES\n        this.clear();\n    }\n\n    public clear() : void {\n        this.animatedSprites = [];\n        this.visibleSet = [];\n        this.tiledLayers = [];\n        this.tileSets = [];\n        this.upPos = 0;\n        this.downPos = 0;\n        this.leftPos = 0;\n        this.rightPos = 0;\n        //this.mainCharacter = null;\n    }\n\n    public addTileSet(tileSetToAdd : TileSet) : number {\n        return this.tileSets.push(tileSetToAdd) - 1;\n    }\n\n    public getNumTileSets() : number {\n        return this.tileSets.length;\n    }\n\n    public getTileSet(index : number) : TileSet {\n        return this.tileSets[index];\n    }\n\n    public addLayer(layerToAdd : TiledLayer) : void {\n        this.tiledLayers.push(layerToAdd);\n    }\n\n    public getNumTiledLayers() : number {\n        return this.tiledLayers.length;\n    }\n\n    public getTiledLayers() : Array<TiledLayer> {\n        return this.tiledLayers;\n    }\n\n    public getTiledLayer(layerIndex : number) : TiledLayer {\n        return this.tiledLayers[layerIndex];\n    }\n\n    public getNumSprites() : number {\n        return this.animatedSprites.length;\n    }\n\n    public setViewport(initViewport : Viewport) : void {\n        this.viewport = initViewport;\n    }\n\n    public getViewport() : Viewport { \n        return this.viewport;\n    }\n\n    public addAnimatedSprite(sprite : AnimatedSprite) : void {\n        this.animatedSprites.push(sprite);\n    }\n\n    public getAnimatedSprites() : Array<AnimatedSprite> {\n        return this.animatedSprites;\n    }\n\n    public setMainCharacter(sprite : AnimatedSprite) : void {\n        this.mainCharacter = sprite;\n    }\n\n    public getMainCharacter() : AnimatedSprite {\n        return this.mainCharacter;\n    }\n\n    public getSpriteAt(testX : number, testY : number) : AnimatedSprite {\n        for (let sprite of this.animatedSprites) {\n            if (sprite.contains(testX, testY))\n                return sprite;\n        }\n        return null;\n    }\n\n    public static setMoveUp(b : boolean){\n        this.moveUp = b;\n    }\n\n    public static setMoveDown(b : boolean){\n        this.moveDown = b;\n    }\n\n    public static setMoveLeft(b : boolean){\n        this.moveLeft = b;\n    }\n\n    public static setMoveRight(b : boolean){\n        this.moveRight = b;\n    }\n\n    /**\n     * update\n     * \n     * Called once per frame, this function updates the state of all the objects\n     * in the scene.\n     * \n     * @param delta The time that has passed since the last time this update\n     * funcation was called.\n     */\n    public update(delta : number) : void {\n        for (let sprite of this.animatedSprites) {\n            sprite.update(delta);\n        }\n        if(SceneGraph.moveUp){\n            this.upPos += 1;\n        }\n        if(SceneGraph.moveDown){\n            this.downPos += 1;\n        }\n        if(SceneGraph.moveLeft){\n            this.leftPos += 1;\n        }\n        if(SceneGraph.moveRight){\n            this.rightPos += 1;\n        }\n        this.viewport.setPosition((this.leftPos - this.rightPos), (this.downPos - this.upPos));\n    }\n\n    public scope() : Array<SceneObject> {\n        // CLEAR OUT THE OLD\n        this.visibleSet = [];\n\n        // PUT ALL THE SCENE OBJECTS INTO THE VISIBLE SET\n        for (let sprite of this.animatedSprites) {\n            let spriteType = sprite.getSpriteType();\n            let spriteWidth : number = spriteType.getSpriteWidth();\n            let spriteHeight : number = spriteType.getSpriteHeight();\n            let spriteXInPixels : number = sprite.getPosition().getX() + (spriteWidth) - this.viewport.getX();\n            let spriteYInPixels : number = sprite.getPosition().getY() + (spriteHeight) - this.viewport.getY();\n            if(spriteXInPixels > 0 && spriteXInPixels < (this.viewport.getWidth() + spriteWidth)\n             && (spriteYInPixels > 0 && spriteYInPixels < (this.viewport.getHeight() + spriteHeight))){\n                this.visibleSet.push(sprite);\n            }\n        }\n\n        return this.visibleSet;\n    }\n}","import {Vector3} from '../math/Vector3'\n\n/**\n * SceneObject\n * \n * A SceneObject is something that can be placed into the scene graph. It has\n * a position, rotation, and scale in the game world. Note that its position\n * is typically its centered location, so if we're talking about a 2d box, \n * it would be the center of that box.\n */\nexport abstract class SceneObject {\n    private position : Vector3;\n    private rotation : Vector3;\n    private scale : Vector3;\n\n    public constructor() {\n        this.position = new Vector3();\n        this.rotation = new Vector3();\n        this.scale = new Vector3();\n\n        // CLEAR ALL VALUES\n        this.position.set(0.0, 0.0, 0.0, 1.0);\n        this.rotation.set(0.0, 0.0, 0.0, 1.0);\n        this.scale.set(1.0, 1.0, 1.0, 1.0);\n    }\n\n    public getPosition() : Vector3 {\n        return this.position;\n    }    \n\n    public getRotation() : Vector3 {\n        return this.rotation;\n    }\n\n    public getScale() : Vector3 {\n        return this.scale;\n    }\n\n    public abstract contains(testX : number, testY : number) : boolean;\n}","export class Viewport {\n    private width : number;\n    private height : number;\n    private x : number;\n    private y : number;\n\n    public constructor(initWidth : number, initHeight : number) {\n        this.width = initWidth;\n        this.height = initHeight;\n        this.x = 0;\n        this.y = 0;\n    }\n\n    public getWidth() : number {\n        return this.width;\n    }\n\n    public getHeight() : number {\n        return this.height;\n    }\n\n    public getX() : number {\n        return this.x;\n    }\n\n    public getY() : number {\n        return this.y;\n    }\n\n    public inc(incX : number, incY : number) : void {\n        this.x += incX;\n        this.y += incY;\n    }\n\n    public setPosition(initX : number, initY : number) : void {\n        this.x = initX;\n        this.y = initY;\n    }\n}","import {SceneObject} from '../SceneObject'\nimport {AnimatedSpriteType} from './AnimatedSpriteType'\nimport { SpriteBehavior } from '../../ai/SpriteBehavior';\n\nexport class AnimatedSprite extends SceneObject {\n    private spriteType : AnimatedSpriteType;\n    private state : string;\n    private type_name : string;\n    private animationFrameIndex : number;\n    private frameCounter : number;\n    private deadFrame: number;\n    private behavior : SpriteBehavior;\n    \n    public constructor(initSpriteType : AnimatedSpriteType, initState : string, initTypeName : string, initBehavior : SpriteBehavior) {\n        super();\n        this.spriteType = initSpriteType;\n        this.type_name = initTypeName;\n        this.behavior = initBehavior;\n        this.behavior.setSprite(this);\n        \n        // START RESET\n        this.state = initState;\n        this.animationFrameIndex = 0;\n        this.frameCounter = 0;\n    }\n\n    public getAnimationFrameIndex() : number {\n        return this.animationFrameIndex;\n    }\n\n    public getFrameCounter() : number {\n        return this.frameCounter;\n    }\n\n    public getSpriteType() : AnimatedSpriteType {\n        return this.spriteType;\n    }\n\n    public getState() : string {\n        return this.state;\n    }\n\n    public getTypeName() : string {\n        return this.type_name;\n    }\n    \n    public setState(initState : string) : void {\n        this.state = initState;\n        this.animationFrameIndex = 0;\n        this.frameCounter = 0;\n    }\n    \n    public update(delta : number) : void {\n        this.frameCounter++;\n        \n        // HAVE WE GONE PAST THE LAST FRAME IN THE ANIMATION?\n        var currentAnimation = this.spriteType.getAnimation(this.state);\n        var currentFrame = currentAnimation[this.animationFrameIndex];\n        if (this.frameCounter > (currentFrame.duration)) {\n            this.animationFrameIndex++;\n            if (this.animationFrameIndex >= currentAnimation.length) {\n                if(this.state == \"DYING\"){\n                    this.state = \"DEAD\";\n                }\n                this.animationFrameIndex = 0;\n            }\n            this.frameCounter = 0;\n        }\n        this.behavior.update();\n    }\n\n    public contains(pointX : number, pointY : number) : boolean {\n        let spriteWidth = this.getSpriteType().getSpriteWidth();\n        let spriteHeight = this.getSpriteType().getSpriteHeight();\n        let spriteLeft = this.getPosition().getX();\n        let spriteRight = this.getPosition().getX() + spriteWidth;\n        let spriteTop = this.getPosition().getY();\n        let spriteBottom = this.getPosition().getY() + spriteHeight;\n        if (    (pointX < spriteLeft)\n            ||  (spriteRight < pointX)\n            ||  (pointY < spriteTop)\n            ||  (spriteBottom < pointY)) {\n                return false;\n        }\n        else {\n            return true;\n        }\n    }\n    \n    /**RENAME THIS METHOD SO IT DENOTES PIXEL LOCATION IN TEXTURE */\n    public getLeft() : number {\n        return this.spriteType.getLeft(this.state, this.animationFrameIndex);\n    }\n    \n    public getTop() : number {\n        return this.spriteType.getTop(this.state, this.animationFrameIndex);\n    }\n\n    public toString() : string {\n        let summary : string =  \"{ position: (\"\n                            +   this.getPosition().getX() + \", \" + this.getPosition().getY() + \") \"\n                            +   \"(state: \" + this.getState() + \") \"\n                            +   \"(animationFrameIndex: \" + this.getAnimationFrameIndex() + \") \"\n                            +   \"(frameCounter: \" + this.getFrameCounter() + \") \";\n        return summary;\n    }\n}","import {WebGLGameTexture} from '../../rendering/WebGLGameTexture'\n\nexport class AnimationFrame {\n    public left : number;\n    public top : number;\n    public duration : number;\n\n    constructor(initLeft : number, initTop : number, initDuration : number) {\n        this.left = initLeft;\n        this.top = initTop;\n        this.duration = initDuration;\n    }\n}\n\nexport class AnimatedSpriteType {\n    private spriteSheetTexture : WebGLGameTexture;\n    private animations : Map<string, Array<AnimationFrame>>;\n    private spriteWidth : number;\n    private spriteHeight : number;\n\n    public constructor(initSpriteSheetTexture : WebGLGameTexture, \n                initSpriteWidth : number, initSpriteHeight : number) {\n        this.spriteSheetTexture = initSpriteSheetTexture;\n        this.animations = new Map();\n        this.spriteWidth = initSpriteWidth;\n        this.spriteHeight = initSpriteHeight;\n    }\n\n    public addAnimation(state : string) : void {\n        this.animations.set(state, new Array<AnimationFrame>());\n    }\n\n    public addAnimationFrame(state : string, index : number, frameDuration : number) : void {\n        var columns = this.spriteSheetTexture.width/this.spriteWidth;\n        var rows = this.spriteSheetTexture.height/this.spriteHeight;\n        var col = index % columns;\n        var row = Math.floor(index /  columns);\n        var left = col * this.spriteWidth;\n        var top = row * this.spriteHeight;\n        this.animations.get(state).push(new AnimationFrame(left, top, frameDuration));\n    }\n\n    public getSpriteWidth() : number {\n        return this.spriteWidth;\n    }\n\n    public getSpriteHeight() : number {\n        return this.spriteHeight;\n    }\n\n    public getSpriteSheetTexture() : WebGLGameTexture {\n        return this.spriteSheetTexture;\n    }\n\n    public getAnimation(state : string) : Array<AnimationFrame> {\n        return this.animations.get(state);\n    }\n\n    public getLeft(state : string, frameIndex : number) : number {\n        let animationFrame : AnimationFrame = this.animations.get(state)[frameIndex];\n        return animationFrame.left;\n    }\n\n    public getTop(state : string, frameIndex : number) : number {\n        let animationFrame : AnimationFrame = this.animations.get(state)[frameIndex];\n        return animationFrame.top;\n    }\n}","import { WebGLGameTexture } from \"../../rendering/WebGLGameTexture\";\n\nexport class TileSet {\n    private name : string;\n    private columns : number;\n    private rows : number;\n    private tileWidth : number;\n    private tileHeight : number;\n    private tileSpacing : number;\n    private tileSheetWidth : number;\n    private tileSheetHeight : number;\n    private firstIndex : number;\n    private texture : WebGLGameTexture;\n\n    constructor(initName : string, \n                initColumns : number,\n                initRows : number,\n                initTileWidth : number,\n                initTileHeight : number,\n                initTileSpacing : number,\n                initTileSheetWidth : number,\n                initTileSheetHeight : number,\n                initFirstIndex : number,\n                initTexture : WebGLGameTexture) {\n        this.name = initName;\n        this.columns = initColumns;\n        this.rows = initRows;\n        this.tileWidth = initTileWidth;\n        this.tileHeight = initTileHeight;\n        this.tileSpacing = initTileSpacing;\n        this.tileSheetWidth = initTileSheetWidth;\n        this.tileSheetHeight = initTileSheetHeight;\n        this.firstIndex = initFirstIndex;\n        this.texture = initTexture;\n    }\n\n    public getName() : string {\n        return this.name;\n    }\n\n    public getColumns() : number {\n        return this.columns;\n    }\n\n    public getRows() : number { \n        return this.rows;\n    }\n\n    public getTileWidth() : number {\n        return this.tileWidth;\n    }\n\n    public getTileHeight() : number {\n        return this.tileHeight;\n    }\n\n    public getTileSpacing() : number {\n        return this.tileSpacing;\n    }\n\n    public getTileSheetWidth() : number {\n        return this.tileSheetWidth;\n    }\n\n    public getTileSheetHeight() : number {\n        return this.tileSheetHeight;\n    }\n\n    public getFirstIndex() : number {\n        return this.firstIndex;\n    }\n\n    public getTexture() : WebGLGameTexture {\n        return this.texture;\n    }\n}","import { TileSet } from \"./TileSet\";\n\nexport class TiledLayer {\n    private collidable : boolean;\n    private tiles : Array<number>;\n    private columns : number;\n    private rows : number;\n    private tileSet : TileSet;\n    \n    // WE WILL STORE RENDERING-SPECIFIC DATA HERE\n    private renderData : object;\n\n    constructor(initColumns : number,\n                initRows : number,\n                initTileSet : TileSet) {\n        this.tiles = new Array();\n        this.columns = initColumns;\n        this.rows = initRows;\n        this.tileSet = initTileSet;\n    }\n\n    public setRenderData(initRenderData : object) : void {\n        this.renderData = initRenderData;\n    }\n\n    public getRenderData() : object {\n        return this.renderData;\n    }\n\n    public getMinimumVisibleColumn(viewportLeft : number) : number {\n        return (viewportLeft / this.tileSet.getTileWidth());\n    }\n\n    public getMaximumVisibleColumn(viewportRight : number) : number {\n        return (viewportRight / this.tileSet.getTileWidth());\n    }\n\n    public getMinimumVisibleRow(viewportTop : number) : number {\n        return (viewportTop / this.tileSet.getTileHeight());\n    }\n\n    public getMaximumVisibleRow(viewportBottom : number) : number {\n        return (viewportBottom / this.tileSet.getTileHeight());\n    }\n\n    public getNumCells() : number {\n        return this.columns * this.rows;\n    }\n\n    public getColumns() : number {\n        return this.columns;\n    }\n\n    public getRows() : number {\n        return this.rows;\n    }\n\n    public getTileSet() : TileSet {\n        return this.tileSet;\n    }\n\n    public isCollidable() : boolean {\n        return this.collidable;\n    }\n\n    public addTile(tileSetCellIndex : number) : void {\n        this.tiles.push(tileSetCellIndex);\n    }\n\n    public setTile(column : number, row : number, tileSetCellIndex : number) {\n        let tileIndex : number = this.getTileIndex(column, row);\n        this.tiles[tileIndex] = tileSetCellIndex;\n    }\n\n    public getTileIndex(column : number, row : number) : number {\n        return (row * this.columns) + column;\n    }\n\n    public getTileSetCellIndex(column : number, row : number) : number {\n        let tileIndex : number = this.getTileIndex(column, row);\n        return this.tiles[tileIndex];\n    }\n\n    public getTile(column : number, row : number) : number {\n        let index = this.getTileIndex(column, row);\n        return this.tiles[index];\n    }\n}","/*\n * This provides responses to UI input.\n */\nimport {AnimatedSprite} from \"../scene/sprite/AnimatedSprite\"\nimport {SceneGraph} from \"../scene/SceneGraph\"\n\nexport class UIController {\n    private spriteToDrag : AnimatedSprite;\n    private scene : SceneGraph;\n    private dragOffsetX : number;\n    private dragOffsetY : number;\n\n    public constructor(canvasId : string, initScene : SceneGraph) {\n        this.spriteToDrag = null;\n        this.scene = initScene;\n        this.dragOffsetX = -1;\n        this.dragOffsetY = -1;\n\n        let canvas : HTMLCanvasElement = <HTMLCanvasElement>document.getElementById(canvasId);\n        canvas.addEventListener(\"mousedown\", this.mouseDownHandler);\n        canvas.addEventListener(\"mousemove\", this.mouseMoveHandler);\n        canvas.addEventListener(\"mouseup\", this.mouseUpHandler);\n        window.addEventListener(\"keydown\", this.keyDownHandler);\n        window.addEventListener(\"keyup\", this.keyUpHandler);\n    }\n\n    public keyDownHandler = (event : KeyboardEvent) : void => {\n        if(event.key == \"w\"){\n            SceneGraph.setMoveUp(true);\n        }\n        if(event.key == \"s\"){\n            SceneGraph.setMoveDown(true);\n        }\n        if(event.key == \"a\"){\n            SceneGraph.setMoveRight(true);\n        }\n        if(event.key == \"d\"){\n            SceneGraph.setMoveLeft(true);\n        }\n    }\n\n    public keyUpHandler = (event : KeyboardEvent) : void => {\n        if(event.key == \"w\"){\n            SceneGraph.setMoveUp(false);\n        }\n        if(event.key == \"s\"){\n            SceneGraph.setMoveDown(false);\n        }\n        if(event.key == \"a\"){\n            SceneGraph.setMoveRight(false);\n        }\n        if(event.key == \"d\"){\n            SceneGraph.setMoveLeft(false);\n        }\n    }\n\n    public mouseDownHandler = (event : MouseEvent) : void => {\n        let mousePressX : number = event.clientX;\n        let mousePressY : number = event.clientY;\n        let sprite : AnimatedSprite = this.scene.getSpriteAt(mousePressX, mousePressY);\n        console.log(\"mousePressX: \" + mousePressX);\n        console.log(\"mousePressY: \" + mousePressY);\n        console.log(\"sprite: \" + sprite);\n        if (sprite != null) {\n            // START DRAGGING IT\n            this.spriteToDrag = sprite;\n            this.dragOffsetX = sprite.getPosition().getX() - mousePressX;\n            this.dragOffsetY = sprite.getPosition().getY() - mousePressY;\n        }\n    }\n    \n    public mouseMoveHandler = (event : MouseEvent) : void => {\n        if (this.spriteToDrag != null) {\n            this.spriteToDrag.getPosition().set(event.clientX + this.dragOffsetX, \n                                                event.clientY + this.dragOffsetY, \n                                                this.spriteToDrag.getPosition().getZ(), \n                                                this.spriteToDrag.getPosition().getW());\n        }\n        var main_character : AnimatedSprite;\n        main_character = this.scene.getMainCharacter();\n        if(main_character != null) {\n             main_character.getPosition().set(event.clientX - main_character.getSpriteType().getSpriteWidth()/2 + this.scene.getViewport().getX(), \n                                              event.clientY - main_character.getSpriteType().getSpriteHeight()/2 + this.scene.getViewport().getY(), \n                                              main_character.getPosition().getZ(), \n                                              main_character.getPosition().getW());\n        }\n    }\n\n    public mouseUpHandler = (event : MouseEvent) : void => {\n        this.spriteToDrag = null;\n    }\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvdGlsZWRfc2Nyb2xsaW5nX2RlbW8vVGlsZWRTY3JvbGxpbmdEZW1vLnRzIiwic3JjL3dvbGZpZTJkL0dhbWUudHMiLCJzcmMvd29sZmllMmQvYWkvQnVnT25lQmVoYXZpb3IudHMiLCJzcmMvd29sZmllMmQvYWkvQnVnVHdvQmVoYXZpb3IudHMiLCJzcmMvd29sZmllMmQvYWkvTWFpbkNoYXJhY3RlckJlaGF2aW9yLnRzIiwic3JjL3dvbGZpZTJkL2FpL1Nwcml0ZUJlaGF2aW9yLnRzIiwic3JjL3dvbGZpZTJkL2ZpbGVzL1Jlc291cmNlTWFuYWdlci50cyIsInNyYy93b2xmaWUyZC9sb29wL0dhbWVMb29wVGVtcGxhdGUudHMiLCJzcmMvd29sZmllMmQvbWF0aC9NYXRoVXRpbGl0aWVzLnRzIiwic3JjL3dvbGZpZTJkL21hdGgvTWF0cml4LnRzIiwic3JjL3dvbGZpZTJkL21hdGgvVmVjdG9yMy50cyIsInNyYy93b2xmaWUyZC9waHlzaWNzL0dhbWVQaHlzaWNzLnRzIiwic3JjL3dvbGZpZTJkL3JlbmRlcmluZy9UZXh0UmVuZGVyZXIudHMiLCJzcmMvd29sZmllMmQvcmVuZGVyaW5nL1dlYkdMR2FtZVJlbmRlcmluZ0NvbXBvbmVudC50cyIsInNyYy93b2xmaWUyZC9yZW5kZXJpbmcvV2ViR0xHYW1lUmVuZGVyaW5nU3lzdGVtLnRzIiwic3JjL3dvbGZpZTJkL3JlbmRlcmluZy9XZWJHTEdhbWVTaGFkZXIudHMiLCJzcmMvd29sZmllMmQvcmVuZGVyaW5nL1dlYkdMR2FtZVNwcml0ZVJlbmRlcmVyLnRzIiwic3JjL3dvbGZpZTJkL3JlbmRlcmluZy9XZWJHTEdhbWVUZXh0dXJlLnRzIiwic3JjL3dvbGZpZTJkL3JlbmRlcmluZy9XZWJHTEdhbWVUaWxlZExheWVyUmVuZGVyZXIudHMiLCJzcmMvd29sZmllMmQvc2NlbmUvU2NlbmVHcmFwaC50cyIsInNyYy93b2xmaWUyZC9zY2VuZS9TY2VuZU9iamVjdC50cyIsInNyYy93b2xmaWUyZC9zY2VuZS9WaWV3cG9ydC50cyIsInNyYy93b2xmaWUyZC9zY2VuZS9zcHJpdGUvQW5pbWF0ZWRTcHJpdGUudHMiLCJzcmMvd29sZmllMmQvc2NlbmUvc3ByaXRlL0FuaW1hdGVkU3ByaXRlVHlwZS50cyIsInNyYy93b2xmaWUyZC9zY2VuZS90aWxlcy9UaWxlU2V0LnRzIiwic3JjL3dvbGZpZTJkL3NjZW5lL3RpbGVzL1RpbGVkTGF5ZXIudHMiLCJzcmMvd29sZmllMmQvdWkvVUlDb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FDQUE7Ozs7QUFJQSxJQUFBLFNBQUEsUUFBQSxrQkFBQSxDQUFBO0FBQ0EsSUFBQSxtQkFBQSxRQUFBLHlDQUFBLENBQUE7QUFLQSxJQUFBLGlCQUFBLFFBQUEsb0NBQUEsQ0FBQTtBQUNBLElBQUEsbUJBQUEsUUFBQSwrQkFBQSxDQUFBO0FBQ0EsSUFBQSwwQkFBQSxRQUFBLHNDQUFBLENBQUE7QUFDQSxJQUFBLG1CQUFBLFFBQUEsK0JBQUEsQ0FBQTtBQUVBO0FBQ0E7QUFDQSxJQUFJLE9BQU8sSUFBSSxPQUFBLElBQUosQ0FBUyxhQUFULEVBQXdCLGFBQXhCLENBQVg7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQU0sb0JBQW9CLHdDQUExQjtBQUNBLEtBQUssa0JBQUwsR0FBMEIsU0FBMUIsQ0FBb0MsaUJBQXBDLEVBQ29DLEtBQUssYUFBTCxFQURwQyxFQUVvQyxLQUFLLGtCQUFMLEVBRnBDLEVBR29DLFlBQUE7QUFDaEM7QUFDQTtBQUNBLFFBQUksUUFBdUIsS0FBSyxhQUFMLEdBQXFCLGNBQXJCLEVBQTNCO0FBQ0EsUUFBSSxhQUFzQixNQUFNLENBQU4sRUFBUyxVQUFULEtBQXdCLE1BQU0sQ0FBTixFQUFTLFVBQVQsR0FBc0IsWUFBdEIsRUFBbEQ7QUFDQSxRQUFJLGNBQXVCLE1BQU0sQ0FBTixFQUFTLE9BQVQsS0FBcUIsTUFBTSxDQUFOLEVBQVMsVUFBVCxH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QUFBLFFBQUEsR0FBUSxRQUFSO0FBWWhCLGFBQWdCLE9BQWhCLENBQXdCLE1BQXhCLEVBQXlDLEdBQXpDLEVBQXFEO0FBQ2pELFlBQUksTUFBTSxLQUFLLFdBQUwsQ0FBaUIsR0FBakIsQ0FBVjtBQUNBLFlBQUksTUFBTSxJQUFJLEdBQUosQ0FBUSxDQUFSLEVBQVcsQ0FBWCxDQUFWO0FBQXlCLFlBQUksTUFBTSxJQUFJLEdBQUosQ0FBUSxDQUFSLEVBQVcsQ0FBWCxDQUFWO0FBQXlCLFlBQUksTUFBTSxJQUFJLEdBQUosQ0FBUSxDQUFSLEVBQVcsQ0FBWCxDQUFWO0FBQXlCLFlBQUksTUFBTSxJQUFJLEdBQUosQ0FBUSxDQUFSLEVBQVcsQ0FBWCxDQUFWO0FBQzNFLFlBQUksTUFBTSxJQUFJLEdBQUosQ0FBUSxDQUFSLEVBQVcsQ0FBWCxDQUFWO0FBQXlCLFlBQUksTUFBTSxJQUFJLEdBQUosQ0FBUSxDQUFSLEVBQVcsQ0FBWCxDQUFWO0FBQXlCLFlBQUksTUFBTSxJQUFJLEdBQUosQ0FBUSxDQUFSLEVBQVcsQ0FBWCxDQUFWO0FBQXlCLFlBQUksTUFBTSxJQUFJLEdBQUosQ0FBUSxDQUFSLEVBQVcsQ0FBWCxDQUFWO0FBQzNFLFlBQUksTUFBTSxJQUFJLEdBQUosQ0FBUSxDQUFSLEVBQVcsQ0FBWCxDQUFWO0FBQXlCLFlBQUksTUFBTSxJQUFJLEdBQUosQ0FBUSxDQUFSLEVBQVcsQ0FBWCxDQUFWO0FBQXlCLFlBQUksTUFBTSxJQUFJLEdBQUosQ0FBUSxDQUFSLEVBQVcsQ0FBWCxDQUFWO0FBQXlCLFlBQUksTUFBTSxJQUFJLEdBQUosQ0FBUSxDQUFSLEVBQVcsQ0FBWCxDQUFWO0FBQzNFLFlBQUksTUFBTSxJQUFJLEdBQUosQ0FBUSxDQUFSLEVBQVcsQ0FBWCxDQUFWO0FBQXlCLFlBQUksTUFBTSxJQUFJLEdBQUosQ0FBUSxDQUFSLEVBQVcsQ0FBWCxDQUFWO0FBQXlCLFlBQUksTUFBTSxJQUFJLEdBQUosQ0FBUSxDQUFSLEVBQVcsQ0FBWCxDQUFWO0FBQXlCLFlBQUksTUFBTSxJQUFJLEdBQUos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QixFQUhqQztBQUlKO0FBQ0osS0FmTTtBQWlCQSxTQUFBLGNBQUEsR0FBaUIsVUFBQyxLQUFELEVBQThCO0FBQ2xELGNBQUssWUFBTCxHQUFvQixJQUFwQjtBQUNILEtBRk07QUEzRUgsU0FBSyxZQUFMLEdBQW9CLElBQXBCO0FBQ0EsU0FBSyxLQUFMLEdBQWEsU0FBYjtBQUNBLFNBQUssV0FBTCxHQUFtQixDQUFDLENBQXBCO0FBQ0EsU0FBSyxXQUFMLEdBQW1CLENBQUMsQ0FBcEI7QUFFQSxRQUFJLFNBQWdELFNBQVMsY0FBVCxDQUF3QixRQUF4QixDQUFwRDtBQUNBLFdBQU8sZ0JBQVAsQ0FBd0IsV0FBeEIsRUFBcUMsS0FBSyxnQkFBMUM7QUFDQSxXQUFPLGdCQUFQLENBQXdCLFdBQXhCLEVBQXFDLEtBQUssZ0JBQTFDO0FBQ0EsV0FBTyxnQkFBUCxDQUF3QixTQUF4QixFQUFtQyxLQUFLLGNBQXhDO0FBQ0EsV0FBTyxnQkFBUCxDQUF3QixTQUF4QixFQUFtQyxLQUFLLGNBQXhDO0FBQ0EsV0FBTyxnQkFBUCxDQUF3QixPQUF4QixFQUFpQyxLQUFLLFlBQXRDO0FBQ0gsQzs7QUFsQkwsUUFBQSxZQUFBLEdBQUEsWUFBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8qXG4gKiBUaWxlZFNjcm9sbGluZ0RlbW8udHMgLSBkZW1vbnN0cmF0ZXMgaG93IHRpbGVkIGxheWVycyBjYW4gYmUgcmVuZGVyZWRcbiAqIGFuZCBzY3JvbGxlZCB1c2luZyBhIHZpZXdwb3J0LiBcbiAqL1xuaW1wb3J0IHtHYW1lfSBmcm9tICcuLi93b2xmaWUyZC9HYW1lJ1xuaW1wb3J0IHtBbmltYXRlZFNwcml0ZX0gZnJvbSAnLi4vd29sZmllMmQvc2NlbmUvc3ByaXRlL0FuaW1hdGVkU3ByaXRlJ1xuaW1wb3J0IHtBbmltYXRlZFNwcml0ZVR5cGV9IGZyb20gJy4uL3dvbGZpZTJkL3NjZW5lL3Nwcml0ZS9BbmltYXRlZFNwcml0ZVR5cGUnXG5pbXBvcnQge1RpbGVkTGF5ZXJ9IGZyb20gJy4uL3dvbGZpZTJkL3NjZW5lL3RpbGVzL1RpbGVkTGF5ZXInXG5pbXBvcnQge1NjZW5lR3JhcGh9IGZyb20gJy4uL3dvbGZpZTJkL3NjZW5lL1NjZW5lR3JhcGgnXG5pbXBvcnQge1ZpZXdwb3J0fSBmcm9tICcuLi93b2xmaWUyZC9zY2VuZS9WaWV3cG9ydCdcbmltcG9ydCB7VGV4dFRvUmVuZGVyLCBUZXh0UmVuZGVyZXJ9IGZyb20gJy4uL3dvbGZpZTJkL3JlbmRlcmluZy9UZXh0UmVuZGVyZXInXG5pbXBvcnQgeyBCdWdPbmVCZWhhdmlvciB9IGZyb20gJy4uL3dvbGZpZTJkL2FpL0J1Z09uZUJlaGF2aW9yJ1xuaW1wb3J0IHsgTWFpbkNoYXJhY3RlckJlaGF2aW9yIH0gZnJvbSAnLi4vd29sZmllMmQvYWkvTWFpbkNoYXJhY3RlckJlaGF2aW9yJ1xuaW1wb3J0IHsgQnVnVHdvQmVoYXZpb3IgfSBmcm9tICcuLi93b2xmaWUyZC9haS9CdWdUd29CZWhhdmlvcidcblxuLy8gVEhJUyBJUyBUSEUgRU5UUlkgUE9JTlQgSU5UTyBPVVIgQVBQTElDQVRJT04sIFdFIE1BS0Vcbi8vIFRIRSBHYW1lIE9CSkVDVCBBTkQgSU5JVElBTElaRSBJVCBXSVRIIFRIRSBDQU5WQVNFU1xubGV0IGdhbWUgPSBuZXcgR2FtZShcImdhbWVfY2FudmFzXCIsIFwidGV4dF9jYW52YXNcIik7XG5cbi8vIFdFIFRIRU4gTE9BRCBPVVIgR0FNRSBTQ0VORSwgV0hJQ0ggV0lMTCBGSVJTVCBMT0FEXG4vLyBBTEwgR0FNRSBSRVNPVVJDRVMsIFRIRU4gQ1JFQVRFIEFMTCBTSEFERVJTIEZPUlxuLy8gUkVOREVSSU5HLCBBTkQgVEhFTiBQTEFDRSBBTEwgR0FNRSBPQkpFQ1RTIElOIFRIRSBTQ0VORS5cbi8vIE9OQ0UgSVQgSVMgQ09NUExFVEVEIFdFIENBTiBTVEFSVCBUSEUgR0FNRVxuY29uc3QgREVTRVJUX1NDRU5FX1BBVEggPSBcInJlc291cmNlcy9zY2VuZXMvU2Nyb2xsYWJsZURlc2VydC5qc29uXCI7XG5nYW1lLmdldFJlc291cmNlTWFuYWdlcigpLmxvYWRTY2VuZShERVNFUlRfU0NFTkVfUEFUSCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLmdldFNjZW5lR3JhcGgoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuZ2V0UmVuZGVyaW5nU3lzdGVtKCksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgLy8gQUREIEFOWSBDVVNUT00gU1RVRkYgV0UgTkVFRCBIRVJFLCBMSUtFIFRFWFQgUkVOREVSSU5HXG4gICAgLy8gTEVUJ1MgQUREIEEgQlVOQ0ggT0YgUkFORE9NIFNQUklURVNcbiAgICBsZXQgd29ybGQgOiBUaWxlZExheWVyW10gPSBnYW1lLmdldFNjZW5lR3JhcGgoKS5nZXRUaWxlZExheWVycygpO1xuICAgIGxldCB3b3JsZFdpZHRoIDogbnVtYmVyID0gd29ybGRbMF0uZ2V0Q29sdW1ucygpICogd29ybGRbMF0uZ2V0VGlsZVNldCgpLmdldFRpbGVXaWR0aCgpO1xuICAgIGxldCB3b3JsZEhlaWdodCA6IG51bWJlciA9IHdvcmxkWzBdLmdldFJvd3MoKSAqIHdvcmxkWzBdLmdldFRpbGVTZXQoKS5nZXRUaWxlSGVpZ2h0KCk7XG5cbiAgICAvL2FkZCB0aGUgbWFpbiBjaGFyYWN0ZXJcbiAgICBsZXQgbWNfdHlwZSA6IEFuaW1hdGVkU3ByaXRlVHlwZSA9IGdhbWUuZ2V0UmVzb3VyY2VNYW5hZ2VyKCkuZ2V0QW5pbWF0ZWRTcHJpdGVUeXBlKFwiTUFJTl9CVUdcIik7XG4gICAgbGV0IG1haW5fYnVnIDogQW5pbWF0ZWRTcHJpdGUgPSBuZXcgQW5pbWF0ZWRTcHJpdGUobWNfdHlwZSwgXCJJRExFXCIsIFwiTUFJTl9CVUdcIiwgbmV3IE1haW5DaGFyYWN0ZXJCZWhhdmlvcigpKTtcbiAgICBsZXQgbWNfcmFuZG9tWCA6IG51bWJlciA9IE1hdGgucmFuZG9tKCkgKiB3b3JsZFdpZHRoO1xuICAgIGxldCBtY19yYW5kb21ZIDogbnVtYmVyID0gTWF0aC5yYW5kb20oKSAqIHdvcmxkSGVpZ2h0O1xuICAgIG1haW5fYnVnLmdldFBvc2l0aW9uKCkuc2V0KG1jX3JhbmRvbVgsIG1jX3JhbmRvbVksIDAsIDEpO1xuICAgIGdhbWUuZ2V0U2NlbmVHcmFwaCgpLmFkZEFuaW1hdGVkU3ByaXRlKG1haW5fYnVnKTtcbiAgICBnYW1lLmdldFNjZW5lR3JhcGgoKS5zZXRNYWluQ2hhcmFjdGVyKG1haW5fYnVnKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyBpKyspIHtcbiAgICAgICAgbGV0IHR5cGUgOiBBbmltYXRlZFNwcml0ZVR5cGU7XG4gICAgICAgIGxldCByYW5kb21TcHJpdGUgOiBBbmltYXRlZFNwcml0ZTtcbiAgICAgICAgaWYoaSA8IDUwKSB7XG4gICAgICAgICAgICB0eXBlID0gZ2FtZS5nZXRSZXNvdXJjZU1hbmFnZXIoKS5nZXRBbmltYXRlZFNwcml0ZVR5cGUoXCJCVUdfT05FXCIpO1xuICAgICAgICAgICAgcmFuZG9tU3ByaXRlID0gbmV3IEFuaW1hdGVkU3ByaXRlKHR5cGUsIFwiREFOQ0lOR1wiLCBcIkJVR19PTkVcIiwgbmV3IEJ1Z09uZUJlaGF2aW9yKGdhbWUuZ2V0U2NlbmVHcmFwaCgpKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0eXBlID0gZ2FtZS5nZXRSZXNvdXJjZU1hbmFnZXIoKS5nZXRBbmltYXRlZFNwcml0ZVR5cGUoXCJCVUdfVFdPXCIpO1xuICAgICAgICAgICAgcmFuZG9tU3ByaXRlID0gbmV3IEFuaW1hdGVkU3ByaXRlKHR5cGUsIFwiREFOQ0lOR1wiLCBcIkJVR19UV09cIiwgbmV3IEJ1Z1R3b0JlaGF2aW9yKG1haW5fYnVnLCBnYW1lLmdldFNjZW5lR3JhcGgoKSkpO1xuICAgICAgICB9XG4gICAgICAgIGxldCByYW5kb21YIDogbnVtYmVyID0gTWF0aC5yYW5kb20oKSAqIHdvcmxkV2lkdGg7XG4gICAgICAgIGxldCByYW5kb21ZIDogbnVtYmVyID0gTWF0aC5yYW5kb20oKSAqIHdvcmxkSGVpZ2h0O1xuICAgICAgICByYW5kb21TcHJpdGUuZ2V0UG9zaXRpb24oKS5zZXQocmFuZG9tWCwgcmFuZG9tWSwgMCwgMSk7XG4gICAgICAgIGdhbWUuZ2V0U2NlbmVHcmFwaCgpLmFkZEFuaW1hdGVkU3ByaXRlKHJhbmRvbVNwcml0ZSk7XG4gICAgfVxuICAgIFxuICAgIC8vIE5PVyBBREQgVEVYVCBSRU5ERVJJTkcuIFdFIEFSRSBHT0lORyBUTyBSRU5ERVIgMyBUSElOR1M6XG4gICAgICAgIC8vIE5VTUJFUiBPRiBTUFJJVEVTIElOIFRIRSBTQ0VORVxuICAgICAgICAvLyBMT0NBVElPTiBJTiBHQU1FIFdPUkxEIE9GIFZJRVdQT1JUXG4gICAgICAgIC8vIE5VTUJFUiBPRiBTUFJJVEVTIElOIFZJU0lCTEUgU0VUIChpLmUuIElOIFRIRSBWSUVXUE9SVClcbiAgICBsZXQgc2NlbmVHcmFwaCA6IFNjZW5lR3JhcGggPSBnYW1lLmdldFNjZW5lR3JhcGgoKTtcbiAgICBsZXQgc3ByaXRlc0luU2NlbmVUZXh0IDogVGV4dFRvUmVuZGVyID0gbmV3IFRleHRUb1JlbmRlcihcIlNwcml0ZXMgaW4gU2NlbmVcIiwgXCJcIiwgMjAsIDUwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc3ByaXRlc0luU2NlbmVUZXh0LnRleHQgPSBcIlNwcml0ZXMgaW4gU2NlbmU6IFwiICsgc2NlbmVHcmFwaC5nZXROdW1TcHJpdGVzKCk7XG4gICAgfSk7XG4gICAgbGV0IHZpZXdwb3J0VGV4dCA6IFRleHRUb1JlbmRlciA9IG5ldyBUZXh0VG9SZW5kZXIoXCJWaWV3cG9ydFwiLCBcIlwiLCAyMCwgNzAsIGZ1bmN0aW9uKCkge1xuICAgICAgICBsZXQgdmlld3BvcnQgOiBWaWV3cG9ydCA9IHNjZW5lR3JhcGguZ2V0Vmlld3BvcnQoKTtcbiAgICAgICAgdmlld3BvcnRUZXh0LnRleHQgPSBcIlZpZXdwb3J0ICh3LCBoLCB4LCB5KTogKFwiICArIHZpZXdwb3J0LmdldFdpZHRoKCkgKyBcIiwgXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyB2aWV3cG9ydC5nZXRIZWlnaHQoKSArIFwiLCBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIHZpZXdwb3J0LmdldFgoKSArIFwiLCBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIHZpZXdwb3J0LmdldFkoKSArIFwiKVwiO1xuICAgIH0pO1xuICAgIGxldCBzcHJpdGVzSW5WaWV3cG9ydFRleHQgOiBUZXh0VG9SZW5kZXIgPSBuZXcgVGV4dFRvUmVuZGVyKFwiU3ByaXRlcyBpbiBWaWV3cG9ydFwiLCBcIlwiLCAyMCwgOTAsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzcHJpdGVzSW5WaWV3cG9ydFRleHQudGV4dCA9IFwiU3ByaXRlcyBpbiBWaWV3cG9ydDogXCIgKyBzY2VuZUdyYXBoLnNjb3BlKCkubGVuZ3RoO1xuICAgIH0pO1xuICAgIGxldCB3b3JsZERpbWVuc2lvbnNUZXh0IDogVGV4dFRvUmVuZGVyID0gbmV3IFRleHRUb1JlbmRlcihcIldvcmxkIERpbWVuc2lvbnNcIiwgXCJcIiwgMjAsIDExMCwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHdvcmxkRGltZW5zaW9uc1RleHQudGV4dCA9IFwiV29ybGQgRGltZW5zaW9ucyAodywgaCk6IChcIiArIHdvcmxkV2lkdGggKyBcIiwgXCIgKyB3b3JsZEhlaWdodCArIFwiKVwiO1xuICAgIH0pO1xuICAgIGxldCB0ZXh0UmVuZGVyZXIgPSBnYW1lLmdldFJlbmRlcmluZ1N5c3RlbSgpLmdldFRleHRSZW5kZXJlcigpO1xuICAgIHRleHRSZW5kZXJlci5hZGRUZXh0VG9SZW5kZXIoc3ByaXRlc0luU2NlbmVUZXh0KTtcbiAgICB0ZXh0UmVuZGVyZXIuYWRkVGV4dFRvUmVuZGVyKHZpZXdwb3J0VGV4dCk7XG4gICAgdGV4dFJlbmRlcmVyLmFkZFRleHRUb1JlbmRlcihzcHJpdGVzSW5WaWV3cG9ydFRleHQpO1xuICAgIHRleHRSZW5kZXJlci5hZGRUZXh0VG9SZW5kZXIod29ybGREaW1lbnNpb25zVGV4dCk7XG5cbiAgICAvLyBBTkQgU1RBUlQgVEhFIEdBTUUgTE9PUFxuICAgIGdhbWUuc3RhcnQoKTtcbn0pOyIsIi8qXG4gKiBHYW1lIGlzIHRoZSBmb2NhbCBwb2ludCBvZiB0aGUgYXBwbGljYXRpb24sIGl0IGhhcyA0IHN1YnN5c3RlbXMsXG4gKiB0aGUgcmVzb3VyY2UgbWFuYWdlciwgdGhlIHNjZW5lIGdyYXBoLCB0aGUgcmVuZGVyaW5nIHN5c3RlbSwgYW5kXG4gKiB0aGUgVUkgY29udHJvbGxlci4gSW4gYWRkaXRpb24gaXQgc2VydmVzIGFzIHRoZSBnYW1lIGxvb3AsIHByb3ZpZGluZ1xuICogYm90aCBhbiB1cGRhdGUgYW5kIGRyYXcgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgb24gYSBzY2hlZHVsZS5cbiAqL1xuaW1wb3J0IHtHYW1lTG9vcFRlbXBsYXRlfSBmcm9tICcuL2xvb3AvR2FtZUxvb3BUZW1wbGF0ZSdcbmltcG9ydCB7V2ViR0xHYW1lUmVuZGVyaW5nU3lzdGVtfSBmcm9tICcuL3JlbmRlcmluZy9XZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW0nXG5pbXBvcnQge1NjZW5lR3JhcGh9IGZyb20gJy4vc2NlbmUvU2NlbmVHcmFwaCdcbmltcG9ydCB7QW5pbWF0ZWRTcHJpdGV9IGZyb20gJy4vc2NlbmUvc3ByaXRlL0FuaW1hdGVkU3ByaXRlJ1xuaW1wb3J0IHtUaWxlZExheWVyfSBmcm9tICcuL3NjZW5lL3RpbGVzL1RpbGVkTGF5ZXInXG5pbXBvcnQge1Jlc291cmNlTWFuYWdlcn0gZnJvbSAnLi9maWxlcy9SZXNvdXJjZU1hbmFnZXInXG5pbXBvcnQge1VJQ29udHJvbGxlcn0gZnJvbSAnLi91aS9VSUNvbnRyb2xsZXInXG5pbXBvcnQge1ZpZXdwb3J0fSBmcm9tICcuL3NjZW5lL1ZpZXdwb3J0J1xuaW1wb3J0IHtHYW1lUGh5c2ljc30gZnJvbSAnLi9waHlzaWNzL0dhbWVQaHlzaWNzJ1xuaW1wb3J0IHtUZXh0VG9SZW5kZXIsIFRleHRSZW5kZXJlcn0gZnJvbSAnLi4vd29sZmllMmQvcmVuZGVyaW5nL1RleHRSZW5kZXJlcidcblxuZXhwb3J0IGNsYXNzIEdhbWUgZXh0ZW5kcyBHYW1lTG9vcFRlbXBsYXRlIHtcbiAgICBwcml2YXRlIHJlc291cmNlTWFuYWdlciA6IFJlc291cmNlTWFuYWdlcjtcbiAgICBwcml2YXRlIHNjZW5lR3JhcGggOiBTY2VuZUdyYXBoO1xuICAgIHByaXZhdGUgcmVuZGVyaW5nU3lzdGVtIDogV2ViR0xHYW1lUmVuZGVyaW5nU3lzdGVtO1xuICAgIHByaXZhdGUgdWlDb250cm9sbGVyIDogVUlDb250cm9sbGVyO1xuICAgIHByaXZhdGUgZ2FtZVBoeXNpY3MgOiBHYW1lUGh5c2ljcztcbiAgICBcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihnYW1lQ2FudmFzSWQgOiBzdHJpbmcsIHRleHRDYW52YXNJZCA6IHN0cmluZykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJlc291cmNlTWFuYWdlcj0gbmV3IFJlc291cmNlTWFuYWdlcigpO1xuICAgICAgICB0aGlzLnNjZW5lR3JhcGg9IG5ldyBTY2VuZUdyYXBoKCk7XG4gICAgICAgIHRoaXMucmVuZGVyaW5nU3lzdGVtPSBuZXcgV2ViR0xHYW1lUmVuZGVyaW5nU3lzdGVtKGdhbWVDYW52YXNJZCwgdGV4dENhbnZhc0lkKTtcbiAgICAgICAgdGhpcy51aUNvbnRyb2xsZXIgPSBuZXcgVUlDb250cm9sbGVyKGdhbWVDYW52YXNJZCwgdGhpcy5zY2VuZUdyYXBoKTtcbiAgICAgICAgdGhpcy5nYW1lUGh5c2ljcyA9IG5ldyBHYW1lUGh5c2ljcygpO1xuXG4gICAgICAgIC8vIE1BS0UgU1VSRSBUSEUgU0NFTkUgR1JBUEgnIFMgVklFV1BPUlQgSVMgUFJPUEVSTFkgU0VUVVBcbiAgICAgICAgbGV0IHZpZXdwb3J0V2lkdGggOiBudW1iZXIgPSAoPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGdhbWVDYW52YXNJZCkpLndpZHRoO1xuICAgICAgICBsZXQgdmlld3BvcnRIZWlnaHQgOiBudW1iZXIgPSAoPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGdhbWVDYW52YXNJZCkpLmhlaWdodDtcbiAgICAgICAgbGV0IHZpZXdwb3J0IDogVmlld3BvcnQgPSBuZXcgVmlld3BvcnQodmlld3BvcnRXaWR0aCwgdmlld3BvcnRIZWlnaHQpO1xuICAgICAgICB0aGlzLnNjZW5lR3JhcGguc2V0Vmlld3BvcnQodmlld3BvcnQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRSZW5kZXJpbmdTeXN0ZW0oKSA6IFdlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmluZ1N5c3RlbTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UmVzb3VyY2VNYW5hZ2VyKCkgOiBSZXNvdXJjZU1hbmFnZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNvdXJjZU1hbmFnZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFNjZW5lR3JhcGgoKSA6IFNjZW5lR3JhcGgge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2VuZUdyYXBoO1xuICAgIH1cblxuICAgIHB1YmxpYyBiZWdpbigpIDogdm9pZCB7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBUaGlzIGRyYXdzIHRoZSBnYW1lLiBOb3RlIHRoYXQgd2UgYXJlIG5vdCBjdXJyZW50bHkgdXNpbmcgdGhlIFxuICAgICAqIGludGVycG9sYXRpb24gdmFsdWUsIGJ1dCBjb3VsZCBvbmNlIHBoeXNpY3MgaXMgaW52b2x2ZWQuXG4gICAgICovXG4gICAgcHVibGljIGRyYXcoaW50ZXJwb2xhdGlvblBlcmNlbnRhZ2UgOiBudW1iZXIpIDogdm9pZCB7XG4gICAgICAgIC8vIEdFVCBUSEUgVElMRUQgTEFZRVJTIFRPIFJFTkRFUiBGUk9NIFRIRSBTQ0VORSBHUkFQSFxuICAgICAgICBsZXQgdmlzaWJsZUxheWVycyA6IEFycmF5PFRpbGVkTGF5ZXI+O1xuICAgICAgICB2aXNpYmxlTGF5ZXJzID0gdGhpcy5zY2VuZUdyYXBoLmdldFRpbGVkTGF5ZXJzKCk7XG5cbiAgICAgICAgLy8gR0VUIFRIRSBWSVNJQkxFIFNFVCBGUk9NIFRIRSBTQ0VORSBHUkFQSFxuICAgICAgICBsZXQgdmlzaWJsZVNwcml0ZXMgOiBBcnJheTxBbmltYXRlZFNwcml0ZT47XG4gICAgICAgIHZpc2libGVTcHJpdGVzID0gPEFycmF5PEFuaW1hdGVkU3ByaXRlPj50aGlzLnNjZW5lR3JhcGguc2NvcGUoKTtcblxuICAgICAgICBsZXQgdmlld3BvcnQgOiBWaWV3cG9ydCA9IHRoaXMuc2NlbmVHcmFwaC5nZXRWaWV3cG9ydCgpO1xuXG4gICAgICAgIC8vIFJFTkRFUiBUSEUgVklTSUJMRSBTRVQsIFdISUNIIFNIT1VMRCBBTEwgQkUgUkVOREVSQUJMRVxuICAgICAgICB0aGlzLnJlbmRlcmluZ1N5c3RlbS5yZW5kZXIodmlld3BvcnQsIHZpc2libGVMYXllcnMsIHZpc2libGVTcHJpdGVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBzY2VuZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlKGRlbHRhIDogbnVtYmVyKSA6IHZvaWQge1xuICAgICAgICB0aGlzLnNjZW5lR3JhcGgudXBkYXRlKGRlbHRhKTtcbiAgICAgICAgdGhpcy5nYW1lUGh5c2ljcy51cGRhdGUodGhpcy5zY2VuZUdyYXBoKTtcbiAgICAgICAgbGV0IGVuZW15X3Nwcml0ZXMgOiBBcnJheTxBbmltYXRlZFNwcml0ZT4gPSBbXTtcbiAgICAgICAgZm9yKGxldCBzcHJpdGUgb2YgdGhpcy5zY2VuZUdyYXBoLmdldEFuaW1hdGVkU3ByaXRlcygpKSB7XG4gICAgICAgICAgICBpZihzcHJpdGUuZ2V0VHlwZU5hbWUoKSA9PSBcIkJVR19PTkVcIikge1xuICAgICAgICAgICAgICAgIGVuZW15X3Nwcml0ZXMucHVzaChzcHJpdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKEdhbWUuaXNfd29uKGVuZW15X3Nwcml0ZXMpKSB7XG4gICAgICAgICAgICBsZXQgdGV4dFJlbmRlcmVyID0gdGhpcy5nZXRSZW5kZXJpbmdTeXN0ZW0oKS5nZXRUZXh0UmVuZGVyZXIoKTtcbiAgICAgICAgICAgIGxldCB3aW5fdGV4dCA6IFRleHRUb1JlbmRlciA9IG5ldyBUZXh0VG9SZW5kZXIoXCJXaW4gTWVzc2FnZVwiLCBcIlwiLCA0OTQsIDM0OSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgd2luX3RleHQudGV4dCA9IFwiWW91IFdpbiEhISFcIjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgd2luX3RleHQuZm9udFNpemUgPSA5MDAwO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ3aW5cIik7XG4gICAgICAgICAgICB0ZXh0UmVuZGVyZXIuYWRkVGV4dFRvUmVuZGVyKHdpbl90ZXh0KTtcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVuZGVyaW5nU3lzdGVtKCkuZ2V0VGV4dFJlbmRlcmVyKCkucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgRlBTIGNvdW50ZXIuXG4gICAgICovXG4gICAgcHVibGljIGVuZChmcHMgOiBudW1iZXIsIHBhbmljIDogYm9vbGVhbikgOiB2b2lkIHtcbiAgICAgICAgaWYgKHBhbmljKSB7XG4gICAgICAgICAgICB2YXIgZGlzY2FyZGVkVGltZSA9IE1hdGgucm91bmQodGhpcy5yZXNldEZyYW1lRGVsdGEoKSk7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ01haW4gbG9vcCBwYW5pY2tlZCwgcHJvYmFibHkgYmVjYXVzZSB0aGUgYnJvd3NlciB0YWIgd2FzIHB1dCBpbiB0aGUgYmFja2dyb3VuZC4gRGlzY2FyZGluZyAnICsgZGlzY2FyZGVkVGltZSArICdtcycpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIGlzX3dvbihlbmVteV9zcHJpdGVzIDogQXJyYXk8QW5pbWF0ZWRTcHJpdGU+KSA6IGJvb2xlYW4ge1xuICAgICAgICBmb3IobGV0IHNwcml0ZSBvZiBlbmVteV9zcHJpdGVzKSB7XG4gICAgICAgICAgICBpZihzcHJpdGUuZ2V0U3RhdGUoKSAhPSBcIkRFQURcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59IiwiaW1wb3J0IHsgU3ByaXRlQmVoYXZpb3IgfSBmcm9tIFwiLi9TcHJpdGVCZWhhdmlvclwiO1xuaW1wb3J0IHsgQW5pbWF0ZWRTcHJpdGUgfSBmcm9tIFwiLi4vc2NlbmUvc3ByaXRlL0FuaW1hdGVkU3ByaXRlXCI7XG5pbXBvcnQge1RpbGVkTGF5ZXJ9IGZyb20gJy4uL3NjZW5lL3RpbGVzL1RpbGVkTGF5ZXInO1xuaW1wb3J0IHsgU2NlbmVHcmFwaCB9IGZyb20gXCIuLi9zY2VuZS9TY2VuZUdyYXBoXCI7XG5cbmV4cG9ydCBjbGFzcyBCdWdPbmVCZWhhdmlvciBleHRlbmRzIFNwcml0ZUJlaGF2aW9ye1xuICAgIHByaXZhdGUgY3VycmVudF9kaXJlY3Rpb24gOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBmcmFtZXNfdW50aWxfY2hhbmdlIDogbnVtYmVyO1xuICAgIHByaXZhdGUgc2NlbmVHcmFwaCA6IFNjZW5lR3JhcGg7XG5cbiAgICBjb25zdHJ1Y3Rvcihpbml0X3NjZW5lR3JhcGggOiBTY2VuZUdyYXBoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY3VycmVudF9kaXJlY3Rpb24gPSBCdWdPbmVCZWhhdmlvci5yYW5kb21fZGlyZWN0aW9uKCk7XG4gICAgICAgIHRoaXMuZnJhbWVzX3VudGlsX2NoYW5nZSA9IEJ1Z09uZUJlaGF2aW9yLnJhbmRvbV9mcmFtZV9udW0oKTtcbiAgICAgICAgdGhpcy5zY2VuZUdyYXBoID0gaW5pdF9zY2VuZUdyYXBoO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGUoKSA6IHZvaWQge1xuICAgICAgICBpZih0aGlzLmdldFNwcml0ZSgpID09IG51bGwpIHsgcmV0dXJuOyB9XG4gICAgICAgIGlmKHRoaXMuZ2V0U3ByaXRlKCkuZ2V0U3RhdGUoKSA9PSBcIkRZSU5HXCIgfHwgdGhpcy5nZXRTcHJpdGUoKS5nZXRTdGF0ZSgpID09IFwiREVBRFwiKXsgcmV0dXJuOyB9XG4gICAgICAgIHN3aXRjaCh0aGlzLmN1cnJlbnRfZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIFwiVVBcIjogdGhpcy5tb3ZlVXAoKTsgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiRE9XTlwiOiB0aGlzLm1vdmVEb3duKCk7IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkxFRlRcIjogdGhpcy5tb3ZlTGVmdCgpOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJSSUdIVFwiOiB0aGlzLm1vdmVSaWdodCgpOyBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZyYW1lc191bnRpbF9jaGFuZ2UtLTtcbiAgICAgICAgaWYodGhpcy5mcmFtZXNfdW50aWxfY2hhbmdlID09IDApe1xuICAgICAgICAgICAgLy9UT0RPIE1ha2Ugc3VyZSBpdCBkb2Vzbid0IGxlYXZlIHRoZSBtYXBcbiAgICAgICAgICAgIHRoaXMuY3VycmVudF9kaXJlY3Rpb24gPSBCdWdPbmVCZWhhdmlvci5yYW5kb21fZGlyZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLmZyYW1lc191bnRpbF9jaGFuZ2UgPSBCdWdPbmVCZWhhdmlvci5yYW5kb21fZnJhbWVfbnVtKCk7XG5cbiAgICAgICAgICAgIC8vTWFrZSBzdXJlIGl0IGRvZXNuJ3QgbGVhdmUgdGhlIG1hcFxuICAgICAgICAgICAgbGV0IHdvcmxkIDogVGlsZWRMYXllcltdID0gdGhpcy5zY2VuZUdyYXBoLmdldFRpbGVkTGF5ZXJzKCk7XG4gICAgICAgICAgICBsZXQgd29ybGRXaWR0aCA6IG51bWJlciA9IHdvcmxkWzBdLmdldENvbHVtbnMoKSAqIHdvcmxkWzBdLmdldFRpbGVTZXQoKS5nZXRUaWxlV2lkdGgoKTtcbiAgICAgICAgICAgIGxldCB3b3JsZEhlaWdodCA6IG51bWJlciA9IHdvcmxkWzBdLmdldFJvd3MoKSAqIHdvcmxkWzBdLmdldFRpbGVTZXQoKS5nZXRUaWxlSGVpZ2h0KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKHRoaXMuY3VycmVudF9kaXJlY3Rpb24gPT0gXCJVUFwiICYmIHRoaXMuZ2V0U3ByaXRlKCkuZ2V0UG9zaXRpb24oKS5nZXRZKCkgLSAodGhpcy5nZXRTcHJpdGUoKS5nZXRTcHJpdGVUeXBlKCkuZ2V0U3ByaXRlSGVpZ2h0KCkvMikgLSB0aGlzLmZyYW1lc191bnRpbF9jaGFuZ2UgKyB0aGlzLnNjZW5lR3JhcGguZ2V0Vmlld3BvcnQoKS5nZXRZKCkgPD0gMCl7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50X2RpcmVjdGlvbiA9IFwiRE9XTlwiO1xuICAgICAgICAgICAgfWVsc2UgaWYodGhpcy5jdXJyZW50X2RpcmVjdGlvbiA9PSBcIkRPV05cIiAmJiB0aGlzLmdldFNwcml0ZSgpLmdldFBvc2l0aW9uKCkuZ2V0WSgpICsgKHRoaXMuZ2V0U3ByaXRlKCkuZ2V0U3ByaXRlVHlwZSgpLmdldFNwcml0ZUhlaWdodCgpLzIpICsgdGhpcy5mcmFtZXNfdW50aWxfY2hhbmdlIC0gdGhpcy5zY2VuZUdyYXBoLmdldFZpZXdwb3J0KCkuZ2V0WSgpID49IHdvcmxkSGVpZ2h0KXtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRfZGlyZWN0aW9uID0gXCJVUFwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZih0aGlzLmN1cnJlbnRfZGlyZWN0aW9uID09IFwiTEVGVFwiICYmIHRoaXMuZ2V0U3ByaXRlKCkuZ2V0UG9zaXRpb24oKS5nZXRYKCkgLSAodGhpcy5nZXRTcHJpdGUoKS5nZXRTcHJpdGVUeXBlKCkuZ2V0U3ByaXRlV2lkdGgoKS8yKSAtIHRoaXMuZnJhbWVzX3VudGlsX2NoYW5nZSArIHRoaXMuc2NlbmVHcmFwaC5nZXRWaWV3cG9ydCgpLmdldFgoKSA8PSAwKXtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRfZGlyZWN0aW9uID0gXCJSSUdIVFwiOyBjb25zb2xlLmxvZyhcImNcIik7XG4gICAgICAgICAgICB9ZWxzZSBpZih0aGlzLmN1cnJlbnRfZGlyZWN0aW9uID09IFwiUklHSFRcIiAmJiB0aGlzLmdldFNwcml0ZSgpLmdldFBvc2l0aW9uKCkuZ2V0WCgpICsgKHRoaXMuZ2V0U3ByaXRlKCkuZ2V0U3ByaXRlVHlwZSgpLmdldFNwcml0ZVdpZHRoKCkvMikgKyB0aGlzLmZyYW1lc191bnRpbF9jaGFuZ2UgLSB0aGlzLnNjZW5lR3JhcGguZ2V0Vmlld3BvcnQoKS5nZXRYKCkgPj0gd29ybGRXaWR0aCl7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50X2RpcmVjdGlvbiA9IFwiTEVGVFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBzdGF0aWMgcmFuZG9tX2RpcmVjdGlvbigpIDogc3RyaW5nIHtcbiAgICAgICAgLy9yZXR1cm4gXCJSSUdIVFwiO1xuICAgICAgICBsZXQgZHVyX251bSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQpO1xuICAgICAgICBzd2l0Y2goZHVyX251bSkge1xuICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gXCJVUFwiO1xuICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gXCJET1dOXCI7XG4gICAgICAgICAgICBjYXNlIDI6IHJldHVybiBcIkxFRlRcIjtcbiAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiBcIlJJR0hUXCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgcmFuZG9tX2ZyYW1lX251bSgpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSArIDE7XG4gICAgfVxufSIsImltcG9ydCB7IFNwcml0ZUJlaGF2aW9yIH0gZnJvbSBcIi4vU3ByaXRlQmVoYXZpb3JcIjtcbmltcG9ydCB7IEFuaW1hdGVkU3ByaXRlIH0gZnJvbSBcIi4uL3NjZW5lL3Nwcml0ZS9BbmltYXRlZFNwcml0ZVwiO1xuaW1wb3J0IHsgU2NlbmVHcmFwaCB9IGZyb20gXCIuLi9zY2VuZS9TY2VuZUdyYXBoXCI7XG5cbmV4cG9ydCBjbGFzcyBCdWdUd29CZWhhdmlvciBleHRlbmRzIFNwcml0ZUJlaGF2aW9ye1xuICAgIHByaXZhdGUgY3VycmVudF9kaXJlY3Rpb24gOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBmcmFtZXNfdW50aWxfY2hhbmdlIDogbnVtYmVyO1xuICAgIHByaXZhdGUgbWFpbl9zcHJpdGUgOiBBbmltYXRlZFNwcml0ZTtcbiAgICBwcml2YXRlIHNjZW5lR3JhcGggOiBTY2VuZUdyYXBoO1xuXG4gICAgY29uc3RydWN0b3IoaW5pdF9tYWluX3Nwcml0ZSA6IEFuaW1hdGVkU3ByaXRlLCBpbml0X3NjZW5lX2dyYXBoIDogU2NlbmVHcmFwaCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmN1cnJlbnRfZGlyZWN0aW9uID0gXCJVUFwiO1xuICAgICAgICB0aGlzLmZyYW1lc191bnRpbF9jaGFuZ2UgPSA1MDtcbiAgICAgICAgdGhpcy5tYWluX3Nwcml0ZSA9IGluaXRfbWFpbl9zcHJpdGU7XG4gICAgICAgIHRoaXMuc2NlbmVHcmFwaCA9IGluaXRfc2NlbmVfZ3JhcGg7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZSgpIDogdm9pZCB7XG4gICAgICAgIGlmKHRoaXMuZ2V0U3ByaXRlKCkgPT0gbnVsbCkgeyByZXR1cm47IH1cbiAgICAgICAgaWYodGhpcy5nZXRTcHJpdGUoKS5nZXRTdGF0ZSgpID09IFwiRFlJTkdcIiB8fCB0aGlzLmdldFNwcml0ZSgpLmdldFN0YXRlKCkgPT0gXCJERUFEXCIpeyByZXR1cm47IH1cblxuICAgICAgICAvL0NoZWNrIGlmIHRoZSBtYWluIGNoYXJhY3RlciBpcyBuZWFyYnlcbiAgICAgICAgLy9kaXN0YW5jZSA9ICgoeDIteDEpXjIgKyAoeTIteTEpXjIpXjAuNVxuICAgICAgICBsZXQgZGlzdGFuY2UgPSBNYXRoLnNxcnQoKE1hdGgucG93KCgodGhpcy5tYWluX3Nwcml0ZS5nZXRQb3NpdGlvbigpLmdldFgoKSArIHRoaXMuc2NlbmVHcmFwaC5nZXRWaWV3cG9ydCgpLmdldFgoKSkgLSAodGhpcy5nZXRTcHJpdGUoKS5nZXRQb3NpdGlvbigpLmdldFgoKSArIHRoaXMuc2NlbmVHcmFwaC5nZXRWaWV3cG9ydCgpLmdldFgoKSkpLCAyKVxuICAgICAgICArIE1hdGgucG93KCgodGhpcy5tYWluX3Nwcml0ZS5nZXRQb3NpdGlvbigpLmdldFkoKSArIHRoaXMuc2NlbmVHcmFwaC5nZXRWaWV3cG9ydCgpLmdldFkoKSkgLSAodGhpcy5nZXRTcHJpdGUoKS5nZXRQb3NpdGlvbigpLmdldFkoKSArIHRoaXMuc2NlbmVHcmFwaC5nZXRWaWV3cG9ydCgpLmdldFkoKSkpLCAyKSkpO1xuICAgICAgICBsZXQgbWFpbl9jaGFyYWN0ZXJfcmFkaXVzID0gTWF0aC5wb3coTWF0aC5wb3codGhpcy5tYWluX3Nwcml0ZS5nZXRTcHJpdGVUeXBlKCkuZ2V0U3ByaXRlV2lkdGgoKS8yLCAyKSArIE1hdGgucG93KHRoaXMubWFpbl9zcHJpdGUuZ2V0U3ByaXRlVHlwZSgpLmdldFNwcml0ZUhlaWdodCgpLzIsIDIpLCAwLjUpO1xuICAgICAgICBsZXQgYnVnX3JhZGl1cyA9IE1hdGgucG93KE1hdGgucG93KHRoaXMuZ2V0U3ByaXRlKCkuZ2V0U3ByaXRlVHlwZSgpLmdldFNwcml0ZVdpZHRoKCkvNCwgMikgKyBNYXRoLnBvdyh0aGlzLmdldFNwcml0ZSgpLmdldFNwcml0ZVR5cGUoKS5nZXRTcHJpdGVIZWlnaHQoKS80LCAyKSwgMC41KTtcbiAgICAgICAgaWYoZGlzdGFuY2UgPD0gNTAgKyBtYWluX2NoYXJhY3Rlcl9yYWRpdXMgKyBidWdfcmFkaXVzKSB7XG4gICAgICAgICAgICBpZih0aGlzLm1haW5fc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WCgpIDwgdGhpcy5nZXRTcHJpdGUoKS5nZXRQb3NpdGlvbigpLmdldFgoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZVJpZ2h0KCk7XG4gICAgICAgICAgICB9ZWxzZSBpZih0aGlzLm1haW5fc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WCgpID4gdGhpcy5nZXRTcHJpdGUoKS5nZXRQb3NpdGlvbigpLmdldFgoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZUxlZnQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYodGhpcy5tYWluX3Nwcml0ZS5nZXRQb3NpdGlvbigpLmdldFkoKSA8IHRoaXMuZ2V0U3ByaXRlKCkuZ2V0UG9zaXRpb24oKS5nZXRZKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVEb3duKCk7XG4gICAgICAgICAgICB9ZWxzZSBpZih0aGlzLm1haW5fc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WSgpID4gdGhpcy5nZXRTcHJpdGUoKS5nZXRQb3NpdGlvbigpLmdldFkoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZVVwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2godGhpcy5jdXJyZW50X2RpcmVjdGlvbikge1xuICAgICAgICAgICAgY2FzZSBcIlVQXCI6IHRoaXMubW92ZVVwKCk7IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkRPV05cIjogdGhpcy5tb3ZlRG93bigpOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJMRUZUXCI6IHRoaXMubW92ZUxlZnQoKTsgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiUklHSFRcIjogdGhpcy5tb3ZlUmlnaHQoKTsgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mcmFtZXNfdW50aWxfY2hhbmdlLS07XG4gICAgICAgIGlmKHRoaXMuZnJhbWVzX3VudGlsX2NoYW5nZSA9PSAwKSB7XG4gICAgICAgICAgICAvL1RPRE8gTWFrZSBzdXJlIGl0IGRvZXNuJ3QgbGVhdmUgdGhlIG1hcFxuICAgICAgICAgICAgdGhpcy5jdXJyZW50X2RpcmVjdGlvbiA9IHRoaXMuY3VycmVudF9kaXJlY3Rpb249PVwiVVBcIj9cIkRPV05cIjpcIlVQXCI7XG4gICAgICAgICAgICB0aGlzLmZyYW1lc191bnRpbF9jaGFuZ2UgPSA1MDtcbiAgICAgICAgfVxuXG4gICAgfVxufSIsImltcG9ydCB7IFNwcml0ZUJlaGF2aW9yIH0gZnJvbSBcIi4vU3ByaXRlQmVoYXZpb3JcIjtcbmltcG9ydCB7IEFuaW1hdGVkU3ByaXRlIH0gZnJvbSBcIi4uL3NjZW5lL3Nwcml0ZS9BbmltYXRlZFNwcml0ZVwiO1xuXG5leHBvcnQgY2xhc3MgTWFpbkNoYXJhY3RlckJlaGF2aW9yIGV4dGVuZHMgU3ByaXRlQmVoYXZpb3J7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlKCkgOiB2b2lkIHtcblxuICAgIH1cbn0iLCJpbXBvcnQgeyBBbmltYXRlZFNwcml0ZSB9IGZyb20gXCIuLi9zY2VuZS9zcHJpdGUvQW5pbWF0ZWRTcHJpdGVcIlxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgU3ByaXRlQmVoYXZpb3Ige1xuICAgIHByaXZhdGUgc3ByaXRlIDogQW5pbWF0ZWRTcHJpdGU7XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc3ByaXRlID0gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U3ByaXRlKCkgOiBBbmltYXRlZFNwcml0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0U3ByaXRlKG5ld1Nwcml0ZSA6IEFuaW1hdGVkU3ByaXRlKSA6IHZvaWQge1xuICAgICAgICB0aGlzLnNwcml0ZSA9IG5ld1Nwcml0ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbW92ZVVwKCkgOiB2b2lkIHtcbiAgICAgICAgdGhpcy5nZXRTcHJpdGUoKS5nZXRQb3NpdGlvbigpLnNldCh0aGlzLmdldFNwcml0ZSgpLmdldFBvc2l0aW9uKCkuZ2V0WCgpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRTcHJpdGUoKS5nZXRQb3NpdGlvbigpLmdldFkoKSAtIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0U3ByaXRlKCkuZ2V0UG9zaXRpb24oKS5nZXRaKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0U3ByaXRlKCkuZ2V0UG9zaXRpb24oKS5nZXRXKCkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBtb3ZlRG93bigpIDogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2V0U3ByaXRlKCkuZ2V0UG9zaXRpb24oKS5zZXQodGhpcy5nZXRTcHJpdGUoKS5nZXRQb3NpdGlvbigpLmdldFgoKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0U3ByaXRlKCkuZ2V0UG9zaXRpb24oKS5nZXRZKCkgKyAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFNwcml0ZSgpLmdldFBvc2l0aW9uKCkuZ2V0WigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFNwcml0ZSgpLmdldFBvc2l0aW9uKCkuZ2V0VygpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbW92ZUxlZnQoKSA6IHZvaWQge1xuICAgICAgICB0aGlzLmdldFNwcml0ZSgpLmdldFBvc2l0aW9uKCkuc2V0KHRoaXMuZ2V0U3ByaXRlKCkuZ2V0UG9zaXRpb24oKS5nZXRYKCkgLSAxLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRTcHJpdGUoKS5nZXRQb3NpdGlvbigpLmdldFkoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRTcHJpdGUoKS5nZXRQb3NpdGlvbigpLmdldFooKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRTcHJpdGUoKS5nZXRQb3NpdGlvbigpLmdldFcoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIG1vdmVSaWdodCgpIDogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2V0U3ByaXRlKCkuZ2V0UG9zaXRpb24oKS5zZXQodGhpcy5nZXRTcHJpdGUoKS5nZXRQb3NpdGlvbigpLmdldFgoKSArIDEsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFNwcml0ZSgpLmdldFBvc2l0aW9uKCkuZ2V0WSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFNwcml0ZSgpLmdldFBvc2l0aW9uKCkuZ2V0WigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFNwcml0ZSgpLmdldFBvc2l0aW9uKCkuZ2V0VygpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWJzdHJhY3QgdXBkYXRlKCkgOiB2b2lkO1xufSIsIi8qXG4gKiBSZXNvdXJjZU1hbmFnZXIuanNcbiAqXG4gKiBUaGlzIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciBtYW5hZ2luZyBhbGwgc2hhcmVkIHJlc291cmNlcy4gVGhpcyBtZWFucyB0aGluZ3NcbiAqIHRoYXQgbWF5IGJlIG5lZWRlZCBieSBtdWx0aXBsZSBnYW1lIG9iamVjdHMuIEluIHRoaXMgYXBwbGljYXRpb24gdGhpcyBtZWFuc1xuICogdGV4dHVyZXMgZm9yIHRoZSBwdXJwb3NlIG9mIEdQVSByZW5kZXJpbmcgYW5kIGFuaW1hdGVkIHNwcml0ZSB0eXBlcy5cbiAqL1xuaW1wb3J0IHsgU3ByaXRlVHlwZURhdGEsIEFuaW1hdGlvblN0YXRlRGF0YSB9IGZyb20gJy4vU3ByaXRlVHlwZURhdGEnXG5pbXBvcnQgeyBNYXBEYXRhLCBUaWxlZExheWVyRGF0YSwgVGlsZWRMYXllclByb3BlcnR5LCBUaWxlU2V0RGF0YSB9IGZyb20gJy4vTWFwRGF0YSdcbmltcG9ydCB7IFNjZW5lRGF0YSwgTmFtZWRQYXRoIH0gZnJvbSAnLi9TY2VuZURhdGEnXG5pbXBvcnQgeyBXZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW0gfSBmcm9tICcuLi9yZW5kZXJpbmcvV2ViR0xHYW1lUmVuZGVyaW5nU3lzdGVtJ1xuaW1wb3J0IHsgV2ViR0xHYW1lVGV4dHVyZSB9IGZyb20gJy4uL3JlbmRlcmluZy9XZWJHTEdhbWVUZXh0dXJlJ1xuaW1wb3J0IHsgQW5pbWF0ZWRTcHJpdGVUeXBlIH0gZnJvbSAnLi4vc2NlbmUvc3ByaXRlL0FuaW1hdGVkU3ByaXRlVHlwZSdcbmltcG9ydCB7IFNjZW5lR3JhcGggfSBmcm9tICcuLi9zY2VuZS9TY2VuZUdyYXBoJ1xuaW1wb3J0IHsgVGlsZWRMYXllciB9IGZyb20gJy4uL3NjZW5lL3RpbGVzL1RpbGVkTGF5ZXInXG5pbXBvcnQgeyBUaWxlU2V0IH0gZnJvbSAnLi4vc2NlbmUvdGlsZXMvVGlsZVNldCdcblxuZXhwb3J0IGNsYXNzIFJlc291cmNlTWFuYWdlciB7XG4gICAgLy8gR0FNRSBTSEFERVIgUFJPR1JBTSBTT1VSQ0UgQ09ERSBXSUxMIEJFIExPQURFRCBIRVJFLiBOT1RFIFRIQVRcbiAgICAvLyBXRSBIQVZFIE9ORSBNQVAgRk9SIE1BUFBJTkcgVEhFIFNIQURFUiBOQU1FIFRPIFRIRSBTT1VSQ0UgQ09ERVxuICAgIC8vIEFORCBBTk9USEVSIEZPUiBNQVBQSU5HIFRIRSBTSEFERVIgTkFNRSBUTyBUSEUgRklMRSBQQVRIXG4gICAgcHJpdmF0ZSBnYW1lU2hhZGVyc1NvdXJjZTogTWFwPHN0cmluZywgc3RyaW5nPiA9IG5ldyBNYXAoKTtcbiAgICBwcml2YXRlIGdhbWVTaGFkZXJzU291cmNlUGF0aHM6IE1hcDxzdHJpbmcsIHN0cmluZz4gPSBuZXcgTWFwKCk7XG4gICAgcHJpdmF0ZSBudW1TaGFkZXJzVG9Mb2FkOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBudW1TaGFkZXJzTG9hZGVkOiBudW1iZXI7XG5cbiAgICAvLyBTUFJJVEUgVFlQRVNcbiAgICBwcml2YXRlIGdhbWVTcHJpdGVUeXBlczogTWFwPHN0cmluZywgQW5pbWF0ZWRTcHJpdGVUeXBlPiA9IG5ldyBNYXAoKTtcbiAgICBwcml2YXRlIGdhbWVTcHJpdGVUeXBlUGF0aHM6IE1hcDxzdHJpbmcsIHN0cmluZz4gPSBuZXcgTWFwKCk7XG4gICAgcHJpdmF0ZSBudW1TcHJpdGVUeXBlc1RvTG9hZDogbnVtYmVyO1xuICAgIHByaXZhdGUgbnVtU3ByaXRlVHlwZXNMb2FkZWQ6IG51bWJlcjtcblxuICAgIC8vIFRJTEUgU0VUU1xuICAgIHByaXZhdGUgZ2FtZVRpbGVTZXRzOiBNYXA8c3RyaW5nLCBUaWxlU2V0PiA9IG5ldyBNYXAoKTtcbiAgICBwcml2YXRlIGdhbWVUaWxlU2V0UGF0aHM6IE1hcDxzdHJpbmcsIHN0cmluZz4gPSBuZXcgTWFwKCk7XG4gICAgcHJpdmF0ZSBudW1UaWxlU2V0c1RvTG9hZDogbnVtYmVyO1xuICAgIHByaXZhdGUgbnVtVGlsZVNldHNMb2FkZWQ6IG51bWJlcjtcblxuICAgIC8vIEdBTUUgVEVYVFVSRVMgXG4gICAgcHJpdmF0ZSBnYW1lVGV4dHVyZXM6IE1hcDxzdHJpbmcsIFdlYkdMR2FtZVRleHR1cmU+ID0gbmV3IE1hcCgpO1xuICAgIHByaXZhdGUgbnVtVGV4dHVyZXNUb0xvYWQ6IG51bWJlcjtcbiAgICBwcml2YXRlIG51bVRleHR1cmVzTG9hZGVkOiBudW1iZXI7XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7IH1cblxuICAgIC8vIEFDQ0VTU09SIE1FVEhPRFNcblxuICAgIHB1YmxpYyBnZXRTaGFkZXJTb3VyY2Uoc2hhZGVyTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2FtZVNoYWRlcnNTb3VyY2UuZ2V0KHNoYWRlck5hbWUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRBbmltYXRlZFNwcml0ZVR5cGUoc3ByaXRlVHlwZU5hbWU6IHN0cmluZyk6IEFuaW1hdGVkU3ByaXRlVHlwZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdhbWVTcHJpdGVUeXBlcy5nZXQoc3ByaXRlVHlwZU5hbWUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUaWxlU2V0KHRpbGVTZXROYW1lOiBzdHJpbmcpOiBUaWxlU2V0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2FtZVRpbGVTZXRzLmdldCh0aWxlU2V0TmFtZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRleHR1cmUodGV4dHVyZVBhdGg6IHN0cmluZyk6IFdlYkdMR2FtZVRleHR1cmUge1xuICAgICAgICByZXR1cm4gdGhpcy5nYW1lVGV4dHVyZXMuZ2V0KHRleHR1cmVQYXRoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2xlYXIoKSA6IHZvaWQge1xuICAgICAgICAvLyBDTEVBUiBUSEUgU0hBREVSIFNPVVJDRSBcbiAgICAgICAgdGhpcy5nYW1lU2hhZGVyc1NvdXJjZS5jbGVhcigpO1xuICAgICAgICB0aGlzLmdhbWVTaGFkZXJzU291cmNlUGF0aHMuY2xlYXIoKTtcblxuICAgICAgICAvLyBDTEVBUiBUSEUgU1BSSVRFIFRZUEVTXG4gICAgICAgIHRoaXMuZ2FtZVNwcml0ZVR5cGVzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuZ2FtZVNwcml0ZVR5cGVQYXRocy5jbGVhcigpO1xuXG4gICAgICAgIC8vIENMRUFSIFRIRSBURVhUVVJFU1xuICAgICAgICB0aGlzLmdhbWVUZXh0dXJlcy5jbGVhcigpO1xuXG4gICAgICAgIC8vIFdFIFJFQUxMWSBTSE9VTEQgQUREIEZVTkNUSU9OQUxJVFkgVE8gUkVNT1ZFXG4gICAgICAgIC8vIEFMTCBUSEUgUkVTT1VSQ0VTIEZST00gVEhFIEdQVSBPTkUgQlkgT05FXG4gICAgICAgIC8vIEJVVCBUSEFUJ1MgU09NRVRISU5HIEZPUiBUSEUgRlVUVVJFXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogbG9hZFNjZW5lIGlzIHJlc3BvbnNpYmxlIGZvciBsb2FkaW5nIGFsbCB0aGUgZXh0ZXJuYWwgZmlsZXMgbmVlZGVkIGZvclxuICAgICAqIHBsYXlpbmcgdGhlIGdhbWUuIFRoZXNlIHdpbGwgYmUgdXNlZCBmb3IgbG9hZGluZyB0aGUgc2NlbmUsIG1hcHMsXG4gICAgICogYW5pbWF0ZWQgc3ByaXRlcywgdGV4dHVyZXMsIGFuZCBzaGFkZXJzLlxuICAgICAqL1xuICAgIHB1YmxpYyBsb2FkU2NlbmUoICAgc2NlbmVQYXRoOiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2VuZUdyYXBoOiBTY2VuZUdyYXBoLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyaW5nU3lzdGVtOiBXZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgLy8gQ0xFQVIgVEhFIFNDRU5FIEdSQVBIIFRPIEdFVCBSSUQgT0YgQUxMIFRIRSBPTEQgU1RVRkZcbiAgICAgICAgLy8gVEhBVCBNQVkgSEFWRSBCRUVOIExPQURFRCBGT1IgU09NRSBPVEhFUiBMRVZFTFxuICAgICAgICBzY2VuZUdyYXBoLmNsZWFyKCk7XG5cbiAgICAgICAgLy8gQ0xFQVIgQUxMIFRIRSBTQ0VORSBSRVNPVVJDRVMgXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcblxuICAgICAgICAvLyBXRSBIQVZFIE9VUiBPV04gQ1VTVE9NIEpTT04gRklMRSBGT1JNQVQgVE8gUkVQUkVTRU5UIE9VUiBTQ0VORVxuICAgICAgICBsZXQgdGhpc1Jlc291cmNlTWFuYWdlcjogUmVzb3VyY2VNYW5hZ2VyID0gdGhpcztcbiAgICAgICAgdGhpcy5sb2FkVGV4dEZpbGUoc2NlbmVQYXRoLCBmdW5jdGlvbiAoanNvblNjZW5lVGV4dDogc3RyaW5nKSB7XG4gICAgICAgICAgICBsZXQgc2NlbmVEYXRhOiBTY2VuZURhdGEgPSA8U2NlbmVEYXRhPkpTT04ucGFyc2UoanNvblNjZW5lVGV4dCk7XG4gICAgICAgICAgICB0aGlzUmVzb3VyY2VNYW5hZ2VyLmxvYWRTaGFkZXJzU291cmNlKHJlbmRlcmluZ1N5c3RlbSwgc2NlbmVEYXRhLnNoYWRlclNvdXJjZVBhdGhzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gTkVYVCBMT0FEIFRIRSBNQVAsIFdISUNIIFdJTEwgRk9SQ0UgQSBMT0FESU5HIE9GXG4gICAgICAgICAgICAgICAgLy8gQU5ZIFVTRUQgVElMRSBTRVQgVEVYVFVSRVMgQVMgV0VMTCBBUyBUSEUgQ1JFQVRJT05cbiAgICAgICAgICAgICAgICAvLyBPRiBUSUxFRCBMQVlFUlMgVE8gQkUgQURERUQgVE8gVEhFIFNDRU5FXG4gICAgICAgICAgICAgICAgdGhpc1Jlc291cmNlTWFuYWdlci5sb2FkTWFwKHNjZW5lRGF0YS5tYXBQYXRoLCByZW5kZXJpbmdTeXN0ZW0sIHNjZW5lR3JhcGgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTk9XIFRIQVQgVEhFIE1BUCBIQVMgQkVFTiBMT0FERUQgTE9BRCBBTEwgVEhFIFNQUklURSBUWVBFU1xuICAgICAgICAgICAgICAgICAgICB0aGlzUmVzb3VyY2VNYW5hZ2VyLmxvYWRTcHJpdGVUeXBlcyhyZW5kZXJpbmdTeXN0ZW0sIHNjZW5lRGF0YS5zcHJpdGVUeXBlUGF0aHMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5PVyBXRSBDQU4gSU5JVCBBTEwgU0hBREVSU1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Jlc291cmNlTWFuYWdlci5pbml0QWxsU2hhZGVycyhyZW5kZXJpbmdTeXN0ZW0sIHNjZW5lR3JhcGgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW5pdEFsbFNoYWRlcnMoICByZW5kZXJpbmdTeXN0ZW06IFdlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZUdyYXBoOiBTY2VuZUdyYXBoKTogdm9pZCB7XG4gICAgICAgIC8vIFNFVFVQIFRIRSBTUFJJVEUgUkVOREVSRVIgRk9SIFVTRSBXSVRIIFRIRSBTUFJJVEUgU0hBREVSIFRIQVQnUyBCRUVOIExPQURFRFxuICAgICAgICBsZXQgc3ByaXRlUmVuZGVyZXJWZXJ0ZXhTaGFkZXJTb3VyY2U6IHN0cmluZyA9IHRoaXMuZ2V0U2hhZGVyU291cmNlKFwiU1BSSVRFX1ZFUlRFWF9TSEFERVJcIik7XG4gICAgICAgIGxldCBzcHJpdGVSZW5kZXJlckZyYWdtZW50U2hhZGVyU291cmNlOiBzdHJpbmcgPSB0aGlzLmdldFNoYWRlclNvdXJjZShcIlNQUklURV9GUkFHTUVOVF9TSEFERVJcIik7XG4gICAgICAgIHJlbmRlcmluZ1N5c3RlbS5nZXRTcHJpdGVSZW5kZXJlcigpLmluaXQocmVuZGVyaW5nU3lzdGVtLmdldFdlYkdMKCksIHNwcml0ZVJlbmRlcmVyVmVydGV4U2hhZGVyU291cmNlLCBzcHJpdGVSZW5kZXJlckZyYWdtZW50U2hhZGVyU291cmNlLCBudWxsKTtcblxuICAgICAgICAvLyBTRVRVUCBUSEUgVElMRUQgTEFZRVIgUkVOREVSRVIgRk9SIFVTRSBXSVRIIFRIRSBUSUxFRCBTSEFERVIgVEhBVCdTIEJFRU4gTE9BREVEXG4gICAgICAgIGxldCB0aWxlZExheWVyVmVydGV4U2hhZGVyU291cmNlOiBzdHJpbmcgPSB0aGlzLmdldFNoYWRlclNvdXJjZShcIlRJTEVEX0xBWUVSX1ZFUlRFWF9TSEFERVJcIik7XG4gICAgICAgIGxldCB0aWxlZExheWVyRnJhZ21lbnRTaGFkZXJTb3VyY2U6IHN0cmluZyA9IHRoaXMuZ2V0U2hhZGVyU291cmNlKFwiVElMRURfTEFZRVJfRlJBR01FTlRfU0hBREVSXCIpO1xuICAgICAgICByZW5kZXJpbmdTeXN0ZW0uZ2V0VGlsZWRMYXllclJlbmRlcmVyKCkuaW5pdChyZW5kZXJpbmdTeXN0ZW0uZ2V0V2ViR0woKSwgdGlsZWRMYXllclZlcnRleFNoYWRlclNvdXJjZSwgdGlsZWRMYXllckZyYWdtZW50U2hhZGVyU291cmNlLCBzY2VuZUdyYXBoLmdldFRpbGVkTGF5ZXJzKCkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBsb2FkU2hhZGVyc1NvdXJjZSggICByZW5kZXJpbmdTeXN0ZW06IFdlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWRQYXRoczogQXJyYXk8TmFtZWRQYXRoPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIC8vIFNUQVJUIEJZIExPQURJTkcgQUxMIFRIRSBTSEFERVIgU09VUkNFIEZJTEVTIFRIRVNFIENBTiBUSEVOIEJFXG4gICAgICAgIC8vIFJFVFJJRVZFRCBMQVRFUiBCWSBUSEUgUkVOREVSRVJTIFdIRU4gSVRTIFRJTUUgVE8gQlVJTEQgVEhFIFxuICAgICAgICAvLyBTSEFERVIgUFJPR1JBTVNcbiAgICAgICAgbGV0IHRoaXNSZXNvdXJjZU1hbmFnZXI6IFJlc291cmNlTWFuYWdlciA9IHRoaXM7XG4gICAgICAgIHRoaXMubnVtU2hhZGVyc0xvYWRlZCA9IDA7XG4gICAgICAgIHRoaXMubnVtU2hhZGVyc1RvTG9hZCA9IG5hbWVkUGF0aHMubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgbmFtZWRQYXRocy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IG5hbWVkUGF0aDogTmFtZWRQYXRoID0gbmFtZWRQYXRoc1tpXTtcbiAgICAgICAgICAgIGxldCBzaGFkZXJOYW1lOiBzdHJpbmcgPSBuYW1lZFBhdGgubmFtZTtcbiAgICAgICAgICAgIGxldCBzaGFkZXJQYXRoOiBzdHJpbmcgPSBuYW1lZFBhdGgucGF0aDtcbiAgICAgICAgICAgIHRoaXMubG9hZFRleHRGaWxlKHNoYWRlclBhdGgsIGZ1bmN0aW9uIChzaGFkZXJTb3VyY2VDb2RlOiBzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzUmVzb3VyY2VNYW5hZ2VyLmdhbWVTaGFkZXJzU291cmNlLnNldChzaGFkZXJOYW1lLCBzaGFkZXJTb3VyY2VDb2RlKTtcbiAgICAgICAgICAgICAgICB0aGlzUmVzb3VyY2VNYW5hZ2VyLmdhbWVTaGFkZXJzU291cmNlUGF0aHMuc2V0KHNoYWRlck5hbWUsIHNoYWRlclBhdGgpO1xuICAgICAgICAgICAgICAgIHRoaXNSZXNvdXJjZU1hbmFnZXIuY29tcGxldGVMb2FkaW5nU2hhZGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQUxMIFNPVVJDRSBDT0RFIElTIExPQURFRCBTTyBETyBXSEFUJ1MgTkVYVFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYnVpbGRQYXRoVG9GaWxlSW5TYW1lRGlyZWN0b3J5KGJhc2VGaWxlV2l0aFBhdGggOiBzdHJpbmcsIHRhcmdldEZpbGVOYW1lIDogc3RyaW5nKSA6IHN0cmluZyB7XG4gICAgICAgIGxldCBsYXN0SW5kZXhPZlNsYXNoOiBudW1iZXIgPSBiYXNlRmlsZVdpdGhQYXRoLmxhc3RJbmRleE9mKCcvJyk7XG4gICAgICAgIGxldCB0YXJnZXRGaWxlUGF0aCA6IHN0cmluZyA9IFwiLi9cIjtcbiAgICAgICAgaWYgKGxhc3RJbmRleE9mU2xhc2ggPiAwKVxuICAgICAgICAgICAgdGFyZ2V0RmlsZVBhdGggPSBiYXNlRmlsZVdpdGhQYXRoLnN1YnN0cmluZygwLCBsYXN0SW5kZXhPZlNsYXNoKTtcbiAgICAgICAgdGFyZ2V0RmlsZVBhdGggKz0gXCIvXCIgKyB0YXJnZXRGaWxlTmFtZTtcbiAgICAgICAgcmV0dXJuIHRhcmdldEZpbGVQYXRoO1xuICAgIH1cblxuICAgIHB1YmxpYyBsb2FkTWFwKCBtYXBQYXRoOiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmluZ1N5c3RlbTogV2ViR0xHYW1lUmVuZGVyaW5nU3lzdGVtLFxuICAgICAgICAgICAgICAgICAgICBzY2VuZUdyYXBoOiBTY2VuZUdyYXBoLFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgbGV0IHRoaXNSZXNvdXJjZU1hbmFnZXI6IFJlc291cmNlTWFuYWdlciA9IHRoaXM7XG4gICAgICAgIHRoaXMubG9hZFRleHRGaWxlKG1hcFBhdGgsIGZ1bmN0aW9uIChqc29uTWFwVGV4dDogc3RyaW5nKSB7XG4gICAgICAgICAgICBsZXQgbWFwRGF0YTogTWFwRGF0YSA9IDxNYXBEYXRhPkpTT04ucGFyc2UoanNvbk1hcFRleHQpO1xuXG4gICAgICAgICAgICAvLyBXRSBPTkxZIFVTRSBPTkUgVElMRSBTRVRcbiAgICAgICAgICAgIGxldCB0aWxlc2V0RmlsZU5hbWU6IHN0cmluZyA9IG1hcERhdGEudGlsZXNldHNbMF0uaW1hZ2U7XG4gICAgICAgICAgICBsZXQgdGlsZXNldEZpbGVQYXRoID0gdGhpc1Jlc291cmNlTWFuYWdlci5idWlsZFBhdGhUb0ZpbGVJblNhbWVEaXJlY3RvcnkobWFwUGF0aCwgdGlsZXNldEZpbGVOYW1lKTtcblxuICAgICAgICAgICAgLy8gVVNFIFRIRSBQQVRIUyBUT0xPQUQgVEhFIFRJTEUgU0VUIFRFWFRVUkVTXG4gICAgICAgICAgICB0aGlzUmVzb3VyY2VNYW5hZ2VyLmxvYWRUZXh0dXJlKHRpbGVzZXRGaWxlUGF0aCwgcmVuZGVyaW5nU3lzdGVtLCBmdW5jdGlvbiAodGlsZXNldFRleHR1cmUgOiBXZWJHTEdhbWVUZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgLy8gTk9XIFRIQVQgVEhFIFRJTEUgU0VUIFRFWFRVUkVTIEhBVkUgQkVFTiBMT0FERUQsXG4gICAgICAgICAgICAgICAgLy8gTE9BRCBBTEwgVEhFSVIgQVNTT0NJQVRFRCBUSUxFU0VUIERBVEFcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hcERhdGEudGlsZXNldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRpbGVTZXREYXRhIDogVGlsZVNldERhdGEgPSBtYXBEYXRhLnRpbGVzZXRzW2ldO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcm93cyA6IG51bWJlciA9IE1hdGguY2VpbCh0aWxlU2V0RGF0YS50aWxlY291bnQvdGlsZVNldERhdGEuY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0aWxlU2V0VG9BZGQgOiBUaWxlU2V0ID0gbmV3IFRpbGVTZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVNldERhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlU2V0RGF0YS5jb2x1bW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVNldERhdGEudGlsZXdpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVTZXREYXRhLnRpbGVoZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVNldERhdGEuc3BhY2luZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlU2V0RGF0YS5pbWFnZXdpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVTZXREYXRhLmltYWdlaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVTZXREYXRhLmZpcnN0Z2lkIC0gMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlc2V0VGV4dHVyZSk7ICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpc1Jlc291cmNlTWFuYWdlci5nYW1lVGlsZVNldHMuc2V0KHRpbGVTZXRUb0FkZC5nZXROYW1lKCksIHRpbGVTZXRUb0FkZCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQU5EIE5PVyBUSEFUIFRIRSBUSUxFIFNFVFMgSEFWRSBCRUVOIExPQURFRFxuICAgICAgICAgICAgICAgIC8vIFdFIENBTiBMT0FEIFRIRSBNQVAnUyBUSUxFRCBMQVlFUlMsIFRIT1VHSCBOT1RFXG4gICAgICAgICAgICAgICAgLy8gSU4gVEhJUyBFWEFNUExFIFdFIEFSRSBHT0lORyBUTyBLRUVQIElUIFNJTVBMRVxuICAgICAgICAgICAgICAgIC8vIEFORCBBU1NVTUUgVEhFUkUgSVMgT05MWSBPTkUgVElMRSBTRVRcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hcERhdGEubGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsYXllckRhdGEgOiBUaWxlZExheWVyRGF0YSA9IG1hcERhdGEubGF5ZXJzW2ldO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRISVMgTElORSBPRiBDT0RFIElTIEZVTktZLCBXRSBDQU4gT05MWSBETyBUSElTIFdJVEggQSBTSU5HTEUgVElMRSBTRVQsXG4gICAgICAgICAgICAgICAgICAgIC8vIFNPIFRPIE1BS0UgVEhJUyBBIFJFQUwgR0FNRSBFTkdJTkUgVEhJUyBXT1VMRCBORUVEIFRPIEJFIEZJWEVEXG4gICAgICAgICAgICAgICAgICAgIGxldCBsYXllclRpbGVTZXQgOiBUaWxlU2V0ID0gdGhpc1Jlc291cmNlTWFuYWdlci5nYW1lVGlsZVNldHMudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFdFIEFSRSBBU1NVTUlORyBFQUNIIExBWUVSIFVTRVMgSlVTVCBPTkUgVElMRSBTRVQsIFdISUNIIE1JR0hUIE5PVFxuICAgICAgICAgICAgICAgICAgICAvLyBORUNFU1NBUklMWSBCRSBUUlVFLiBCVVQgRk9SIE5PVywgTEVUJ1MgSlVTVCBNQUtFIFRIRSBMQVlFUlMgQUxMXG4gICAgICAgICAgICAgICAgICAgIC8vIFVTSU5HIFRIRSBTQU1FIFRJTEUgU0VULCBBREQgVEhFIFRJTEVTLCBBTkQgVEhFTiBBREQgVEhFTSBUTyBUSEUgU0NFTkUgR1JBUEhcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRpbGVkTGF5ZXIgOiBUaWxlZExheWVyID0gbmV3IFRpbGVkTGF5ZXIobGF5ZXJEYXRhLndpZHRoLCBsYXllckRhdGEuaGVpZ2h0LGxheWVyVGlsZVNldCk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbGF5ZXJEYXRhLmRhdGEubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aWxlSW5kZXggOiBudW1iZXIgPSBsYXllckRhdGEuZGF0YVtqXSAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWxlZExheWVyLmFkZFRpbGUodGlsZUluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzY2VuZUdyYXBoLmFkZExheWVyKHRpbGVkTGF5ZXIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBMb2FkcyB0aGUgdGV4dHVyZVBhdGggZmlsZSBhcmd1bWVudCBhbmQgb25jZVxuICAgICAqIHRoYXQgaXMgZG9uZSBpdCBjYWxscyB0aGUgY2FsbGJhY2sgZnVuY3Rpb24uXG4gICAgICovXG4gICAgcHVibGljIGxvYWRUZXh0dXJlKHRleHR1cmVQYXRoOiBzdHJpbmcsXG4gICAgICAgIHJlbmRlcmluZ1N5c3RlbTogV2ViR0xHYW1lUmVuZGVyaW5nU3lzdGVtLFxuICAgICAgICBjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgbGV0IHRoaXNSZXNvdXJjZU1hbmFnZXIgPSB0aGlzO1xuICAgICAgICB0aGlzUmVzb3VyY2VNYW5hZ2VyLmxvYWRJbWFnZSh0ZXh0dXJlUGF0aCwgZnVuY3Rpb24gKHBhdGg6IHN0cmluZywgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIGxldCB0ZXh0dXJlVG9Mb2FkOiBXZWJHTEdhbWVUZXh0dXJlID0gbmV3IFdlYkdMR2FtZVRleHR1cmUoKTtcbiAgICAgICAgICAgIGxldCBpZDogbnVtYmVyID0gdGhpc1Jlc291cmNlTWFuYWdlci5nYW1lVGV4dHVyZXMuc2l6ZTtcbiAgICAgICAgICAgIHRoaXNSZXNvdXJjZU1hbmFnZXIuZ2FtZVRleHR1cmVzLnNldChwYXRoLCB0ZXh0dXJlVG9Mb2FkKTtcbiAgICAgICAgICAgIHJlbmRlcmluZ1N5c3RlbS5pbml0V2ViR0xUZXh0dXJlKHRleHR1cmVUb0xvYWQsIGlkLCBpbWFnZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRleHR1cmVUb0xvYWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogTG9hZHMgYWxsIHRoZSBzcHJpdGUgdHlwZXMgbGlzdGVkIGluIHRoZSBzcHJpdGVUeXBlUGF0aHMgYXJndW1lbnQgYW5kIG9uY2VcbiAgICAgKiB0aGF0IGlzIGRvbmUgaXQgY2FsbHMgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIHB1YmxpYyBsb2FkU3ByaXRlVHlwZXMoIHJlbmRlcmluZ1N5c3RlbSA6IFdlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpdGVUeXBlUGF0aHM6IEFycmF5PE5hbWVkUGF0aD4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIC8vIFRIRU4gTE9BRCBUSEUgVEVYVFVSRVMgV0UnTEwgQkUgVVNJTkdcbiAgICAgICAgdGhpcy5udW1TcHJpdGVUeXBlc1RvTG9hZCA9IHNwcml0ZVR5cGVQYXRocy5sZW5ndGg7XG4gICAgICAgIHRoaXMubnVtU3ByaXRlVHlwZXNMb2FkZWQgPSAwO1xuICAgICAgICBsZXQgdGhpc1Jlc291cmNlTWFuYWdlciA9IHRoaXM7XG4gICAgICAgIGZvciAobGV0IG5hbWVkUGF0aCBvZiBzcHJpdGVUeXBlUGF0aHMpIHtcbiAgICAgICAgICAgIGxldCBuYW1lOiBzdHJpbmcgPSBuYW1lZFBhdGgubmFtZTtcbiAgICAgICAgICAgIGxldCBwYXRoOiBzdHJpbmcgPSBuYW1lZFBhdGgucGF0aDtcbiAgICAgICAgICAgIHRoaXMubG9hZFNwcml0ZVR5cGUocmVuZGVyaW5nU3lzdGVtLCBuYW1lLCBwYXRoLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpc1Jlc291cmNlTWFuYWdlci5jb21wbGV0ZUxvYWRpbmdTcHJpdGVUeXBlKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gUFJJVkFURSBIRUxQRVIgTUVUSE9EU1xuXG4gICAgLy8gTE9BRFMgQSBORVcgSlNPTiBGSUxFIEFORCBVUE9OIENPTVBMRVRJT04gQ0FMTFMgVEhFIGNhbGxiYWNrIEZVTkNUSU9OXG4gICAgcHJpdmF0ZSBsb2FkVGV4dEZpbGUodGV4dEZpbGVQYXRoOiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQge1xuICAgICAgICBsZXQgeG9iajogWE1MSHR0cFJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgeG9iai5vdmVycmlkZU1pbWVUeXBlKFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICAgICAgeG9iai5vcGVuKCdHRVQnLCB0ZXh0RmlsZVBhdGgsIHRydWUpO1xuICAgICAgICB4b2JqLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgoeG9iai5yZWFkeVN0YXRlID09IDQpICYmICh4b2JqLnN0YXR1cyA9PSAyMDApKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soeG9iai5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB4b2JqLnNlbmQobnVsbCk7XG4gICAgfVxuXG4gICAgLy8gQ0hFQ0tTIFRPIFNFRSBJRiBBTEwgU0hBREVSIExPQURJTkcgSVMgQ09NUExFVEUsIElGIFlFUywgY2FsbGJhY2sgSVMgSU5WT0tFRFxuICAgIHByaXZhdGUgY29tcGxldGVMb2FkaW5nU2hhZGVyKGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQge1xuICAgICAgICB0aGlzLm51bVNoYWRlcnNMb2FkZWQrKztcbiAgICAgICAgaWYgKHRoaXMubnVtU2hhZGVyc0xvYWRlZCA9PT0gdGhpcy5udW1TaGFkZXJzVG9Mb2FkKSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ0hFQ0tTIFRPIFNFRSBJRiBBTEwgU1BSSVRFIFRZUEUgTE9BRElORyBJUyBDT01QTEVURSwgSUYgWUVTLCBjYWxsYmFjayBJUyBJTlZPS0VEXG4gICAgcHJpdmF0ZSBjb21wbGV0ZUxvYWRpbmdTcHJpdGVUeXBlKGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQge1xuICAgICAgICB0aGlzLm51bVNwcml0ZVR5cGVzTG9hZGVkKys7XG4gICAgICAgIGlmICh0aGlzLm51bVNwcml0ZVR5cGVzTG9hZGVkID09PSB0aGlzLm51bVNwcml0ZVR5cGVzVG9Mb2FkKSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ0hFQ0tTIFRPIFNFRSBJRiBBTEwgVEVYVFVSRSBMT0FESU5HIElTIENPTVBMRVRFLCBJRiBZRVMsIGNhbGxiYWNrIElTIElOVk9LRURcbiAgICBwcml2YXRlIGNvbXBsZXRlTG9hZGluZ1RleHR1cmUoY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMubnVtVGV4dHVyZXNMb2FkZWQrKztcbiAgICAgICAgaWYgKHRoaXMubnVtVGV4dHVyZXNMb2FkZWQgPT09IHRoaXMubnVtVGV4dHVyZXNUb0xvYWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkcyBhbiBJbWFnZSBpbnRvIFJBTSBhbmQgb25jZSB0aGF0IHByb2Nlc3MgaXMgY29tcGxldGUgaXRcbiAgICAgKiBjYWxscyB0aGUgY2FsbGJhY2sgbWV0aG9kIGFyZ3VtZW50LCBwcmVzdW1hYmx5IHRvIHRoZW4gbG9hZFxuICAgICAqIGl0IGludG8gR1BVIG1lbW9yeS5cbiAgICAgKi9cbiAgICBwcml2YXRlIGxvYWRJbWFnZShwYXRoOiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQge1xuICAgICAgICAvLyBNQUtFIFRIRSBJTUFHRVxuICAgICAgICB2YXIgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcblxuICAgICAgICAvLyBPTkNFIFRIRSBJTUFHRSBMT0FESU5HIElTIENPTVBMRVRFRCwgVEhFIENBTExCQUNLIFdJTEwgR0VUIENBTExFRFxuICAgICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhwYXRoLCBpbWFnZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTVEFSVCBJTUFHRSBMT0FESU5HXG4gICAgICAgIGltYWdlLnNyYyA9IHBhdGg7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGxvYWRzIGEgc2luZ2xlIHNwcml0ZSB0eXBlIHJlc291cmNlIGZyb20gYSBKU09OIGZpbGUgYW5kIHVwb25cbiAgICAgKiBjb21wbGV0aW9uIGNhbGxzIHRoZSBjYWxsYmFjayBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBwcml2YXRlIGxvYWRTcHJpdGVUeXBlKHJlbmRlcmluZ1N5c3RlbSA6IFdlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbSwgc3ByaXRlVHlwZU5hbWU6IHN0cmluZywganNvbkZpbGVQYXRoOiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQge1xuICAgICAgICBsZXQgdGhpc1Jlc291cmNlTWFuYWdlcjogUmVzb3VyY2VNYW5hZ2VyID0gdGhpcztcbiAgICAgICAgdGhpcy5sb2FkVGV4dEZpbGUoanNvbkZpbGVQYXRoLCBmdW5jdGlvbiAoanNvblRleHQ6IHN0cmluZykge1xuICAgICAgICAgICAgdGhpc1Jlc291cmNlTWFuYWdlci5sb2FkU3ByaXRlVHlwZURhdGEocmVuZGVyaW5nU3lzdGVtLCBqc29uRmlsZVBhdGgsIGpzb25UZXh0LCBmdW5jdGlvbihzcHJpdGVUeXBlIDogQW5pbWF0ZWRTcHJpdGVUeXBlKSB7XG4gICAgICAgICAgICAgICAgdGhpc1Jlc291cmNlTWFuYWdlci5nYW1lU3ByaXRlVHlwZXMuc2V0KHNwcml0ZVR5cGVOYW1lLCBzcHJpdGVUeXBlKTtcbiAgICAgICAgICAgICAgICB0aGlzUmVzb3VyY2VNYW5hZ2VyLmdhbWVTcHJpdGVUeXBlUGF0aHMuc2V0KHNwcml0ZVR5cGVOYW1lLCBqc29uRmlsZVBhdGgpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBUaGlzIGhlbHBlciBmdW5jdGlvbiBsb2FkcyBhbGwgdGhlIGpzb24gdGV4dCBpbnRvIGFuIEFuaW1hdGVkU3ByaXRlVHlwZVxuICAgICAqIG9iamVjdCBhbmQgcmV0dXJucyBpdC5cbiAgICAgKi9cbiAgICBwcml2YXRlIGxvYWRTcHJpdGVUeXBlRGF0YSA9ICggIHJlbmRlcmluZ1N5c3RlbSA6IFdlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpdGVGaWxlUGF0aCA6IHN0cmluZywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uVGV4dDogc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgOiBGdW5jdGlvbik6IHZvaWQgPT4ge1xuICAgICAgICBsZXQganNvbkRhdGE6IFNwcml0ZVR5cGVEYXRhID0gPFNwcml0ZVR5cGVEYXRhPkpTT04ucGFyc2UoanNvblRleHQpO1xuICAgICAgICBsZXQgdGV4dHVyZVBhdGggOiBzdHJpbmcgPSB0aGlzLmJ1aWxkUGF0aFRvRmlsZUluU2FtZURpcmVjdG9yeShzcHJpdGVGaWxlUGF0aCwganNvbkRhdGEuc3ByaXRlU2hlZXRJbWFnZSk7XG4gICAgICAgIGxldCB0aGlzUmVzb3VyY2VNYW5hZ2VyIDogUmVzb3VyY2VNYW5hZ2VyID0gdGhpcztcbiAgICAgICAgdGhpcy5sb2FkVGV4dHVyZSh0ZXh0dXJlUGF0aCwgcmVuZGVyaW5nU3lzdGVtLCBmdW5jdGlvbihzcHJpdGVzaGVldFRleHR1cmUgOiBXZWJHTEdhbWVUZXh0dXJlKSB7XG4gICAgICAgICAgICBsZXQgc3ByaXRlV2lkdGg6IG51bWJlciA9IGpzb25EYXRhLnNwcml0ZVdpZHRoO1xuICAgICAgICAgICAgbGV0IHNwcml0ZUhlaWdodDogbnVtYmVyID0ganNvbkRhdGEuc3ByaXRlSGVpZ2h0O1xuICAgICAgICAgICAgbGV0IGFuaW1hdGVkU3ByaXRlVHlwZSA9IG5ldyBBbmltYXRlZFNwcml0ZVR5cGUoc3ByaXRlc2hlZXRUZXh0dXJlLCBzcHJpdGVXaWR0aCwgc3ByaXRlSGVpZ2h0KTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwganNvbkRhdGEuYW5pbWF0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBhbmltYXRpb24gPSA8QW5pbWF0aW9uU3RhdGVEYXRhPmpzb25EYXRhLmFuaW1hdGlvbnNbaV07XG4gICAgICAgICAgICAgICAgYW5pbWF0ZWRTcHJpdGVUeXBlLmFkZEFuaW1hdGlvbihhbmltYXRpb24ubmFtZSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBhbmltYXRpb24uZnJhbWVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmcmFtZSA9IGFuaW1hdGlvbi5mcmFtZXNbal07XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGVkU3ByaXRlVHlwZS5hZGRBbmltYXRpb25GcmFtZShhbmltYXRpb24ubmFtZSwgZnJhbWUuaW5kZXgsIGZyYW1lLmR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjayhhbmltYXRlZFNwcml0ZVR5cGUpO1xuICAgICAgICB9KTtcbiAgICB9XG59IiwiZXhwb3J0IGFic3RyYWN0IGNsYXNzIEdhbWVMb29wVGVtcGxhdGUge1xuICAgIC8vIEFMTCBJTlNUQU5DRSBWQVJJQUJMRVMgV0lMTCBCRSBJTklUSUFMSVpFRCBWSUEgVEhFIENPTlNUUlVDVE9SXG4gICAgcHJpdmF0ZSBmcHM6IG51bWJlcjtcbiAgICBwcml2YXRlIHNpbXVsYXRpb25UaW1lc3RlcDogbnVtYmVyO1xuICAgIHByaXZhdGUgZnJhbWVEZWx0YTogbnVtYmVyO1xuICAgIHByaXZhdGUgbGFzdEZyYW1lVGltZU1zOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBmcHNBbHBoYTogbnVtYmVyO1xuICAgIHByaXZhdGUgZnBzVXBkYXRlSW50ZXJ2YWw6IG51bWJlcjtcbiAgICBwcml2YXRlIGxhc3RGcHNVcGRhdGU6IG51bWJlcjtcbiAgICBwcml2YXRlIGZyYW1lc1NpbmNlTGFzdEZwc1VwZGF0ZTogbnVtYmVyO1xuICAgIHByaXZhdGUgbnVtVXBkYXRlU3RlcHM6IG51bWJlcjtcbiAgICBwcml2YXRlIG1pbkZyYW1lRGVsYXk6IG51bWJlcjtcbiAgICBwcml2YXRlIHJ1bm5pbmc6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBzdGFydGVkOiBib29sZWFuO1xuICAgIHByaXZhdGUgcGFuaWM6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSByYWY6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBbiBleHBvbmVudGlhbCBtb3ZpbmcgYXZlcmFnZSBvZiB0aGUgZnJhbWVzIHBlciBzZWNvbmQuXG4gICAgICAgIHRoaXMuZnBzID0gNjA7XG5cbiAgICAgICAgLy8gVGhlIGFtb3VudCBvZiB0aW1lIChpbiBtaWxsaXNlY29uZHMpIHRvIHNpbXVsYXRlIGVhY2ggdGltZSB1cGRhdGUoKSBydW5zLlxuICAgICAgICAvLyBTZWUgYE1haW5Mb29wLnNldFNpbXVsYXRpb25UaW1lc3RlcCgpYCBmb3IgZGV0YWlscy5cbiAgICAgICAgdGhpcy5zaW11bGF0aW9uVGltZXN0ZXAgPSAxMDAwIC8gdGhpcy5mcHM7XG5cbiAgICAgICAgLy8gVGhlIGN1bXVsYXRpdmUgYW1vdW50IG9mIGluLWFwcCB0aW1lIHRoYXQgaGFzbid0IGJlZW4gc2ltdWxhdGVkIHlldC5cbiAgICAgICAgLy8gU2VlIHRoZSBjb21tZW50cyBpbnNpZGUgYW5pbWF0ZSgpIGZvciBkZXRhaWxzLlxuICAgICAgICB0aGlzLmZyYW1lRGVsdGEgPSAwO1xuXG4gICAgICAgIC8vIFRoZSB0aW1lc3RhbXAgaW4gbWlsbGlzZWNvbmRzIG9mIHRoZSBsYXN0IHRpbWUgdGhlIG1haW4gbG9vcCB3YXMgcnVuLlxuICAgICAgICAvLyBVc2VkIHRvIGNvbXB1dGUgdGhlIHRpbWUgZWxhcHNlZCBiZXR3ZWVuIGZyYW1lcy5cbiAgICAgICAgdGhpcy5sYXN0RnJhbWVUaW1lTXMgPSAwO1xuXG4gICAgICAgIC8vIEEgZmFjdG9yIHRoYXQgYWZmZWN0cyBob3cgaGVhdmlseSB0byB3ZWlnaHQgbW9yZSByZWNlbnQgc2Vjb25kcydcbiAgICAgICAgLy8gcGVyZm9ybWFuY2Ugd2hlbiBjYWxjdWxhdGluZyB0aGUgYXZlcmFnZSBmcmFtZXMgcGVyIHNlY29uZC4gVmFsaWQgdmFsdWVzXG4gICAgICAgIC8vIHJhbmdlIGZyb20gemVybyB0byBvbmUgaW5jbHVzaXZlLiBIaWdoZXIgdmFsdWVzIHJlc3VsdCBpbiB3ZWlnaHRpbmcgbW9yZVxuICAgICAgICAvLyByZWNlbnQgc2Vjb25kcyBtb3JlIGhlYXZpbHkuXG4gICAgICAgIHRoaXMuZnBzQWxwaGEgPSAwLjk7XG5cbiAgICAgICAgLy8gVGhlIG1pbmltdW0gZHVyYXRpb24gYmV0d2VlbiB1cGRhdGVzIHRvIHRoZSBmcmFtZXMtcGVyLXNlY29uZCBlc3RpbWF0ZS5cbiAgICAgICAgLy8gSGlnaGVyIHZhbHVlcyBpbmNyZWFzZSBhY2N1cmFjeSwgYnV0IHJlc3VsdCBpbiBzbG93ZXIgdXBkYXRlcy5cbiAgICAgICAgdGhpcy5mcHNVcGRhdGVJbnRlcnZhbCA9IDEwMDA7XG5cbiAgICAgICAgLy8gVGhlIHRpbWVzdGFtcCAoaW4gbWlsbGlzZWNvbmRzKSBvZiB0aGUgbGFzdCB0aW1lIHRoZSBgZnBzYCBtb3ZpbmdcbiAgICAgICAgLy8gYXZlcmFnZSB3YXMgdXBkYXRlZC5cbiAgICAgICAgdGhpcy5sYXN0RnBzVXBkYXRlID0gMDtcblxuICAgICAgICAvLyBUaGUgbnVtYmVyIG9mIGZyYW1lcyBkZWxpdmVyZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgYGZwc2AgbW92aW5nXG4gICAgICAgIC8vIGF2ZXJhZ2Ugd2FzIHVwZGF0ZWQgKGkuZS4gc2luY2UgYGxhc3RGcHNVcGRhdGVgKS5cbiAgICAgICAgdGhpcy5mcmFtZXNTaW5jZUxhc3RGcHNVcGRhdGUgPSAwO1xuXG4gICAgICAgIC8vIFRoZSBudW1iZXIgb2YgdGltZXMgdXBkYXRlKCkgaXMgY2FsbGVkIGluIGEgZ2l2ZW4gZnJhbWUuIFRoaXMgaXMgb25seVxuICAgICAgICAvLyByZWxldmFudCBpbnNpZGUgb2YgYW5pbWF0ZSgpLCBidXQgYSByZWZlcmVuY2UgaXMgaGVsZCBleHRlcm5hbGx5IHNvIHRoYXRcbiAgICAgICAgLy8gdGhpcyB2YXJpYWJsZSBpcyBub3QgbWFya2VkIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24gZXZlcnkgdGltZSB0aGUgbWFpblxuICAgICAgICAvLyBsb29wIHJ1bnMuXG4gICAgICAgIHRoaXMubnVtVXBkYXRlU3RlcHMgPSAwO1xuXG4gICAgICAgIC8vIFRoZSBtaW5pbXVtIGFtb3VudCBvZiB0aW1lIGluIG1pbGxpc2Vjb25kcyB0aGF0IG11c3QgcGFzcyBzaW5jZSB0aGUgbGFzdFxuICAgICAgICAvLyBmcmFtZSB3YXMgZXhlY3V0ZWQgYmVmb3JlIGFub3RoZXIgZnJhbWUgY2FuIGJlIGV4ZWN1dGVkLiBUaGVcbiAgICAgICAgLy8gbXVsdGlwbGljYXRpdmUgaW52ZXJzZSBjYXBzIHRoZSBGUFMgKHRoZSBkZWZhdWx0IG9mIHplcm8gbWVhbnMgdGhlcmUgaXNcbiAgICAgICAgLy8gbm8gY2FwKS5cbiAgICAgICAgdGhpcy5taW5GcmFtZURlbGF5ID0gMDtcblxuICAgICAgICAvLyBXaGV0aGVyIHRoZSBtYWluIGxvb3AgaXMgcnVubmluZy5cbiAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XG5cbiAgICAgICAgLy8gYHRydWVgIGlmIGBNYWluTG9vcC5zdGFydCgpYCBoYXMgYmVlbiBjYWxsZWQgYW5kIHRoZSBtb3N0IHJlY2VudCB0aW1lIGl0XG4gICAgICAgIC8vIHdhcyBjYWxsZWQgaGFzIG5vdCBiZWVuIGZvbGxvd2VkIGJ5IGEgY2FsbCB0byBgTWFpbkxvb3Auc3RvcCgpYC4gVGhpcyBpc1xuICAgICAgICAvLyBkaWZmZXJlbnQgdGhhbiBgcnVubmluZ2AgYmVjYXVzZSB0aGVyZSBpcyBhIGRlbGF5IG9mIGEgZmV3IG1pbGxpc2Vjb25kc1xuICAgICAgICAvLyBhZnRlciBgTWFpbkxvb3Auc3RhcnQoKWAgaXMgY2FsbGVkIGJlZm9yZSB0aGUgYXBwbGljYXRpb24gaXMgY29uc2lkZXJlZFxuICAgICAgICAvLyBcInJ1bm5pbmcuXCIgVGhpcyBkZWxheSBpcyBkdWUgdG8gd2FpdGluZyBmb3IgdGhlIG5leHQgZnJhbWUuXG4gICAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIFdoZXRoZXIgdGhlIHNpbXVsYXRpb24gaGFzIGZhbGxlbiB0b28gZmFyIGJlaGluZCByZWFsIHRpbWUuXG4gICAgICAgIC8vIFNwZWNpZmljYWxseSwgYHBhbmljYCB3aWxsIGJlIHNldCB0byBgdHJ1ZWAgaWYgdG9vIG1hbnkgdXBkYXRlcyBvY2N1ciBpblxuICAgICAgICAvLyBvbmUgZnJhbWUuIFRoaXMgaXMgb25seSByZWxldmFudCBpbnNpZGUgb2YgYW5pbWF0ZSgpLCBidXQgYSByZWZlcmVuY2UgaXNcbiAgICAgICAgLy8gaGVsZCBleHRlcm5hbGx5IHNvIHRoYXQgdGhpcyB2YXJpYWJsZSBpcyBub3QgbWFya2VkIGZvciBnYXJiYWdlXG4gICAgICAgIC8vIGNvbGxlY3Rpb24gZXZlcnkgdGltZSB0aGUgbWFpbiBsb29wIHJ1bnMuXG4gICAgICAgIHRoaXMucGFuaWMgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGhvdyBtYW55IG1pbGxpc2Vjb25kcyBzaG91bGQgYmUgc2ltdWxhdGVkIGJ5IGV2ZXJ5IHJ1biBvZiB1cGRhdGUoKS5cbiAgICAgKlxuICAgICAqIFNlZSBgTWFpbkxvb3Auc2V0U2ltdWxhdGlvblRpbWVzdGVwKClgIGZvciBkZXRhaWxzIG9uIHRoaXMgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XG4gICAgICogICBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IHNob3VsZCBiZSBzaW11bGF0ZWQgYnkgZXZlcnkgcnVuIG9mXG4gICAgICogICB7QGxpbmsgI3NldFVwZGF0ZSB1cGRhdGV9KCkuXG4gICAgICovXG4gICAgZ2V0U2ltdWxhdGlvblRpbWVzdGVwKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpbXVsYXRpb25UaW1lc3RlcDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIGhvdyBtYW55IG1pbGxpc2Vjb25kcyBzaG91bGQgYmUgc2ltdWxhdGVkIGJ5IGV2ZXJ5IHJ1biBvZiB1cGRhdGUoKS5cbiAgICAgKlxuICAgICAqIFRoZSBwZXJjZWl2ZWQgZnJhbWVzIHBlciBzZWNvbmQgKEZQUykgaXMgZWZmZWN0aXZlbHkgY2FwcGVkIGF0IHRoZVxuICAgICAqIG11bHRpcGxpY2F0aXZlIGludmVyc2Ugb2YgdGhlIHNpbXVsYXRpb24gdGltZXN0ZXAuIFRoYXQgaXMsIGlmIHRoZVxuICAgICAqIHRpbWVzdGVwIGlzIDEwMDAgLyA2MCAod2hpY2ggaXMgdGhlIGRlZmF1bHQpLCB0aGVuIHRoZSBtYXhpbXVtIHBlcmNlaXZlZFxuICAgICAqIEZQUyBpcyBlZmZlY3RpdmVseSA2MC4gRGVjcmVhc2luZyB0aGUgdGltZXN0ZXAgaW5jcmVhc2VzIHRoZSBtYXhpbXVtXG4gICAgICogcGVyY2VpdmVkIEZQUyBhdCB0aGUgY29zdCBvZiBydW5uaW5nIHtAbGluayAjc2V0VXBkYXRlIHVwZGF0ZX0oKSBtb3JlXG4gICAgICogdGltZXMgcGVyIGZyYW1lIGF0IGxvd2VyIGZyYW1lIHJhdGVzLiBTaW5jZSBydW5uaW5nIHVwZGF0ZSgpIG1vcmUgdGltZXNcbiAgICAgKiB0YWtlcyBtb3JlIHRpbWUgdG8gcHJvY2VzcywgdGhpcyBjYW4gYWN0dWFsbHkgc2xvdyBkb3duIHRoZSBmcmFtZSByYXRlLlxuICAgICAqIEFkZGl0aW9uYWxseSwgaWYgdGhlIGFtb3VudCBvZiB0aW1lIGl0IHRha2VzIHRvIHJ1biB1cGRhdGUoKSBleGNlZWRzIG9yXG4gICAgICogdmVyeSBuZWFybHkgZXhjZWVkcyB0aGUgdGltZXN0ZXAsIHRoZSBhcHBsaWNhdGlvbiB3aWxsIGZyZWV6ZSBhbmQgY3Jhc2hcbiAgICAgKiBpbiBhIHNwaXJhbCBvZiBkZWF0aCAodW5sZXNzIGl0IGlzIHJlc2N1ZWQ7IHNlZSBgTWFpbkxvb3Auc2V0RW5kKClgIGZvclxuICAgICAqIGFuIGV4cGxhbmF0aW9uIG9mIHdoYXQgY2FuIGJlIGRvbmUgaWYgYSBzcGlyYWwgb2YgZGVhdGggaXMgb2NjdXJyaW5nKS5cbiAgICAgKlxuICAgICAqIFRoZSBleGNlcHRpb24gdG8gdGhpcyBpcyB0aGF0IGludGVycG9sYXRpbmcgYmV0d2VlbiB1cGRhdGVzIGZvciBlYWNoXG4gICAgICogcmVuZGVyIGNhbiBpbmNyZWFzZSB0aGUgcGVyY2VpdmVkIGZyYW1lIHJhdGUgYW5kIHJlZHVjZSB2aXN1YWxcbiAgICAgKiBzdHV0dGVyaW5nLiBTZWUgYE1haW5Mb29wLnNldERyYXcoKWAgZm9yIGFuIGV4cGxhbmF0aW9uIG9mIGhvdyB0byBkb1xuICAgICAqIHRoaXMuXG4gICAgICpcbiAgICAgKiBJZiB5b3UgYXJlIGNvbnNpZGVyaW5nIGRlY3JlYXNpbmcgdGhlIHNpbXVsYXRpb24gdGltZXN0ZXAgaW4gb3JkZXIgdG9cbiAgICAgKiByYWlzZSB0aGUgbWF4aW11bSBwZXJjZWl2ZWQgRlBTLCBrZWVwIGluIG1pbmQgdGhhdCBtb3N0IG1vbml0b3JzIGNhbid0XG4gICAgICogZGlzcGxheSBtb3JlIHRoYW4gNjAgRlBTLiBXaGV0aGVyIGh1bWFucyBjYW4gdGVsbCB0aGUgZGlmZmVyZW5jZSBhbW9uZ1xuICAgICAqIGhpZ2ggZnJhbWUgcmF0ZXMgZGVwZW5kcyBvbiB0aGUgYXBwbGljYXRpb24sIGJ1dCBmb3IgcmVmZXJlbmNlLCBmaWxtIGlzXG4gICAgICogdXN1YWxseSBkaXNwbGF5ZWQgYXQgMjQgRlBTLCBvdGhlciB2aWRlb3MgYXQgMzAgRlBTLCBtb3N0IGdhbWVzIGFyZVxuICAgICAqIGFjY2VwdGFibGUgYWJvdmUgMzAgRlBTLCBhbmQgdmlydHVhbCByZWFsaXR5IG1pZ2h0IHJlcXVpcmUgNzUgRlBTIHRvXG4gICAgICogZmVlbCBuYXR1cmFsLiBTb21lIGdhbWluZyBtb25pdG9ycyBnbyB1cCB0byAxNDQgRlBTLiBTZXR0aW5nIHRoZVxuICAgICAqIHRpbWVzdGVwIGJlbG93IDEwMDAgLyAxNDQgaXMgZGlzY291cmFnZWQgYW5kIGJlbG93IDEwMDAgLyAyNDAgaXNcbiAgICAgKiBzdHJvbmdseSBkaXNjb3VyYWdlZC4gVGhlIGRlZmF1bHQgb2YgMTAwMCAvIDYwIGlzIGdvb2QgaW4gbW9zdCBjYXNlcy5cbiAgICAgKlxuICAgICAqIFRoZSBzaW11bGF0aW9uIHRpbWVzdGVwIHNob3VsZCB0eXBpY2FsbHkgb25seSBiZSBjaGFuZ2VkIGF0XG4gICAgICogZGV0ZXJtaW5pc3RpYyB0aW1lcyAoZS5nLiBiZWZvcmUgdGhlIG1haW4gbG9vcCBzdGFydHMgZm9yIHRoZSBmaXJzdFxuICAgICAqIHRpbWUsIGFuZCBub3QgaW4gcmVzcG9uc2UgdG8gdXNlciBpbnB1dCBvciBzbG93IGZyYW1lIHJhdGVzKSB0byBhdm9pZFxuICAgICAqIGludHJvZHVjaW5nIG5vbi1kZXRlcm1pbmlzdGljIGJlaGF2aW9yLiBUaGUgdXBkYXRlIHRpbWVzdGVwIHNob3VsZCBiZVxuICAgICAqIHRoZSBzYW1lIGZvciBhbGwgcGxheWVycy91c2VycyBpbiBtdWx0aXBsYXllci9tdWx0aS11c2VyIGFwcGxpY2F0aW9ucy5cbiAgICAgKlxuICAgICAqIFNlZSBhbHNvIGBNYWluTG9vcC5nZXRTaW11bGF0aW9uVGltZXN0ZXAoKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdGltZXN0ZXBcbiAgICAgKiAgIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgc2hvdWxkIGJlIHNpbXVsYXRlZCBieSBldmVyeSBydW4gb2ZcbiAgICAgKiAgIHtAbGluayAjc2V0VXBkYXRlIHVwZGF0ZX0oKS5cbiAgICAgKi9cbiAgICBzZXRTaW11bGF0aW9uVGltZXN0ZXAodGltZXN0ZXA6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLnNpbXVsYXRpb25UaW1lc3RlcCA9IHRpbWVzdGVwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGV4cG9uZW50aWFsIG1vdmluZyBhdmVyYWdlIG9mIHRoZSBmcmFtZXMgcGVyIHNlY29uZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge051bWJlcn1cbiAgICAgKiAgIFRoZSBleHBvbmVudGlhbCBtb3ZpbmcgYXZlcmFnZSBvZiB0aGUgZnJhbWVzIHBlciBzZWNvbmQuXG4gICAgICovXG4gICAgZ2V0RlBTKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmZwcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBtYXhpbXVtIGZyYW1lIHJhdGUuXG4gICAgICpcbiAgICAgKiBPdGhlciBmYWN0b3JzIGFsc28gbGltaXQgdGhlIEZQUzsgc2VlIGBNYWluTG9vcC5zZXRTaW11bGF0aW9uVGltZXN0ZXBgXG4gICAgICogZm9yIGRldGFpbHMuXG4gICAgICpcbiAgICAgKiBTZWUgYWxzbyBgTWFpbkxvb3Auc2V0TWF4QWxsb3dlZEZQUygpYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge051bWJlcn1cbiAgICAgKiAgIFRoZSBtYXhpbXVtIG51bWJlciBvZiBmcmFtZXMgcGVyIHNlY29uZCBhbGxvd2VkLlxuICAgICAqL1xuICAgIGdldE1heEFsbG93ZWRGUFMoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIDEwMDAgLyB0aGlzLm1pbkZyYW1lRGVsYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBhIG1heGltdW0gZnJhbWUgcmF0ZS5cbiAgICAgKlxuICAgICAqIFNlZSBhbHNvIGBNYWluTG9vcC5nZXRNYXhBbGxvd2VkRlBTKClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtmcHM9SW5maW5pdHldXG4gICAgICogICBUaGUgbWF4aW11bSBudW1iZXIgb2YgZnJhbWVzIHBlciBzZWNvbmQgdG8gZXhlY3V0ZS4gSWYgSW5maW5pdHkgb3Igbm90XG4gICAgICogICBwYXNzZWQsIHRoZXJlIHdpbGwgYmUgbm8gRlBTIGNhcCAoYWx0aG91Z2ggb3RoZXIgZmFjdG9ycyBkbyBsaW1pdCB0aGVcbiAgICAgKiAgIEZQUzsgc2VlIGBNYWluTG9vcC5zZXRTaW11bGF0aW9uVGltZXN0ZXBgIGZvciBkZXRhaWxzKS4gSWYgemVybywgdGhpc1xuICAgICAqICAgd2lsbCBzdG9wIHRoZSBsb29wLCBhbmQgd2hlbiB0aGUgbG9vcCBpcyBuZXh0IHN0YXJ0ZWQsIGl0IHdpbGwgcmV0dXJuXG4gICAgICogICB0byB0aGUgcHJldmlvdXMgbWF4aW11bSBmcmFtZSByYXRlLiBQYXNzaW5nIG5lZ2F0aXZlIHZhbHVlcyB3aWxsIHN0YWxsXG4gICAgICogICB0aGUgbG9vcCB1bnRpbCB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBhZ2FpbiB3aXRoIGEgcG9zaXRpdmUgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAY2hhaW5hYmxlXG4gICAgICovXG4gICAgc2V0TWF4QWxsb3dlZEZQUyhmcHM6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBpZiAodHlwZW9mIGZwcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGZwcyA9IEluZmluaXR5O1xuICAgICAgICB9XG4gICAgICAgIGlmIChmcHMgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gRGl2aWRpbmcgYnkgSW5maW5pdHkgcmV0dXJucyB6ZXJvLlxuICAgICAgICAgICAgdGhpcy5taW5GcmFtZURlbGF5ID0gMTAwMCAvIGZwcztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBhbW91bnQgb2YgdGltZSB0aGF0IGhhcyBub3QgeWV0IGJlZW4gc2ltdWxhdGVkIHRvIHplcm8uXG4gICAgICpcbiAgICAgKiBUaGlzIGludHJvZHVjZXMgbm9uLWRldGVybWluaXN0aWMgYmVoYXZpb3IgaWYgY2FsbGVkIGFmdGVyIHRoZVxuICAgICAqIGFwcGxpY2F0aW9uIGhhcyBzdGFydGVkIHJ1bm5pbmcgKHVubGVzcyBpdCBpcyBiZWluZyByZXNldCwgaW4gd2hpY2ggY2FzZVxuICAgICAqIGl0IGRvZXNuJ3QgbWF0dGVyKS4gSG93ZXZlciwgdGhpcyBjYW4gYmUgdXNlZnVsIGluIGNhc2VzIHdoZXJlIHRoZVxuICAgICAqIGFtb3VudCBvZiB0aW1lIHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBzaW11bGF0ZWQgaGFzIGdyb3duIHZlcnkgbGFyZ2VcbiAgICAgKiAoZm9yIGV4YW1wbGUsIHdoZW4gdGhlIGFwcGxpY2F0aW9uJ3MgdGFiIGdldHMgcHV0IGluIHRoZSBiYWNrZ3JvdW5kIGFuZFxuICAgICAqIHRoZSBicm93c2VyIHRocm90dGxlcyB0aGUgdGltZXJzIGFzIGEgcmVzdWx0KS4gSW4gYXBwbGljYXRpb25zIHdpdGhcbiAgICAgKiBsb2Nrc3RlcCB0aGUgcGxheWVyIHdvdWxkIGdldCBkcm9wcGVkLCBidXQgaW4gb3RoZXIgbmV0d29ya2VkXG4gICAgICogYXBwbGljYXRpb25zIGl0IG1heSBiZSBuZWNlc3NhcnkgdG8gc25hcCBvciBlYXNlIHRoZSBwbGF5ZXIvdXNlciB0byB0aGVcbiAgICAgKiBhdXRob3JpdGF0aXZlIHN0YXRlIGFuZCBkaXNjYXJkIHBlbmRpbmcgdXBkYXRlcyBpbiB0aGUgcHJvY2Vzcy4gSW5cbiAgICAgKiBub24tbmV0d29ya2VkIGFwcGxpY2F0aW9ucyBpdCBtYXkgYWxzbyBiZSBhY2NlcHRhYmxlIHRvIHNpbXBseSByZXN1bWVcbiAgICAgKiB0aGUgYXBwbGljYXRpb24gd2hlcmUgaXQgbGFzdCBsZWZ0IG9mZiBhbmQgaWdub3JlIHRoZSBhY2N1bXVsYXRlZFxuICAgICAqIHVuc2ltdWxhdGVkIHRpbWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XG4gICAgICogICBUaGUgY3VtdWxhdGl2ZSBhbW91bnQgb2YgZWxhcHNlZCB0aW1lIGluIG1pbGxpc2Vjb25kcyB0aGF0IGhhcyBub3QgeWV0XG4gICAgICogICBiZWVuIHNpbXVsYXRlZCwgYnV0IGlzIGJlaW5nIGRpc2NhcmRlZCBhcyBhIHJlc3VsdCBvZiBjYWxsaW5nIHRoaXNcbiAgICAgKiAgIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIHJlc2V0RnJhbWVEZWx0YSgpIDogbnVtYmVyIHtcbiAgICAgICAgdmFyIG9sZEZyYW1lRGVsdGEgPSB0aGlzLmZyYW1lRGVsdGE7XG4gICAgICAgIHRoaXMuZnJhbWVEZWx0YSA9IDA7XG4gICAgICAgIHJldHVybiBvbGRGcmFtZURlbHRhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgbWFpbiBsb29wLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoZSBhcHBsaWNhdGlvbiBpcyBub3QgY29uc2lkZXJlZCBcInJ1bm5pbmdcIiBpbW1lZGlhdGVseSBhZnRlclxuICAgICAqIHRoaXMgZnVuY3Rpb24gcmV0dXJuczsgcmF0aGVyLCBpdCBpcyBjb25zaWRlcmVkIFwicnVubmluZ1wiIGFmdGVyIHRoZVxuICAgICAqIGFwcGxpY2F0aW9uIGRyYXdzIGl0cyBmaXJzdCBmcmFtZS4gVGhlIGRpc3RpbmN0aW9uIGlzIHRoYXQgZXZlbnRcbiAgICAgKiBoYW5kbGVycyBzaG91bGQgcmVtYWluIHBhdXNlZCB1bnRpbCB0aGUgYXBwbGljYXRpb24gaXMgcnVubmluZywgZXZlblxuICAgICAqIGFmdGVyIGBNYWluTG9vcC5zdGFydCgpYCBpcyBjYWxsZWQuIENoZWNrIGBNYWluTG9vcC5pc1J1bm5pbmcoKWAgZm9yIHRoZVxuICAgICAqIGN1cnJlbnQgc3RhdHVzLiBUbyBhY3QgYWZ0ZXIgdGhlIGFwcGxpY2F0aW9uIHN0YXJ0cywgcmVnaXN0ZXIgYSBjYWxsYmFja1xuICAgICAqIHdpdGggcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCkgYWZ0ZXIgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIGFuZCBleGVjdXRlIHRoZVxuICAgICAqIGFjdGlvbiBpbiB0aGF0IGNhbGxiYWNrLiBJdCBpcyBzYWZlIHRvIGNhbGwgYE1haW5Mb29wLnN0YXJ0KClgIG11bHRpcGxlXG4gICAgICogdGltZXMgZXZlbiBiZWZvcmUgdGhlIGFwcGxpY2F0aW9uIHN0YXJ0cyBydW5uaW5nIGFuZCB3aXRob3V0IGNhbGxpbmdcbiAgICAgKiBgTWFpbkxvb3Auc3RvcCgpYCBpbiBiZXR3ZWVuLCBhbHRob3VnaCB0aGVyZSBpcyBubyByZWFzb24gdG8gZG8gdGhpcztcbiAgICAgKiB0aGUgbWFpbiBsb29wIHdpbGwgb25seSBzdGFydCBpZiBpdCBpcyBub3QgYWxyZWFkeSBzdGFydGVkLlxuICAgICAqXG4gICAgICogU2VlIGFsc28gYE1haW5Mb29wLnN0b3AoKWAuXG4gICAgICovXG4gICAgc3RhcnQoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICAvLyBTaW5jZSB0aGUgYXBwbGljYXRpb24gZG9lc24ndCBzdGFydCBydW5uaW5nIGltbWVkaWF0ZWx5LCB0cmFja1xuICAgICAgICAgICAgLy8gd2hldGhlciB0aGlzIGZ1bmN0aW9uIHdhcyBjYWxsZWQgYW5kIHVzZSB0aGF0IHRvIGtlZXAgaXQgZnJvbVxuICAgICAgICAgICAgLy8gc3RhcnRpbmcgdGhlIG1haW4gbG9vcCBtdWx0aXBsZSB0aW1lcy5cbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIEluIHRoZSBtYWluIGxvb3AsIGRyYXcoKSBpcyBjYWxsZWQgYWZ0ZXIgdXBkYXRlKCksIHNvIGlmIHdlXG4gICAgICAgICAgICAvLyBlbnRlcmVkIHRoZSBtYWluIGxvb3AgaW1tZWRpYXRlbHksIHdlIHdvdWxkIG5ldmVyIHJlbmRlciB0aGVcbiAgICAgICAgICAgIC8vIGluaXRpYWwgc3RhdGUgYmVmb3JlIGFueSB1cGRhdGVzIG9jY3VyLiBJbnN0ZWFkLCB3ZSBydW4gb25lXG4gICAgICAgICAgICAvLyBmcmFtZSB3aGVyZSBhbGwgd2UgZG8gaXMgZHJhdywgYW5kIHRoZW4gc3RhcnQgdGhlIG1haW4gbG9vcCB3aXRoXG4gICAgICAgICAgICAvLyB0aGUgbmV4dCBmcmFtZS5cbiAgICAgICAgICAgIHRoaXMucmFmID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuc3RhcnRMb29wLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhcnRMb29wKHRpbWVzdGFtcCA6IG51bWJlcik6IHZvaWQge1xuICAgICAgICAvLyBSZW5kZXIgdGhlIGluaXRpYWwgc3RhdGUgYmVmb3JlIGFueSB1cGRhdGVzIG9jY3VyLlxuICAgICAgICB0aGlzLmRyYXcoMSk7XG5cbiAgICAgICAgLy8gVGhlIGFwcGxpY2F0aW9uIGlzbid0IGNvbnNpZGVyZWQgXCJydW5uaW5nXCIgdW50aWwgdGhlXG4gICAgICAgIC8vIGFwcGxpY2F0aW9uIHN0YXJ0cyBkcmF3aW5nLlxuICAgICAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlO1xuXG4gICAgICAgIC8vIFJlc2V0IHZhcmlhYmxlcyB0aGF0IGFyZSB1c2VkIGZvciB0cmFja2luZyB0aW1lIHNvIHRoYXQgd2VcbiAgICAgICAgLy8gZG9uJ3Qgc2ltdWxhdGUgdGltZSBwYXNzZWQgd2hpbGUgdGhlIGFwcGxpY2F0aW9uIHdhcyBwYXVzZWQuXG4gICAgICAgIHRoaXMubGFzdEZyYW1lVGltZU1zID0gdGltZXN0YW1wO1xuICAgICAgICB0aGlzLmxhc3RGcHNVcGRhdGUgPSB0aW1lc3RhbXA7XG4gICAgICAgIHRoaXMuZnJhbWVzU2luY2VMYXN0RnBzVXBkYXRlID0gMDtcblxuICAgICAgICAvLyBTdGFydCB0aGUgbWFpbiBsb29wLlxuICAgICAgICB0aGlzLnJhZiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRlLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgbWFpbiBsb29wIGlzIGN1cnJlbnRseSBydW5uaW5nLlxuICAgICAqXG4gICAgICogU2VlIGFsc28gYE1haW5Mb29wLnN0YXJ0KClgIGFuZCBgTWFpbkxvb3Auc3RvcCgpYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogICBXaGV0aGVyIHRoZSBtYWluIGxvb3AgaXMgY3VycmVudGx5IHJ1bm5pbmcuXG4gICAgICovXG4gICAgaXNSdW5uaW5nKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW5uaW5nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0b3BzIHRoZSBtYWluIGxvb3AuXG4gICAgICpcbiAgICAgKiBFdmVudCBoYW5kbGluZyBhbmQgb3RoZXIgYmFja2dyb3VuZCB0YXNrcyBzaG91bGQgYWxzbyBiZSBwYXVzZWQgd2hlbiB0aGVcbiAgICAgKiBtYWluIGxvb3AgaXMgcGF1c2VkLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHBhdXNpbmcgaW4gbXVsdGlwbGF5ZXIvbXVsdGktdXNlciBhcHBsaWNhdGlvbnMgd2lsbCBjYXVzZSB0aGVcbiAgICAgKiBwbGF5ZXIncy91c2VyJ3MgY2xpZW50IHRvIGJlY29tZSBvdXQgb2Ygc3luYy4gSW4gdGhpcyBjYXNlIHRoZVxuICAgICAqIHNpbXVsYXRpb24gc2hvdWxkIGV4aXQsIG9yIHRoZSBwbGF5ZXIvdXNlciBuZWVkcyB0byBiZSBzbmFwcGVkIHRvIHRoZWlyXG4gICAgICogdXBkYXRlZCBwb3NpdGlvbiB3aGVuIHRoZSBtYWluIGxvb3AgaXMgc3RhcnRlZCBhZ2Fpbi5cbiAgICAgKlxuICAgICAqIFNlZSBhbHNvIGBNYWluTG9vcC5zdGFydCgpYCBhbmQgYE1haW5Mb29wLmlzUnVubmluZygpYC5cbiAgICAgKi9cbiAgICBzdG9wKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnJhZik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIG1haW4gbG9vcCB0aGF0IHJ1bnMgdXBkYXRlcyBhbmQgcmVuZGVyaW5nLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7RE9NSGlnaFJlc1RpbWVTdGFtcH0gdGltZXN0YW1wXG4gICAgICogVGhlIGN1cnJlbnQgdGltZXN0YW1wLiBJbiBwcmFjdGljZSB0aGlzIGlzIHN1cHBsaWVkIGJ5XG4gICAgICogcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGF0IHRoZSB0aW1lIHRoYXQgaXQgc3RhcnRzIHRvIGZpcmUgY2FsbGJhY2tzLiBUaGlzXG4gICAgICogc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgY29tcGFyaXNvbiB0byBvdGhlciB0aW1lc3RhbXBzIGJlY2F1c2UgdGhlIGVwb2NoXG4gICAgICogKGkuZS4gdGhlIFwiemVyb1wiIHRpbWUpIGRlcGVuZHMgb24gdGhlIGVuZ2luZSBydW5uaW5nIHRoaXMgY29kZS4gSW4gZW5naW5lc1xuICAgICAqIHRoYXQgc3VwcG9ydCBgRE9NSGlnaFJlc1RpbWVTdGFtcGAgKGFsbCBtb2Rlcm4gYnJvd3NlcnMgZXhjZXB0IGlPUyBTYWZhcmlcbiAgICAgKiA4KSB0aGUgZXBvY2ggaXMgdGhlIHRpbWUgdGhlIHBhZ2Ugc3RhcnRlZCBsb2FkaW5nLCBzcGVjaWZpY2FsbHlcbiAgICAgKiBgcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydGAuIEV2ZXJ5d2hlcmUgZWxzZSwgaW5jbHVkaW5nIG5vZGUuanMsXG4gICAgICogdGhlIGVwb2NoIGlzIHRoZSBVbml4IGVwb2NoICgxOTcwLTAxLTAxVDAwOjAwOjAwWikuXG4gICAgICogXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIGFuaW1hdGUodGltZXN0YW1wIDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIC8vIFJ1biB0aGUgbG9vcCBhZ2FpbiB0aGUgbmV4dCB0aW1lIHRoZSBicm93c2VyIGlzIHJlYWR5IHRvIHJlbmRlci5cbiAgICAgICAgLy8gV2Ugc2V0IHJhZkhhbmRsZSBpbW1lZGlhdGVseSBzbyB0aGF0IHRoZSBuZXh0IGZyYW1lIGNhbiBiZSBjYW5jZWxlZFxuICAgICAgICAvLyBkdXJpbmcgdGhlIGN1cnJlbnQgZnJhbWUuXG4gICAgICAgIHRoaXMucmFmID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGUuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgLy8gVGhyb3R0bGUgdGhlIGZyYW1lIHJhdGUgKGlmIG1pbkZyYW1lRGVsYXkgaXMgc2V0IHRvIGEgbm9uLXplcm8gdmFsdWUgYnlcbiAgICAgICAgLy8gYE1haW5Mb29wLnNldE1heEFsbG93ZWRGUFMoKWApLlxuICAgICAgICBpZiAodGltZXN0YW1wIDwgdGhpcy5sYXN0RnJhbWVUaW1lTXMgKyB0aGlzLm1pbkZyYW1lRGVsYXkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGZyYW1lRGVsdGEgaXMgdGhlIGN1bXVsYXRpdmUgYW1vdW50IG9mIGluLWFwcCB0aW1lIHRoYXQgaGFzbid0IGJlZW5cbiAgICAgICAgLy8gc2ltdWxhdGVkIHlldC4gQWRkIHRoZSB0aW1lIHNpbmNlIHRoZSBsYXN0IGZyYW1lLiBXZSBuZWVkIHRvIHRyYWNrIHRvdGFsXG4gICAgICAgIC8vIG5vdC15ZXQtc2ltdWxhdGVkIHRpbWUgKGFzIG9wcG9zZWQgdG8ganVzdCB0aGUgdGltZSBlbGFwc2VkIHNpbmNlIHRoZVxuICAgICAgICAvLyBsYXN0IGZyYW1lKSBiZWNhdXNlIG5vdCBhbGwgYWN0dWFsbHkgZWxhcHNlZCB0aW1lIGlzIGd1YXJhbnRlZWQgdG8gYmVcbiAgICAgICAgLy8gc2ltdWxhdGVkIGVhY2ggZnJhbWUuIFNlZSB0aGUgY29tbWVudHMgYmVsb3cgZm9yIGRldGFpbHMuXG4gICAgICAgIHRoaXMuZnJhbWVEZWx0YSArPSB0aW1lc3RhbXAgLSB0aGlzLmxhc3RGcmFtZVRpbWVNcztcbiAgICAgICAgdGhpcy5sYXN0RnJhbWVUaW1lTXMgPSB0aW1lc3RhbXA7XG5cbiAgICAgICAgLy8gUnVuIGFueSB1cGRhdGVzIHRoYXQgYXJlIG5vdCBkZXBlbmRlbnQgb24gdGltZSBpbiB0aGUgc2ltdWxhdGlvbi4gU2VlXG4gICAgICAgIC8vIGBNYWluTG9vcC5zZXRCZWdpbigpYCBmb3IgYWRkaXRpb25hbCBkZXRhaWxzIG9uIGhvdyB0byB1c2UgdGhpcy5cbiAgICAgICAgdGhpcy5iZWdpbih0aW1lc3RhbXAsIHRoaXMuZnJhbWVEZWx0YSk7XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBlc3RpbWF0ZSBvZiB0aGUgZnJhbWUgcmF0ZSwgYGZwc2AuIEFwcHJveGltYXRlbHkgZXZlcnlcbiAgICAgICAgLy8gc2Vjb25kLCB0aGUgbnVtYmVyIG9mIGZyYW1lcyB0aGF0IG9jY3VycmVkIGluIHRoYXQgc2Vjb25kIGFyZSBpbmNsdWRlZFxuICAgICAgICAvLyBpbiBhbiBleHBvbmVudGlhbCBtb3ZpbmcgYXZlcmFnZSBvZiBhbGwgZnJhbWVzIHBlciBzZWNvbmQuIFRoaXMgbWVhbnNcbiAgICAgICAgLy8gdGhhdCBtb3JlIHJlY2VudCBzZWNvbmRzIGFmZmVjdCB0aGUgZXN0aW1hdGVkIGZyYW1lIHJhdGUgbW9yZSB0aGFuIG9sZGVyXG4gICAgICAgIC8vIHNlY29uZHMuXG4gICAgICAgIGlmICh0aW1lc3RhbXAgPiB0aGlzLmxhc3RGcHNVcGRhdGUgKyB0aGlzLmZwc1VwZGF0ZUludGVydmFsKSB7XG4gICAgICAgICAgICAvLyBDb21wdXRlIHRoZSBuZXcgZXhwb25lbnRpYWwgbW92aW5nIGF2ZXJhZ2UuXG4gICAgICAgICAgICB0aGlzLmZwcyA9XG4gICAgICAgICAgICAgICAgLy8gRGl2aWRlIHRoZSBudW1iZXIgb2YgZnJhbWVzIHNpbmNlIHRoZSBsYXN0IEZQUyB1cGRhdGUgYnkgdGhlXG4gICAgICAgICAgICAgICAgLy8gYW1vdW50IG9mIHRpbWUgdGhhdCBoYXMgcGFzc2VkIHRvIGdldCB0aGUgbWVhbiBmcmFtZXMgcGVyIHNlY29uZFxuICAgICAgICAgICAgICAgIC8vIG92ZXIgdGhhdCBwZXJpb2QuIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugc2xpZ2h0bHkgbW9yZSB0aGFuIGFcbiAgICAgICAgICAgICAgICAvLyBzZWNvbmQgaGFzIGxpa2VseSBwYXNzZWQgc2luY2UgdGhlIGxhc3QgdXBkYXRlLlxuICAgICAgICAgICAgICAgIHRoaXMuZnBzQWxwaGEgKiB0aGlzLmZyYW1lc1NpbmNlTGFzdEZwc1VwZGF0ZSAqIDEwMDAgLyAodGltZXN0YW1wIC0gdGhpcy5sYXN0RnBzVXBkYXRlKSArXG4gICAgICAgICAgICAgICAgKDEgLSB0aGlzLmZwc0FscGhhKSAqIHRoaXMuZnBzO1xuXG4gICAgICAgICAgICAvLyBSZXNldCB0aGUgZnJhbWUgY291bnRlciBhbmQgbGFzdC11cGRhdGVkIHRpbWVzdGFtcCBzaW5jZSB0aGVpclxuICAgICAgICAgICAgLy8gbGF0ZXN0IHZhbHVlcyBoYXZlIG5vdyBiZWVuIGluY29ycG9yYXRlZCBpbnRvIHRoZSBGUFMgZXN0aW1hdGUuXG4gICAgICAgICAgICB0aGlzLmxhc3RGcHNVcGRhdGUgPSB0aW1lc3RhbXA7XG4gICAgICAgICAgICB0aGlzLmZyYW1lc1NpbmNlTGFzdEZwc1VwZGF0ZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ291bnQgdGhlIGN1cnJlbnQgZnJhbWUgaW4gdGhlIG5leHQgZnJhbWVzLXBlci1zZWNvbmQgdXBkYXRlLiBUaGlzXG4gICAgICAgIC8vIGhhcHBlbnMgYWZ0ZXIgdGhlIHByZXZpb3VzIHNlY3Rpb24gYmVjYXVzZSB0aGUgcHJldmlvdXMgc2VjdGlvblxuICAgICAgICAvLyBjYWxjdWxhdGVzIHRoZSBmcmFtZXMgdGhhdCBvY2N1ciB1cCB1bnRpbCBgdGltZXN0YW1wYCwgYW5kIGB0aW1lc3RhbXBgXG4gICAgICAgIC8vIHJlZmVycyB0byBhIHRpbWUganVzdCBiZWZvcmUgdGhlIGN1cnJlbnQgZnJhbWUgd2FzIGRlbGl2ZXJlZC5cbiAgICAgICAgdGhpcy5mcmFtZXNTaW5jZUxhc3RGcHNVcGRhdGUrKztcblxuICAgICAgICAvKlxuICAgICAgICAgKiBBIG5haXZlIHdheSB0byBtb3ZlIGFuIG9iamVjdCBhbG9uZyBpdHMgWC1heGlzIG1pZ2h0IGJlIHRvIHdyaXRlIGEgbWFpblxuICAgICAgICAgKiBsb29wIGNvbnRhaW5pbmcgdGhlIHN0YXRlbWVudCBgb2JqLnggKz0gMTA7YCB3aGljaCB3b3VsZCBtb3ZlIHRoZSBvYmplY3RcbiAgICAgICAgICogMTAgdW5pdHMgcGVyIGZyYW1lLiBUaGlzIGFwcHJvYWNoIHN1ZmZlcnMgZnJvbSB0aGUgaXNzdWUgdGhhdCBpdCBpc1xuICAgICAgICAgKiBkZXBlbmRlbnQgb24gdGhlIGZyYW1lIHJhdGUuIEluIG90aGVyIHdvcmRzLCBpZiB5b3VyIGFwcGxpY2F0aW9uIGlzXG4gICAgICAgICAqIHJ1bm5pbmcgc2xvd2x5ICh0aGF0IGlzLCBmZXdlciBmcmFtZXMgcGVyIHNlY29uZCksIHlvdXIgb2JqZWN0IHdpbGwgYWxzb1xuICAgICAgICAgKiBhcHBlYXIgdG8gbW92ZSBzbG93bHksIHdoZXJlYXMgaWYgeW91ciBhcHBsaWNhdGlvbiBpcyBydW5uaW5nIHF1aWNrbHlcbiAgICAgICAgICogKHRoYXQgaXMsIG1vcmUgZnJhbWVzIHBlciBzZWNvbmQpLCB5b3VyIG9iamVjdCB3aWxsIGFwcGVhciB0byBtb3ZlXG4gICAgICAgICAqIHF1aWNrbHkuIFRoaXMgaXMgdW5kZXNpcmFibGUsIGVzcGVjaWFsbHkgaW4gbXVsdGlwbGF5ZXIvbXVsdGktdXNlclxuICAgICAgICAgKiBhcHBsaWNhdGlvbnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIE9uZSBzb2x1dGlvbiBpcyB0byBtdWx0aXBseSB0aGUgc3BlZWQgYnkgdGhlIGFtb3VudCBvZiB0aW1lIHRoYXQgaGFzXG4gICAgICAgICAqIHBhc3NlZCBiZXR3ZWVuIHJlbmRlcmluZyBmcmFtZXMuIEZvciBleGFtcGxlLCBpZiB5b3Ugd2FudCB5b3VyIG9iamVjdCB0b1xuICAgICAgICAgKiBtb3ZlIDYwMCB1bml0cyBwZXIgc2Vjb25kLCB5b3UgbWlnaHQgd3JpdGUgYG9iai54ICs9IDYwMCAqIGRlbHRhYCwgd2hlcmVcbiAgICAgICAgICogYGRlbHRhYCBpcyB0aGUgdGltZSBwYXNzZWQgc2luY2UgdGhlIGxhc3QgZnJhbWUuIChGb3IgY29udmVuaWVuY2UsIGxldCdzXG4gICAgICAgICAqIG1vdmUgdGhpcyBzdGF0ZW1lbnQgdG8gYW4gdXBkYXRlKCkgZnVuY3Rpb24gdGhhdCB0YWtlcyBgZGVsdGFgIGFzIGFcbiAgICAgICAgICogcGFyYW1ldGVyLikgVGhpcyB3YXksIHlvdXIgb2JqZWN0IHdpbGwgbW92ZSBhIGNvbnN0YW50IGRpc3RhbmNlIG92ZXJcbiAgICAgICAgICogdGltZS4gSG93ZXZlciwgYXQgbG93IGZyYW1lIHJhdGVzIGFuZCBoaWdoIHNwZWVkcywgeW91ciBvYmplY3Qgd2lsbCBtb3ZlXG4gICAgICAgICAqIGxhcmdlIGRpc3RhbmNlcyBldmVyeSBmcmFtZSwgd2hpY2ggY2FuIGNhdXNlIGl0IHRvIGRvIHN0cmFuZ2UgdGhpbmdzXG4gICAgICAgICAqIHN1Y2ggYXMgbW92ZSB0aHJvdWdoIHdhbGxzLiBBZGRpdGlvbmFsbHksIHdlIHdvdWxkIGxpa2Ugb3VyIHByb2dyYW0gdG9cbiAgICAgICAgICogYmUgZGV0ZXJtaW5pc3RpYy4gVGhhdCBpcywgZXZlcnkgdGltZSB3ZSBydW4gdGhlIGFwcGxpY2F0aW9uIHdpdGggdGhlXG4gICAgICAgICAqIHNhbWUgaW5wdXQsIHdlIHdvdWxkIGxpa2UgZXhhY3RseSB0aGUgc2FtZSBvdXRwdXQuIElmIHRoZSB0aW1lIGJldHdlZW5cbiAgICAgICAgICogZnJhbWVzICh0aGUgYGRlbHRhYCkgdmFyaWVzLCBvdXIgb3V0cHV0IHdpbGwgZGl2ZXJnZSB0aGUgbG9uZ2VyIHRoZVxuICAgICAgICAgKiBwcm9ncmFtIHJ1bnMgZHVlIHRvIGFjY3VtdWxhdGVkIHJvdW5kaW5nIGVycm9ycywgZXZlbiBhdCBub3JtYWwgZnJhbWVcbiAgICAgICAgICogcmF0ZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEEgYmV0dGVyIHNvbHV0aW9uIGlzIHRvIHNlcGFyYXRlIHRoZSBhbW91bnQgb2YgdGltZSBzaW11bGF0ZWQgaW4gZWFjaFxuICAgICAgICAgKiB1cGRhdGUoKSBmcm9tIHRoZSBhbW91bnQgb2YgdGltZSBiZXR3ZWVuIGZyYW1lcy4gT3VyIHVwZGF0ZSgpIGZ1bmN0aW9uXG4gICAgICAgICAqIGRvZXNuJ3QgbmVlZCB0byBjaGFuZ2U7IHdlIGp1c3QgbmVlZCB0byBjaGFuZ2UgdGhlIGRlbHRhIHdlIHBhc3MgdG8gaXRcbiAgICAgICAgICogc28gdGhhdCBlYWNoIHVwZGF0ZSgpIHNpbXVsYXRlcyBhIGZpeGVkIGFtb3VudCBvZiB0aW1lICh0aGF0IGlzLCBgZGVsdGFgXG4gICAgICAgICAqIHNob3VsZCBoYXZlIHRoZSBzYW1lIHZhbHVlIGVhY2ggdGltZSB1cGRhdGUoKSBpcyBjYWxsZWQpLiBUaGUgdXBkYXRlKClcbiAgICAgICAgICogZnVuY3Rpb24gY2FuIGJlIHJ1biBtdWx0aXBsZSB0aW1lcyBwZXIgZnJhbWUgaWYgbmVlZGVkIHRvIHNpbXVsYXRlIHRoZVxuICAgICAgICAgKiB0b3RhbCBhbW91bnQgb2YgdGltZSBwYXNzZWQgc2luY2UgdGhlIGxhc3QgZnJhbWUuIChJZiB0aGUgdGltZSB0aGF0IGhhc1xuICAgICAgICAgKiBwYXNzZWQgc2luY2UgdGhlIGxhc3QgZnJhbWUgaXMgbGVzcyB0aGFuIHRoZSBmaXhlZCBzaW11bGF0aW9uIHRpbWUsIHdlXG4gICAgICAgICAqIGp1c3Qgd29uJ3QgcnVuIGFuIHVwZGF0ZSgpIHVudGlsIHRoZSB0aGUgbmV4dCBmcmFtZS4gSWYgdGhlcmUgaXNcbiAgICAgICAgICogdW5zaW11bGF0ZWQgdGltZSBsZWZ0IG92ZXIgdGhhdCBpcyBsZXNzIHRoYW4gb3VyIHRpbWVzdGVwLCB3ZSdsbCBqdXN0XG4gICAgICAgICAqIGxlYXZlIGl0IHRvIGJlIHNpbXVsYXRlZCBkdXJpbmcgdGhlIG5leHQgZnJhbWUuKSBUaGlzIGFwcHJvYWNoIGF2b2lkc1xuICAgICAgICAgKiBpbmNvbnNpc3RlbnQgcm91bmRpbmcgZXJyb3JzIGFuZCBlbnN1cmVzIHRoYXQgdGhlcmUgYXJlIG5vIGdpYW50IGxlYXBzXG4gICAgICAgICAqIHRocm91Z2ggd2FsbHMgYmV0d2VlbiBmcmFtZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoYXQgaXMgd2hhdCBpcyBkb25lIGJlbG93LiBJdCBpbnRyb2R1Y2VzIGEgbmV3IHByb2JsZW0sIGJ1dCBpdCBpcyBhXG4gICAgICAgICAqIG1hbmFnZWFibGUgb25lOiBpZiB0aGUgYW1vdW50IG9mIHRpbWUgc3BlbnQgc2ltdWxhdGluZyBpcyBjb25zaXN0ZW50bHlcbiAgICAgICAgICogbG9uZ2VyIHRoYW4gdGhlIGFtb3VudCBvZiB0aW1lIGJldHdlZW4gZnJhbWVzLCB0aGUgYXBwbGljYXRpb24gY291bGRcbiAgICAgICAgICogZnJlZXplIGFuZCBjcmFzaCBpbiBhIHNwaXJhbCBvZiBkZWF0aC4gVGhpcyB3b24ndCBoYXBwZW4gYXMgbG9uZyBhcyB0aGVcbiAgICAgICAgICogZml4ZWQgc2ltdWxhdGlvbiB0aW1lIGlzIHNldCB0byBhIHZhbHVlIHRoYXQgaXMgaGlnaCBlbm91Z2ggdGhhdFxuICAgICAgICAgKiB1cGRhdGUoKSBjYWxscyB1c3VhbGx5IHRha2UgbGVzcyB0aW1lIHRoYW4gdGhlIGFtb3VudCBvZiB0aW1lIHRoZXkncmVcbiAgICAgICAgICogc2ltdWxhdGluZy4gSWYgaXQgZG9lcyBzdGFydCB0byBoYXBwZW4gYW55d2F5LCBzZWUgYE1haW5Mb29wLnNldEVuZCgpYFxuICAgICAgICAgKiBmb3IgYSBkaXNjdXNzaW9uIG9mIHdheXMgdG8gc3RvcCBpdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQWRkaXRpb25hbGx5LCBzZWUgYE1haW5Mb29wLnNldFVwZGF0ZSgpYCBmb3IgYSBkaXNjdXNzaW9uIG9mIHBlcmZvcm1hbmNlXG4gICAgICAgICAqIGNvbnNpZGVyYXRpb25zLlxuICAgICAgICAgKlxuICAgICAgICAgKiBGdXJ0aGVyIHJlYWRpbmcgZm9yIHRob3NlIGludGVyZXN0ZWQ6XG4gICAgICAgICAqXG4gICAgICAgICAqIC0gaHR0cDovL2dhbWVwcm9ncmFtbWluZ3BhdHRlcm5zLmNvbS9nYW1lLWxvb3AuaHRtbFxuICAgICAgICAgKiAtIGh0dHA6Ly9nYWZmZXJvbmdhbWVzLmNvbS9nYW1lLXBoeXNpY3MvZml4LXlvdXItdGltZXN0ZXAvXG4gICAgICAgICAqIC0gaHR0cHM6Ly9nYW1lYWxjaGVtaXN0LndvcmRwcmVzcy5jb20vMjAxMy8wMy8xNi90aG91Z2h0cy1vbi10aGUtamF2YXNjcmlwdC1nYW1lLWxvb3AvXG4gICAgICAgICAqIC0gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9HYW1lcy9BbmF0b215XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm51bVVwZGF0ZVN0ZXBzID0gMDtcbiAgICAgICAgd2hpbGUgKHRoaXMuZnJhbWVEZWx0YSA+PSB0aGlzLnNpbXVsYXRpb25UaW1lc3RlcCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5zaW11bGF0aW9uVGltZXN0ZXApO1xuICAgICAgICAgICAgdGhpcy5mcmFtZURlbHRhIC09IHRoaXMuc2ltdWxhdGlvblRpbWVzdGVwO1xuXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICogU2FuaXR5IGNoZWNrOiBiYWlsIGlmIHdlIHJ1biB0aGUgbG9vcCB0b28gbWFueSB0aW1lcy5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBPbmUgd2F5IHRoaXMgY291bGQgaGFwcGVuIGlzIGlmIHVwZGF0ZSgpIHRha2VzIGxvbmdlciB0byBydW4gdGhhblxuICAgICAgICAgICAgICogdGhlIHRpbWUgaXQgc2ltdWxhdGVzLCB0aGVyZWJ5IGNhdXNpbmcgYSBzcGlyYWwgb2YgZGVhdGguIEZvciB3YXlzXG4gICAgICAgICAgICAgKiB0byBhdm9pZCB0aGlzLCBzZWUgYE1haW5Mb29wLnNldEVuZCgpYC4gQW5vdGhlciB3YXkgdGhpcyBjb3VsZFxuICAgICAgICAgICAgICogaGFwcGVuIGlzIGlmIHRoZSBicm93c2VyIHRocm90dGxlcyBzZXJ2aW5nIGZyYW1lcywgd2hpY2ggdHlwaWNhbGx5XG4gICAgICAgICAgICAgKiBvY2N1cnMgd2hlbiB0aGUgdGFiIGlzIGluIHRoZSBiYWNrZ3JvdW5kIG9yIHRoZSBkZXZpY2UgYmF0dGVyeSBpc1xuICAgICAgICAgICAgICogbG93LiBBbiBldmVudCBvdXRzaWRlIG9mIHRoZSBtYWluIGxvb3Agc3VjaCBhcyBhdWRpbyBwcm9jZXNzaW5nIG9yXG4gICAgICAgICAgICAgKiBzeW5jaHJvbm91cyByZXNvdXJjZSByZWFkcyBjb3VsZCBhbHNvIGNhdXNlIHRoZSBhcHBsaWNhdGlvbiB0byBoYW5nXG4gICAgICAgICAgICAgKiB0ZW1wb3JhcmlseSBhbmQgYWNjdW11bGF0ZSBub3QteWV0LXNpbXVsYXRlZCB0aW1lIGFzIGEgcmVzdWx0LlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIDI0MCBpcyBjaG9zZW4gYmVjYXVzZSwgZm9yIGFueSBzYW5lIHZhbHVlIG9mIHNpbXVsYXRpb25UaW1lc3RlcCwgMjQwXG4gICAgICAgICAgICAgKiB1cGRhdGVzIHdpbGwgc2ltdWxhdGUgYXQgbGVhc3Qgb25lIHNlY29uZCwgYW5kIGl0IHdpbGwgc2ltdWxhdGUgZm91clxuICAgICAgICAgICAgICogc2Vjb25kcyB3aXRoIHRoZSBkZWZhdWx0IHZhbHVlIG9mIHNpbXVsYXRpb25UaW1lc3RlcC4gKFNhZmFyaVxuICAgICAgICAgICAgICogbm90aWZpZXMgdXNlcnMgdGhhdCB0aGUgc2NyaXB0IGlzIHRha2luZyB0b28gbG9uZyB0byBydW4gaWYgaXQgdGFrZXNcbiAgICAgICAgICAgICAqIG1vcmUgdGhhbiBmaXZlIHNlY29uZHMuKVxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIElmIHRoZXJlIGFyZSBtb3JlIHVwZGF0ZXMgdG8gcnVuIGluIGEgZnJhbWUgdGhhbiB0aGlzLCB0aGVcbiAgICAgICAgICAgICAqIGFwcGxpY2F0aW9uIHdpbGwgYXBwZWFyIHRvIHNsb3cgZG93biB0byB0aGUgdXNlciB1bnRpbCBpdCBjYXRjaGVzXG4gICAgICAgICAgICAgKiBiYWNrIHVwLiBJbiBuZXR3b3JrZWQgYXBwbGljYXRpb25zIHRoaXMgd2lsbCB1c3VhbGx5IGNhdXNlIHRoZSB1c2VyXG4gICAgICAgICAgICAgKiB0byBnZXQgb3V0IG9mIHN5bmMgd2l0aCB0aGVpciBwZWVycywgYnV0IGlmIHRoZSB1cGRhdGVzIGFyZSB0YWtpbmdcbiAgICAgICAgICAgICAqIHRoaXMgbG9uZyBhbHJlYWR5LCB0aGV5J3JlIHByb2JhYmx5IGFscmVhZHkgb3V0IG9mIHN5bmMuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmICgrK3RoaXMubnVtVXBkYXRlU3RlcHMgPj0gMjQwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYW5pYyA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKlxuICAgICAgICAgKiBSZW5kZXIgdGhlIHNjcmVlbi4gV2UgZG8gdGhpcyByZWdhcmRsZXNzIG9mIHdoZXRoZXIgdXBkYXRlKCkgaGFzIHJ1blxuICAgICAgICAgKiBkdXJpbmcgdGhpcyBmcmFtZSBiZWNhdXNlIGl0IGlzIHBvc3NpYmxlIHRvIGludGVycG9sYXRlIGJldHdlZW4gdXBkYXRlc1xuICAgICAgICAgKiB0byBtYWtlIHRoZSBmcmFtZSByYXRlIGFwcGVhciBmYXN0ZXIgdGhhbiB1cGRhdGVzIGFyZSBhY3R1YWxseVxuICAgICAgICAgKiBoYXBwZW5pbmcuIFNlZSBgTWFpbkxvb3Auc2V0RHJhdygpYCBmb3IgYW4gZXhwbGFuYXRpb24gb2YgaG93IHRvIGRvXG4gICAgICAgICAqIHRoYXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdlIGRyYXcgYWZ0ZXIgdXBkYXRpbmcgYmVjYXVzZSB3ZSB3YW50IHRoZSBzY3JlZW4gdG8gcmVmbGVjdCBhIHN0YXRlIG9mXG4gICAgICAgICAqIHRoZSBhcHBsaWNhdGlvbiB0aGF0IGlzIGFzIHVwLXRvLWRhdGUgYXMgcG9zc2libGUuIChgTWFpbkxvb3Auc3RhcnQoKWBcbiAgICAgICAgICogZHJhd3MgdGhlIHZlcnkgZmlyc3QgZnJhbWUgaW4gdGhlIGFwcGxpY2F0aW9uJ3MgaW5pdGlhbCBzdGF0ZSwgYmVmb3JlXG4gICAgICAgICAqIGFueSB1cGRhdGVzIGhhdmUgb2NjdXJyZWQuKSBTb21lIHNvdXJjZXMgc3BlY3VsYXRlIHRoYXQgcmVuZGVyaW5nXG4gICAgICAgICAqIGVhcmxpZXIgaW4gdGhlIHJlcXVlc3RBbmltYXRpb25GcmFtZSBjYWxsYmFjayBjYW4gZ2V0IHRoZSBzY3JlZW4gcGFpbnRlZFxuICAgICAgICAgKiBmYXN0ZXI7IHRoaXMgaXMgbW9zdGx5IG5vdCB0cnVlLCBhbmQgZXZlbiB3aGVuIGl0IGlzLCBpdCdzIHVzdWFsbHkganVzdFxuICAgICAgICAgKiBhIHRyYWRlLW9mZiBiZXR3ZWVuIHJlbmRlcmluZyB0aGUgY3VycmVudCBmcmFtZSBzb29uZXIgYW5kIHJlbmRlcmluZyB0aGVcbiAgICAgICAgICogbmV4dCBmcmFtZSBsYXRlci5cbiAgICAgICAgICpcbiAgICAgICAgICogU2VlIGBNYWluTG9vcC5zZXREcmF3KClgIGZvciBkZXRhaWxzIGFib3V0IGRyYXcoKSBpdHNlbGYuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRyYXcodGhpcy5mcmFtZURlbHRhIC8gdGhpcy5zaW11bGF0aW9uVGltZXN0ZXApO1xuXG4gICAgICAgIC8vIFJ1biBhbnkgdXBkYXRlcyB0aGF0IGFyZSBub3QgZGVwZW5kZW50IG9uIHRpbWUgaW4gdGhlIHNpbXVsYXRpb24uIFNlZVxuICAgICAgICAvLyBgTWFpbkxvb3Auc2V0RW5kKClgIGZvciBhZGRpdGlvbmFsIGRldGFpbHMgb24gaG93IHRvIHVzZSB0aGlzLlxuICAgICAgICB0aGlzLmVuZCh0aGlzLmZwcywgdGhpcy5wYW5pYyk7XG5cbiAgICAgICAgdGhpcy5wYW5pYyA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFNVQkNMQVNTRVMgTVVTVCBPVkVSUklERSBGT1VSIFJFUVVJUkVEIE1FVEhPRFM6XG4gICAgICAgIC8vIGJlZ2luXG4gICAgICAgIC8vIHVwZGF0ZVxuICAgICAgICAvLyBkcmF3XG4gICAgICAgIC8vIGVuZFxuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0aGF0IHJ1bnMgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgbWFpbiBsb29wLlxuICAgICAqXG4gICAgICogVGhlIGJlZ2luKCkgZnVuY3Rpb24gaXMgdHlwaWNhbGx5IHVzZWQgdG8gcHJvY2VzcyBpbnB1dCBiZWZvcmUgdGhlXG4gICAgICogdXBkYXRlcyBydW4uIFByb2Nlc3NpbmcgaW5wdXQgaGVyZSAoaW4gY2h1bmtzKSBjYW4gcmVkdWNlIHRoZSBydW5uaW5nXG4gICAgICogdGltZSBvZiBldmVudCBoYW5kbGVycywgd2hpY2ggaXMgdXNlZnVsIGJlY2F1c2UgbG9uZy1ydW5uaW5nIGV2ZW50XG4gICAgICogaGFuZGxlcnMgY2FuIHNvbWV0aW1lcyBkZWxheSBmcmFtZXMuXG4gICAgICpcbiAgICAgKiBVbmxpa2Uge0BsaW5rICNzZXRVcGRhdGUgdXBkYXRlfSgpLCB3aGljaCBjYW4gcnVuIHplcm8gb3IgbW9yZSB0aW1lcyBwZXJcbiAgICAgKiBmcmFtZSwgYmVnaW4oKSBhbHdheXMgcnVucyBleGFjdGx5IG9uY2UgcGVyIGZyYW1lLiBUaGlzIG1ha2VzIGl0IHVzZWZ1bFxuICAgICAqIGZvciBhbnkgdXBkYXRlcyB0aGF0IGFyZSBub3QgZGVwZW5kZW50IG9uIHRpbWUgaW4gdGhlIHNpbXVsYXRpb24uXG4gICAgICogRXhhbXBsZXMgaW5jbHVkZSBhZGp1c3RpbmcgSFVEIGNhbGN1bGF0aW9ucyBvciBwZXJmb3JtaW5nIGxvbmctcnVubmluZ1xuICAgICAqIHVwZGF0ZXMgaW5jcmVtZW50YWxseS4gQ29tcGFyZWQgdG8ge0BsaW5rICNzZXRFbmQgZW5kfSgpLCBnZW5lcmFsbHlcbiAgICAgKiBhY3Rpb25zIHNob3VsZCBvY2N1ciBpbiBiZWdpbigpIGlmIHRoZXkgYWZmZWN0IGFueXRoaW5nIHRoYXRcbiAgICAgKiB7QGxpbmsgI3NldFVwZGF0ZSB1cGRhdGV9KCkgb3Ige0BsaW5rICNzZXREcmF3IGRyYXd9KCkgdXNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYmVnaW5cbiAgICAgKiAgIFRoZSBiZWdpbigpIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbYmVnaW4udGltZXN0YW1wXVxuICAgICAqICAgVGhlIGN1cnJlbnQgdGltZXN0YW1wICh3aGVuIHRoZSBmcmFtZSBzdGFydGVkKSwgaW4gbWlsbGlzZWNvbmRzLiBUaGlzXG4gICAgICogICBzaG91bGQgb25seSBiZSB1c2VkIGZvciBjb21wYXJpc29uIHRvIG90aGVyIHRpbWVzdGFtcHMgYmVjYXVzZSB0aGVcbiAgICAgKiAgIGVwb2NoIChpLmUuIHRoZSBcInplcm9cIiB0aW1lKSBkZXBlbmRzIG9uIHRoZSBlbmdpbmUgcnVubmluZyB0aGlzIGNvZGUuXG4gICAgICogICBJbiBlbmdpbmVzIHRoYXQgc3VwcG9ydCBgRE9NSGlnaFJlc1RpbWVTdGFtcGAgKGFsbCBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgKiAgIGV4Y2VwdCBpT1MgU2FmYXJpIDgpIHRoZSBlcG9jaCBpcyB0aGUgdGltZSB0aGUgcGFnZSBzdGFydGVkIGxvYWRpbmcsXG4gICAgICogICBzcGVjaWZpY2FsbHkgYHBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnRgLiBFdmVyeXdoZXJlIGVsc2UsXG4gICAgICogICBpbmNsdWRpbmcgbm9kZS5qcywgdGhlIGVwb2NoIGlzIHRoZSBVbml4IGVwb2NoICgxOTcwLTAxLTAxVDAwOjAwOjAwWikuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtiZWdpbi5kZWx0YV1cbiAgICAgKiAgIFRoZSB0b3RhbCBlbGFwc2VkIHRpbWUgdGhhdCBoYXMgbm90IHlldCBiZWVuIHNpbXVsYXRlZCwgaW5cbiAgICAgKiAgIG1pbGxpc2Vjb25kcy5cbiAgICAgKi9cbiAgICBhYnN0cmFjdCBiZWdpbih0aW1lc3RhbXAgOiBudW1iZXIsIGRlbHRhIDogbnVtYmVyKSA6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgcnVucyB1cGRhdGVzIChpLmUuIEFJIGFuZCBwaHlzaWNzKS5cbiAgICAgKlxuICAgICAqIFRoZSB1cGRhdGUoKSBmdW5jdGlvbiBzaG91bGQgc2ltdWxhdGUgYW55dGhpbmcgdGhhdCBpcyBhZmZlY3RlZCBieSB0aW1lLlxuICAgICAqIEl0IGNhbiBiZSBjYWxsZWQgemVybyBvciBtb3JlIHRpbWVzIHBlciBmcmFtZSBkZXBlbmRpbmcgb24gdGhlIGZyYW1lXG4gICAgICogcmF0ZS5cbiAgICAgKlxuICAgICAqIEFzIHdpdGggZXZlcnl0aGluZyBpbiB0aGUgbWFpbiBsb29wLCB0aGUgcnVubmluZyB0aW1lIG9mIHVwZGF0ZSgpXG4gICAgICogZGlyZWN0bHkgYWZmZWN0cyB0aGUgZnJhbWUgcmF0ZS4gSWYgdXBkYXRlKCkgdGFrZXMgbG9uZyBlbm91Z2ggdGhhdCB0aGVcbiAgICAgKiBmcmFtZSByYXRlIGRyb3BzIGJlbG93IHRoZSB0YXJnZXQgKFwiYnVkZ2V0ZWRcIikgZnJhbWUgcmF0ZSwgcGFydHMgb2YgdGhlXG4gICAgICogdXBkYXRlKCkgZnVuY3Rpb24gdGhhdCBkbyBub3QgbmVlZCB0byBleGVjdXRlIGJldHdlZW4gZXZlcnkgZnJhbWUgY2FuIGJlXG4gICAgICogbW92ZWQgaW50byBXZWIgV29ya2Vycy4gKFZhcmlvdXMgc291cmNlcyBvbiB0aGUgaW50ZXJuZXQgc29tZXRpbWVzXG4gICAgICogc3VnZ2VzdCBvdGhlciBzY2hlZHVsaW5nIHBhdHRlcm5zIHVzaW5nIHNldFRpbWVvdXQoKSBvciBzZXRJbnRlcnZhbCgpLlxuICAgICAqIFRoZXNlIGFwcHJvYWNoZXMgc29tZXRpbWVzIG9mZmVyIG1vZGVzdCBpbXByb3ZlbWVudHMgd2l0aCBtaW5pbWFsXG4gICAgICogY2hhbmdlcyB0byBleGlzdGluZyBjb2RlLCBidXQgYmVjYXVzZSBKYXZhU2NyaXB0IGlzIHNpbmdsZS10aHJlYWRlZCwgdGhlXG4gICAgICogdXBkYXRlcyB3aWxsIHN0aWxsIGJsb2NrIHJlbmRlcmluZyBhbmQgZHJhZyBkb3duIHRoZSBmcmFtZSByYXRlLiBXZWJcbiAgICAgKiBXb3JrZXJzIGV4ZWN1dGUgaW4gc2VwYXJhdGUgdGhyZWFkcywgc28gdGhleSBmcmVlIHVwIG1vcmUgdGltZSBpbiB0aGVcbiAgICAgKiBtYWluIGxvb3AuKVxuICAgICAqXG4gICAgICogVGhpcyBzY3JpcHQgY2FuIGJlIGltcG9ydGVkIGludG8gYSBXZWIgV29ya2VyIHVzaW5nIGltcG9ydFNjcmlwdHMoKSBhbmRcbiAgICAgKiB1c2VkIHRvIHJ1biBhIHNlY29uZCBtYWluIGxvb3AgaW4gdGhlIHdvcmtlci4gU29tZSBjb25zaWRlcmF0aW9uczpcbiAgICAgKlxuICAgICAqIC0gUHJvZmlsZSB5b3VyIGNvZGUgYmVmb3JlIGRvaW5nIHRoZSB3b3JrIHRvIG1vdmUgaXQgaW50byBXZWIgV29ya2Vycy5cbiAgICAgKiAgIEl0IGNvdWxkIGJlIHRoZSByZW5kZXJpbmcgdGhhdCBpcyB0aGUgYm90dGxlbmVjaywgaW4gd2hpY2ggY2FzZSB0aGVcbiAgICAgKiAgIHNvbHV0aW9uIGlzIHRvIGRlY3JlYXNlIHRoZSB2aXN1YWwgY29tcGxleGl0eSBvZiB0aGUgc2NlbmUuXG4gICAgICogLSBJdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgdG8gbW92ZSB0aGUgKmVudGlyZSogY29udGVudHMgb2YgdXBkYXRlKCkgaW50b1xuICAgICAqICAgd29ya2VycyB1bmxlc3Mge0BsaW5rICNzZXREcmF3IGRyYXd9KCkgY2FuIGludGVycG9sYXRlIGJldHdlZW4gZnJhbWVzLlxuICAgICAqICAgVGhlIGxvd2VzdC1oYW5naW5nIGZydWl0IGlzIGJhY2tncm91bmQgdXBkYXRlcyAobGlrZSBjYWxjdWxhdGluZ1xuICAgICAqICAgY2l0aXplbnMnIGhhcHBpbmVzcyBpbiBhIGNpdHktYnVpbGRpbmcgZ2FtZSksIHBoeXNpY3MgdGhhdCBkb2Vzbid0XG4gICAgICogICBhZmZlY3QgdGhlIHNjZW5lIChsaWtlIGZsYWdzIHdhdmluZyBpbiB0aGUgd2luZCksIGFuZCBhbnl0aGluZyB0aGF0IGlzXG4gICAgICogICBvY2NsdWRlZCBvciBoYXBwZW5pbmcgZmFyIG9mZiBzY3JlZW4uXG4gICAgICogLSBJZiBkcmF3KCkgbmVlZHMgdG8gaW50ZXJwb2xhdGUgcGh5c2ljcyBiYXNlZCBvbiBhY3Rpdml0eSB0aGF0IG9jY3Vyc1xuICAgICAqICAgaW4gYSB3b3JrZXIsIHRoZSB3b3JrZXIgbmVlZHMgdG8gcGFzcyB0aGUgaW50ZXJwb2xhdGlvbiB2YWx1ZSBiYWNrIHRvXG4gICAgICogICB0aGUgbWFpbiB0aHJlYWQgc28gdGhhdCBpcyBpcyBhdmFpbGFibGUgdG8gZHJhdygpLlxuICAgICAqIC0gV2ViIFdvcmtlcnMgY2FuJ3QgYWNjZXNzIHRoZSBzdGF0ZSBvZiB0aGUgbWFpbiB0aHJlYWQsIHNvIHRoZXkgY2FuJ3RcbiAgICAgKiAgIGRpcmVjdGx5IG1vZGlmeSBvYmplY3RzIGluIHlvdXIgc2NlbmUuIE1vdmluZyBkYXRhIHRvIGFuZCBmcm9tIFdlYlxuICAgICAqICAgV29ya2VycyBpcyBhIHBhaW4uIFRoZSBmYXN0ZXN0IHdheSB0byBkbyBpdCBpcyB3aXRoIFRyYW5zZmVyYWJsZVxuICAgICAqICAgT2JqZWN0czogYmFzaWNhbGx5LCB5b3UgY2FuIHBhc3MgYW4gQXJyYXlCdWZmZXIgdG8gYSB3b3JrZXIsXG4gICAgICogICBkZXN0cm95aW5nIHRoZSBvcmlnaW5hbCByZWZlcmVuY2UgaW4gdGhlIHByb2Nlc3MuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIHJlYWQgbW9yZSBhYm91dCBXZWIgV29ya2VycyBhbmQgVHJhbnNmZXJhYmxlIE9iamVjdHMgYXRcbiAgICAgKiBbSFRNTDUgUm9ja3NdKGh0dHA6Ly93d3cuaHRtbDVyb2Nrcy5jb20vZW4vdHV0b3JpYWxzL3dvcmtlcnMvYmFzaWNzLykuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB1cGRhdGVcbiAgICAgKiAgIFRoZSB1cGRhdGUoKSBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3VwZGF0ZS5kZWx0YV1cbiAgICAgKiAgIFRoZSBhbW91bnQgb2YgdGltZSBpbiBtaWxsaXNlY29uZHMgdG8gc2ltdWxhdGUgaW4gdGhlIHVwZGF0ZS4gSW4gbW9zdFxuICAgICAqICAgY2FzZXMgdGhpcyB0aW1lc3RlcCBuZXZlciBjaGFuZ2VzIGluIG9yZGVyIHRvIGVuc3VyZSBkZXRlcm1pbmlzdGljXG4gICAgICogICB1cGRhdGVzLiBUaGUgdGltZXN0ZXAgaXMgdGhlIHNhbWUgYXMgdGhhdCByZXR1cm5lZCBieVxuICAgICAqICAgYE1haW5Mb29wLmdldFNpbXVsYXRpb25UaW1lc3RlcCgpYC5cbiAgICAgKi9cbiAgICBhYnN0cmFjdCB1cGRhdGUodGltZVN0ZXAgOiBudW1iZXIpIDogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCBkcmF3cyB0aGluZ3Mgb24gdGhlIHNjcmVlbi5cbiAgICAgKlxuICAgICAqIFRoZSBkcmF3KCkgZnVuY3Rpb24gZ2V0cyBwYXNzZWQgdGhlIHBlcmNlbnQgb2YgdGltZSB0aGF0IHRoZSBuZXh0IHJ1biBvZlxuICAgICAqIHtAbGluayAjc2V0VXBkYXRlIHVwZGF0ZX0oKSB3aWxsIHNpbXVsYXRlIHRoYXQgaGFzIGFjdHVhbGx5IGVsYXBzZWQsIGFzXG4gICAgICogYSBkZWNpbWFsLiBJbiBvdGhlciB3b3JkcywgZHJhdygpIGdldHMgcGFzc2VkIGhvdyBmYXIgYmV0d2VlbiB1cGRhdGUoKVxuICAgICAqIGNhbGxzIGl0IGlzLiBUaGlzIGlzIHVzZWZ1bCBiZWNhdXNlIHRoZSB0aW1lIHNpbXVsYXRlZCBieSB1cGRhdGUoKSBhbmRcbiAgICAgKiB0aGUgdGltZSBiZXR3ZWVuIGRyYXcoKSBjYWxscyBpcyB1c3VhbGx5IGRpZmZlcmVudCwgc28gdGhlIHBhcmFtZXRlciB0b1xuICAgICAqIGRyYXcoKSBjYW4gYmUgdXNlZCB0byBpbnRlcnBvbGF0ZSBtb3Rpb24gYmV0d2VlbiBmcmFtZXMgdG8gbWFrZVxuICAgICAqIHJlbmRlcmluZyBhcHBlYXIgc21vb3RoZXIuIFRvIGlsbHVzdHJhdGUsIGlmIHVwZGF0ZSgpIGFkdmFuY2VzIHRoZVxuICAgICAqIHNpbXVsYXRpb24gYXQgZWFjaCB2ZXJ0aWNhbCBiYXIgaW4gdGhlIGZpcnN0IHJvdyBiZWxvdywgYW5kIGRyYXcoKSBjYWxsc1xuICAgICAqIGhhcHBlbiBhdCBlYWNoIHZlcnRpY2FsIGJhciBpbiB0aGUgc2Vjb25kIHJvdyBiZWxvdywgdGhlbiBzb21lIGZyYW1lc1xuICAgICAqIHdpbGwgaGF2ZSB0aW1lIGxlZnQgb3ZlciB0aGF0IGlzIG5vdCB5ZXQgc2ltdWxhdGVkIGJ5IHVwZGF0ZSgpIHdoZW5cbiAgICAgKiByZW5kZXJpbmcgb2NjdXJzIGluIGRyYXcoKTpcbiAgICAgKlxuICAgICAqICAgICB1cGRhdGUoKSB0aW1lc3RlcHM6ICB8ICB8ICB8ICB8ICB8ICB8ICB8ICB8ICB8XG4gICAgICogICAgIGRyYXcoKSBjYWxsczogICAgICAgIHwgICB8ICAgfCAgIHwgICB8ICAgfCAgIHxcbiAgICAgKlxuICAgICAqIFRvIGludGVycG9sYXRlIG1vdGlvbiBmb3IgcmVuZGVyaW5nIHB1cnBvc2VzLCBvYmplY3RzJyBzdGF0ZSBhZnRlciB0aGVcbiAgICAgKiBsYXN0IHVwZGF0ZSgpIG11c3QgYmUgcmV0YWluZWQgYW5kIHVzZWQgdG8gY2FsY3VsYXRlIGFuIGludGVybWVkaWF0ZVxuICAgICAqIHN0YXRlLiBOb3RlIHRoYXQgdGhpcyBtZWFucyByZW5kZXJzIHdpbGwgYmUgdXAgdG8gb25lIHVwZGF0ZSgpIGJlaGluZC5cbiAgICAgKiBUaGlzIGlzIHN0aWxsIGJldHRlciB0aGFuIGV4dHJhcG9sYXRpbmcgKHByb2plY3Rpbmcgb2JqZWN0cycgc3RhdGUgYWZ0ZXJcbiAgICAgKiBhIGZ1dHVyZSB1cGRhdGUoKSkgd2hpY2ggY2FuIHByb2R1Y2UgYml6YXJyZSByZXN1bHRzLiBTdG9yaW5nIG11bHRpcGxlXG4gICAgICogc3RhdGVzIGNhbiBiZSBkaWZmaWN1bHQgdG8gc2V0IHVwLCBhbmQga2VlcCBpbiBtaW5kIHRoYXQgcnVubmluZyB0aGlzXG4gICAgICogcHJvY2VzcyB0YWtlcyB0aW1lIHRoYXQgY291bGQgcHVzaCB0aGUgZnJhbWUgcmF0ZSBkb3duLCBzbyBpdCdzIG9mdGVuXG4gICAgICogbm90IHdvcnRod2hpbGUgdW5sZXNzIHN0dXR0ZXJpbmcgaXMgdmlzaWJsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGRyYXdcbiAgICAgKiAgIFRoZSBkcmF3KCkgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtkcmF3LmludGVycG9sYXRpb25QZXJjZW50YWdlXVxuICAgICAqICAgVGhlIGN1bXVsYXRpdmUgYW1vdW50IG9mIHRpbWUgdGhhdCBoYXNuJ3QgYmVlbiBzaW11bGF0ZWQgeWV0LCBkaXZpZGVkXG4gICAgICogICBieSB0aGUgYW1vdW50IG9mIHRpbWUgdGhhdCB3aWxsIGJlIHNpbXVsYXRlZCB0aGUgbmV4dCB0aW1lIHVwZGF0ZSgpXG4gICAgICogICBydW5zLiBVc2VmdWwgZm9yIGludGVycG9sYXRpbmcgZnJhbWVzLlxuICAgICAqL1xuICAgIHB1YmxpYyBhYnN0cmFjdCBkcmF3KGludGVycG9sYXRpb25QZXJjZW50YWdlIDogbnVtYmVyKSA6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgcnVucyBhdCB0aGUgZW5kIG9mIHRoZSBtYWluIGxvb3AuXG4gICAgICpcbiAgICAgKiBVbmxpa2Uge0BsaW5rICNzZXRVcGRhdGUgdXBkYXRlfSgpLCB3aGljaCBjYW4gcnVuIHplcm8gb3IgbW9yZSB0aW1lcyBwZXJcbiAgICAgKiBmcmFtZSwgZW5kKCkgYWx3YXlzIHJ1bnMgZXhhY3RseSBvbmNlIHBlciBmcmFtZS4gVGhpcyBtYWtlcyBpdCB1c2VmdWxcbiAgICAgKiBmb3IgYW55IHVwZGF0ZXMgdGhhdCBhcmUgbm90IGRlcGVuZGVudCBvbiB0aW1lIGluIHRoZSBzaW11bGF0aW9uLlxuICAgICAqIEV4YW1wbGVzIGluY2x1ZGUgY2xlYW5pbmcgdXAgYW55IHRlbXBvcmFyeSBzdGF0ZSBzZXQgdXAgYnlcbiAgICAgKiB7QGxpbmsgI3NldEJlZ2luIGJlZ2lufSgpLCBsb3dlcmluZyB0aGUgdmlzdWFsIHF1YWxpdHkgaWYgdGhlIGZyYW1lIHJhdGVcbiAgICAgKiBpcyB0b28gbG93LCBvciBwZXJmb3JtaW5nIGxvbmctcnVubmluZyB1cGRhdGVzIGluY3JlbWVudGFsbHkuIENvbXBhcmVkXG4gICAgICogdG8gYmVnaW4oKSwgZ2VuZXJhbGx5IGFjdGlvbnMgc2hvdWxkIG9jY3VyIGluIGVuZCgpIGlmIHRoZXkgdXNlIGFueXRoaW5nXG4gICAgICogdGhhdCB1cGRhdGUoKSBvciB7QGxpbmsgI3NldERyYXcgZHJhd30oKSBhZmZlY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlbmRcbiAgICAgKiAgIFRoZSBlbmQoKSBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW2VuZC5mcHNdXG4gICAgICogICBUaGUgZXhwb25lbnRpYWwgbW92aW5nIGF2ZXJhZ2Ugb2YgdGhlIGZyYW1lcyBwZXIgc2Vjb25kLiBUaGlzIGlzIHRoZVxuICAgICAqICAgc2FtZSB2YWx1ZSByZXR1cm5lZCBieSBgTWFpbkxvb3AuZ2V0RlBTKClgLiBJdCBjYW4gYmUgdXNlZCB0byB0YWtlXG4gICAgICogICBhY3Rpb24gd2hlbiB0aGUgRlBTIGlzIHRvbyBsb3cgKG9yIHRvIHJlc3RvcmUgdG8gbm9ybWFsY3kgaWYgdGhlIEZQU1xuICAgICAqICAgbW92ZXMgYmFjayB1cCkuIEV4YW1wbGVzIG9mIGFjdGlvbnMgdG8gdGFrZSBpZiB0aGUgRlBTIGlzIHRvbyBsb3dcbiAgICAgKiAgIGluY2x1ZGUgZXhpdGluZyB0aGUgYXBwbGljYXRpb24sIGxvd2VyaW5nIHRoZSB2aXN1YWwgcXVhbGl0eSwgc3RvcHBpbmdcbiAgICAgKiAgIG9yIHJlZHVjaW5nIGFjdGl2aXRpZXMgb3V0c2lkZSBvZiB0aGUgbWFpbiBsb29wIGxpa2UgZXZlbnQgaGFuZGxlcnMgb3JcbiAgICAgKiAgIGF1ZGlvIHBsYXliYWNrLCBwZXJmb3JtaW5nIG5vbi1jcml0aWNhbCB1cGRhdGVzIGxlc3MgZnJlcXVlbnRseSwgb3JcbiAgICAgKiAgIGluY3JlYXNpbmcgdGhlIHNpbXVsYXRpb24gdGltZXN0ZXAgKGJ5IGNhbGxpbmdcbiAgICAgKiAgIGBNYWluTG9vcC5zZXRTaW11bGF0aW9uVGltZXN0ZXAoKWApLiBOb3RlIHRoYXQgdGhpcyBsYXN0IG9wdGlvblxuICAgICAqICAgcmVzdWx0cyBpbiBtb3JlIHRpbWUgYmVpbmcgc2ltdWxhdGVkIHBlciB1cGRhdGUoKSBjYWxsLCB3aGljaCBjYXVzZXNcbiAgICAgKiAgIHRoZSBhcHBsaWNhdGlvbiB0byBiZWhhdmUgbm9uLWRldGVybWluaXN0aWNhbGx5LlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2VuZC5wYW5pYz1mYWxzZV1cbiAgICAgKiAgIEluZGljYXRlcyB3aGV0aGVyIHRoZSBzaW11bGF0aW9uIGhhcyBmYWxsZW4gdG9vIGZhciBiZWhpbmQgcmVhbCB0aW1lLlxuICAgICAqICAgU3BlY2lmaWNhbGx5LCBgcGFuaWNgIHdpbGwgYmUgYHRydWVgIGlmIHRvbyBtYW55IHVwZGF0ZXMgb2NjdXJyZWQgaW5cbiAgICAgKiAgIG9uZSBmcmFtZS4gSW4gbmV0d29ya2VkIGxvY2tzdGVwIGFwcGxpY2F0aW9ucywgdGhlIGFwcGxpY2F0aW9uIHNob3VsZFxuICAgICAqICAgd2FpdCBmb3Igc29tZSBhbW91bnQgb2YgdGltZSB0byBzZWUgaWYgdGhlIHVzZXIgY2FuIGNhdGNoIHVwIGJlZm9yZVxuICAgICAqICAgZHJvcHBpbmcgdGhlIHVzZXIuIEluIG5ldHdvcmtlZCBidXQgbm9uLWxvY2tzdGVwIGFwcGxpY2F0aW9ucywgdGhpc1xuICAgICAqICAgdHlwaWNhbGx5IGluZGljYXRlcyB0aGF0IHRoZSB1c2VyIG5lZWRzIHRvIGJlIHNuYXBwZWQgb3IgZWFzZWQgdG8gdGhlXG4gICAgICogICBjdXJyZW50IGF1dGhvcml0YXRpdmUgc3RhdGUuIFdoZW4gdGhpcyBoYXBwZW5zLCBpdCBtYXkgYmUgY29udmVuaWVudFxuICAgICAqICAgdG8gY2FsbCBgTWFpbkxvb3AucmVzZXRGcmFtZURlbHRhKClgIHRvIGRpc2NhcmQgYWNjdW11bGF0ZWQgcGVuZGluZ1xuICAgICAqICAgdXBkYXRlcy4gSW4gbm9uLW5ldHdvcmtlZCBhcHBsaWNhdGlvbnMsIGl0IG1heSBiZSBhY2NlcHRhYmxlIHRvIGFsbG93XG4gICAgICogICB0aGUgYXBwbGljYXRpb24gdG8ga2VlcCBydW5uaW5nIGZvciBhd2hpbGUgdG8gc2VlIGlmIGl0IHdpbGwgY2F0Y2ggdXAuXG4gICAgICogICBIb3dldmVyLCB0aGlzIGNvdWxkIGFsc28gY2F1c2UgdGhlIGFwcGxpY2F0aW9uIHRvIGxvb2sgbGlrZSBpdCBpc1xuICAgICAqICAgcnVubmluZyB2ZXJ5IHF1aWNrbHkgZm9yIGEgZmV3IGZyYW1lcyBhcyBpdCB0cmFuc2l0aW9ucyB0aHJvdWdoIHRoZVxuICAgICAqICAgaW50ZXJtZWRpYXRlIHN0YXRlcy4gQW4gYWx0ZXJuYXRpdmUgdGhhdCBtYXkgYmUgYWNjZXB0YWJsZSBpcyB0b1xuICAgICAqICAgc2ltcGx5IGlnbm9yZSB0aGUgdW5zaW11bGF0ZWQgZWxhcHNlZCB0aW1lIGJ5IGNhbGxpbmdcbiAgICAgKiAgIGBNYWluTG9vcC5yZXNldEZyYW1lRGVsdGEoKWAgZXZlbiB0aG91Z2ggdGhpcyBpbnRyb2R1Y2VzXG4gICAgICogICBub24tZGV0ZXJtaW5pc3RpYyBiZWhhdmlvci4gSW4gYWxsIGNhc2VzLCBpZiB0aGUgYXBwbGljYXRpb24gcGFuaWNzXG4gICAgICogICBmcmVxdWVudGx5LCB0aGlzIGlzIGFuIGluZGljYXRpb24gdGhhdCB0aGUgbWFpbiBsb29wIGlzIHJ1bm5pbmcgdG9vXG4gICAgICogICBzbG93bHkuIEhvd2V2ZXIsIG1vc3Qgb2YgdGhlIHRpbWUgdGhlIGRyb3AgaW4gZnJhbWUgcmF0ZSB3aWxsIHByb2JhYmx5XG4gICAgICogICBiZSBub3RpY2VhYmxlIGJlZm9yZSBhIHBhbmljIG9jY3Vycy4gVG8gaGVscCB0aGUgYXBwbGljYXRpb24gY2F0Y2ggdXBcbiAgICAgKiAgIGFmdGVyIGEgcGFuaWMgY2F1c2VkIGJ5IGEgc3BpcmFsIG9mIGRlYXRoLCB0aGUgc2FtZSBzdGVwcyBjYW4gYmUgdGFrZW5cbiAgICAgKiAgIHRoYXQgYXJlIHN1Z2dlc3RlZCBhYm92ZSBpZiB0aGUgRlBTIGRyb3BzIHRvbyBsb3cuXG4gICAgICovXG4gICAgYWJzdHJhY3QgZW5kKGZwcyA6IG51bWJlciwgcGFuaWMgOiBib29sZWFuKSA6IHZvaWQ7XG59IiwiLypcbiAqIE1hdGhVdGlsaXRpZXMgcHJvdmlkZXMgYSBudW1iZXIgb2Ygc2VydmljZXMgZm9yIHJlbmRlcmluZyB1c2luZyA0eDQgbWF0cmljZXMsIGxpa2VcbiAqIHRyYW5zZm9ybXRpbmcgKGkuZS4gdHJhbnNsYXRpb24sIHJvdGF0aW9uLCBhbmQgc2NhbGluZykgM2Qgb3IgMmQgcG9pbnRzIGZyb20gd29ybGRcbiAqIGNvb3JkaW5hdGUgc3lzdGVtcyB0byBzY3JlZW4gY29vcmRpbmF0ZSBzeXN0ZW1zLlxuICovXG5pbXBvcnQge01hdHJpeH0gZnJvbSAnLi9NYXRyaXgnXG5pbXBvcnQge1ZlY3RvcjN9IGZyb20gJy4vVmVjdG9yMydcblxuZXhwb3J0IG5hbWVzcGFjZSBNYXRoVXRpbGl0aWVzIHtcbiAgICBleHBvcnQgZnVuY3Rpb24gZGV0ZXJtaW5hbnQ0eDQocmVzdWx0IDogTWF0cml4KSA6IG51bWJlciB7XG4gICAgICAgIGxldCBkZXQwID0gcmVzdWx0LmdldCgwLCAwKSAqIChcbiAgICAgICAgICAgIChyZXN1bHQuZ2V0KDEsIDEpICogKChyZXN1bHQuZ2V0KDIsIDIpICogcmVzdWx0LmdldCgzLCAzKSkgLSAocmVzdWx0LmdldCgyLCAzKSAqIHJlc3VsdC5nZXQoMywgMikpKSlcbiAgICAgICAgICAgIC0gKHJlc3VsdC5nZXQoMSwgMikgKiAoKHJlc3VsdC5nZXQoMiwgMSkgKiByZXN1bHQuZ2V0KDMsIDMpKSAtIChyZXN1bHQuZ2V0KDIsIDMpICogcmVzdWx0LmdldCgzLCAxKSkpKVxuICAgICAgICAgICAgKyAocmVzdWx0LmdldCgxLCAzKSAqICgocmVzdWx0LmdldCgyLCAxKSAqIHJlc3VsdC5nZXQoMywgMikpIC0gKHJlc3VsdC5nZXQoMywgMSkgKiByZXN1bHQuZ2V0KDIsIDIpKSkpKTtcbiAgICAgICAgbGV0IGRldDEgPSByZXN1bHQuZ2V0KDAsIDEpICogKFxuICAgICAgICAgICAgKHJlc3VsdC5nZXQoMSwgMCkgKiAoKHJlc3VsdC5nZXQoMiwgMikgKiByZXN1bHQuZ2V0KDMsIDMpKSAtIChyZXN1bHQuZ2V0KDIsIDMpICogcmVzdWx0LmdldCgzLCAyKSkpKVxuICAgICAgICAgICAgLSAocmVzdWx0LmdldCgxLCAyKSAqICgocmVzdWx0LmdldCgyLCAwKSAqIHJlc3VsdC5nZXQoMywgMykpIC0gKHJlc3VsdC5nZXQoMywgMCkgKiByZXN1bHQuZ2V0KDIsIDMpKSkpXG4gICAgICAgICAgICArIChyZXN1bHQuZ2V0KDEsIDMpICogKChyZXN1bHQuZ2V0KDIsIDApICogcmVzdWx0LmdldCgzLCAyKSkgLSAocmVzdWx0LmdldCgzLCAwKSAqIHJlc3VsdC5nZXQoMiwgMikpKSkpO1xuICAgICAgICBsZXQgZGV0MiA9IHJlc3VsdC5nZXQoMCwgMikgKiAoXG4gICAgICAgICAgICAocmVzdWx0LmdldCgxLCAwKSAqICgocmVzdWx0LmdldCgyLCAxKSAqIHJlc3VsdC5nZXQoMywgMykpIC0gKHJlc3VsdC5nZXQoMiwgMykgKiByZXN1bHQuZ2V0KDMsIDEpKSkpXG4gICAgICAgICAgICAtIChyZXN1bHQuZ2V0KDEsIDEpICogKChyZXN1bHQuZ2V0KDIsIDApICogcmVzdWx0LmdldCgzLCAzKSkgLSAocmVzdWx0LmdldCgyLCAzKSAqIHJlc3VsdC5nZXQoMywgMCkpKSlcbiAgICAgICAgICAgICsgKHJlc3VsdC5nZXQoMSwgMykgKiAoKHJlc3VsdC5nZXQoMiwgMCkgKiByZXN1bHQuZ2V0KDMsIDEpKSAtIChyZXN1bHQuZ2V0KDIsIDEpICogcmVzdWx0LmdldCgzLCAwKSkpKSk7XG4gICAgICAgIGxldCBkZXQzID0gcmVzdWx0LmdldCgwLCAzKSAqIChcbiAgICAgICAgICAgIChyZXN1bHQuZ2V0KDEsIDApICogKChyZXN1bHQuZ2V0KDIsIDEpICogcmVzdWx0LmdldCgzLCAyKSkgLSAocmVzdWx0LmdldCgyLCAyKSAqIHJlc3VsdC5nZXQoMywgMSkpKSlcbiAgICAgICAgICAgIC0gKHJlc3VsdC5nZXQoMSwgMSkgKiAoKHJlc3VsdC5nZXQoMiwgMCkgKiByZXN1bHQuZ2V0KDMsIDIpKSAtIChyZXN1bHQuZ2V0KDIsIDIpICogcmVzdWx0LmdldCgzLCAwKSkpKVxuICAgICAgICAgICAgKyAocmVzdWx0LmdldCgxLCAyKSAqICgocmVzdWx0LmdldCgyLCAwKSAqIHJlc3VsdC5nZXQoMywgMSkpIC0gKHJlc3VsdC5nZXQoMiwgMSkgKiByZXN1bHQuZ2V0KDMsIDApKSkpKTtcbiAgICAgICAgbGV0IGRldCA9IGRldDAgLSBkZXQxICsgZGV0MiAtIGRldDM7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZGV0ID0gXCIgKyBkZXQwICsgXCIgKyBcIiArIGRldDEgKyBcIiArIFwiICsgZGV0MiArIFwiICsgXCIgKyBkZXQzKTtcbiAgICAgICAgcmV0dXJuIGRldDtcbiAgICB9XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KHJlc3VsdCA6IE1hdHJpeCkgOiB2b2lkIHtcbiAgICAgICAgaWYgKHJlc3VsdC5nZXRSb3dzKCkgPT09IHJlc3VsdC5nZXRDb2x1bW5zKCkpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0LmdldFJvd3MoKTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCByZXN1bHQuZ2V0Q29sdW1ucygpOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IGopXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc2V0KDEuMCwgaSwgaik7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zZXQoMC4wLCBpLCBqKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGludmVyc2UocmVzdWx0IDogTWF0cml4LCBtYXQgOiBNYXRyaXgpIDogdm9pZCB7XG4gICAgICAgIGxldCBkZXQgPSB0aGlzLmRldGVybWluYW50KG1hdCk7XG4gICAgICAgIGxldCBtMDAgPSBtYXQuZ2V0KDAsIDApOyBsZXQgbTAxID0gbWF0LmdldCgwLCAxKTsgbGV0IG0wMiA9IG1hdC5nZXQoMCwgMik7IGxldCBtMDMgPSBtYXQuZ2V0KDAsIDMpO1xuICAgICAgICBsZXQgbTEwID0gbWF0LmdldCgxLCAwKTsgbGV0IG0xMSA9IG1hdC5nZXQoMSwgMSk7IGxldCBtMTIgPSBtYXQuZ2V0KDEsIDIpOyBsZXQgbTEzID0gbWF0LmdldCgxLCAzKTtcbiAgICAgICAgbGV0IG0yMCA9IG1hdC5nZXQoMiwgMCk7IGxldCBtMjEgPSBtYXQuZ2V0KDIsIDEpOyBsZXQgbTIyID0gbWF0LmdldCgyLCAyKTsgbGV0IG0yMyA9IG1hdC5nZXQoMiwgMyk7XG4gICAgICAgIGxldCBtMzAgPSBtYXQuZ2V0KDMsIDApOyBsZXQgbTMxID0gbWF0LmdldCgzLCAxKTsgbGV0IG0zMiA9IG1hdC5nZXQoMywgMik7IGxldCBtMzMgPSBtYXQuZ2V0KDMsIDMpO1xuICAgICAgICBsZXQgdGVtcCA9IG5ldyBNYXRyaXgoNCwgNCk7XG4gICAgICAgIHRlbXAuc2V0KChtMTIgKiBtMjMgKiBtMzEpIC0gKG0xMyAqIG0yMiAqIG0zMSkgKyAobTEzICogbTIxICogbTMyKSAtIChtMTEgKiBtMjMgKiBtMzIpIC0gKG0xMiAqIG0yMSAqIG0zMykgKyAobTExICogbTIyICogbTMzKSwgMCwgMCk7XG4gICAgICAgIHRlbXAuc2V0KChtMDMgKiBtMjIgKiBtMzEpIC0gKG0wMiAqIG0yMyAqIG0zMSkgLSAobTAzICogbTIxICogbTMyKSArIChtMDEgKiBtMjMgKiBtMzIpICsgKG0wMiAqIG0yMSAqIG0zMykgLSAobTAxICogbTIyICogbTMzKSwgMCwgMSk7XG4gICAgICAgIHRlbXAuc2V0KChtMDIgKiBtMTMgKiBtMzEpIC0gKG0wMyAqIG0xMiAqIG0zMSkgKyAobTAzICogbTExICogbTMyKSAtIChtMDEgKiBtMTMgKiBtMzIpIC0gKG0wMiAqIG0xMSAqIG0zMykgKyAobTAxICogbTEyICogbTMzKSwgMCwgMik7XG4gICAgICAgIHRlbXAuc2V0KChtMDMgKiBtMTIgKiBtMjEpIC0gKG0wMiAqIG0xMyAqIG0yMSkgLSAobTAzICogbTExICogbTIyKSArIChtMDEgKiBtMTMgKiBtMjIpICsgKG0wMiAqIG0xMSAqIG0yMykgLSAobTAxICogbTEyICogbTIzKSwgMCwgMyk7XG4gICAgICAgIHRlbXAuc2V0KChtMTMgKiBtMjIgKiBtMzApIC0gKG0xMiAqIG0yMyAqIG0zMCkgLSAobTEzICogbTIwICogbTMyKSArIChtMTAgKiBtMjMgKiBtMzIpICsgKG0xMiAqIG0yMCAqIG0zMykgLSAobTEwICogbTIyICogbTMzKSwgMSwgMCk7XG4gICAgICAgIHRlbXAuc2V0KChtMDIgKiBtMjMgKiBtMzApIC0gKG0wMyAqIG0yMiAqIG0zMCkgKyAobTAzICogbTIwICogbTMyKSAtIChtMDAgKiBtMjMgKiBtMzIpIC0gKG0wMiAqIG0yMCAqIG0zMykgKyAobTAwICogbTIyICogbTMzKSwgMSwgMSk7XG4gICAgICAgIHRlbXAuc2V0KChtMDMgKiBtMTIgKiBtMzApIC0gKG0wMiAqIG0xMyAqIG0zMCkgLSAobTAzICogbTEwICogbTMyKSArIChtMDAgKiBtMTMgKiBtMzIpICsgKG0wMiAqIG0xMCAqIG0zMykgLSAobTAwICogbTEyICogbTMzKSwgMSwgMik7XG4gICAgICAgIHRlbXAuc2V0KChtMDIgKiBtMTMgKiBtMjApIC0gKG0wMyAqIG0xMiAqIG0yMCkgKyAobTAzICogbTEwICogbTIyKSAtIChtMDAgKiBtMTMgKiBtMjIpIC0gKG0wMiAqIG0xMCAqIG0yMykgKyAobTAwICogbTEyICogbTIzKSwgMSwgMyk7XG4gICAgICAgIHRlbXAuc2V0KChtMTEgKiBtMjMgKiBtMzApIC0gKG0xMyAqIG0yMSAqIG0zMCkgKyAobTEzICogbTIwICogbTMxKSAtIChtMTAgKiBtMjMgKiBtMzEpIC0gKG0xMSAqIG0yMCAqIG0zMykgKyAobTEwICogbTIxICogbTMzKSwgMiwgMCk7XG4gICAgICAgIHRlbXAuc2V0KChtMDMgKiBtMjEgKiBtMzApIC0gKG0wMSAqIG0yMyAqIG0zMCkgLSAobTAzICogbTIwICogbTMxKSArIChtMDAgKiBtMjMgKiBtMzEpICsgKG0wMSAqIG0yMCAqIG0zMykgLSAobTAwICogbTIxICogbTMzKSwgMiwgMSk7XG4gICAgICAgIHRlbXAuc2V0KChtMDEgKiBtMTMgKiBtMzApIC0gKG0wMyAqIG0xMSAqIG0zMCkgKyAobTAzICogbTEwICogbTMxKSAtIChtMDAgKiBtMTMgKiBtMzEpIC0gKG0wMSAqIG0xMCAqIG0zMykgKyAobTAwICogbTExICogbTMzKSwgMiwgMik7XG4gICAgICAgIHRlbXAuc2V0KChtMDMgKiBtMTEgKiBtMjApIC0gKG0wMSAqIG0xMyAqIG0yMCkgLSAobTAzICogbTEwICogbTIxKSArIChtMDAgKiBtMTMgKiBtMjEpICsgKG0wMSAqIG0xMCAqIG0yMykgLSAobTAwICogbTExICogbTIzKSwgMiwgMyk7XG4gICAgICAgIHRlbXAuc2V0KChtMTIgKiBtMjEgKiBtMzApIC0gKG0xMSAqIG0yMiAqIG0zMCkgLSAobTEyICogbTIwICogbTMxKSArIChtMTAgKiBtMjIgKiBtMzEpICsgKG0xMSAqIG0yMCAqIG0zMikgLSAobTEwICogbTIxICogbTMyKSwgMywgMCk7XG4gICAgICAgIHRlbXAuc2V0KChtMDEgKiBtMjIgKiBtMzApIC0gKG0wMiAqIG0yMSAqIG0zMCkgKyAobTAyICogbTIwICogbTMxKSAtIChtMDAgKiBtMjIgKiBtMzEpIC0gKG0wMSAqIG0yMCAqIG0zMikgKyAobTAwICogbTIxICogbTMyKSwgMywgMSk7XG4gICAgICAgIHRlbXAuc2V0KChtMDIgKiBtMTEgKiBtMzApIC0gKG0wMSAqIG0xMiAqIG0zMCkgLSAobTAyICogbTEwICogbTMxKSArIChtMDAgKiBtMTIgKiBtMzEpICsgKG0wMSAqIG0xMCAqIG0zMikgLSAobTAwICogbTExICogbTMyKSwgMywgMik7XG4gICAgICAgIHRlbXAuc2V0KChtMDEgKiBtMTIgKiBtMjApIC0gKG0wMiAqIG0xMSAqIG0yMCkgKyAobTAyICogbTEwICogbTIxKSAtIChtMDAgKiBtMTIgKiBtMjEpIC0gKG0wMSAqIG0xMCAqIG0yMikgKyAobTAwICogbTExICogbTIyKSwgMywgMyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDQ7IGorKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5zZXQodGVtcC5nZXQoaSwgaikgLyBkZXQsIGksIGopO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydCBmdW5jdGlvbiBtb2RlbChyZXN1bHQgOiBNYXRyaXgsIHRyYW5zbGF0aW9uIDogVmVjdG9yMywgcm90YXRpb24gOiBWZWN0b3IzLCBzY2FsZSA6IFZlY3RvcjMpIDogdm9pZCB7XG4gICAgICAgIC8vIFRSQU5TTEFUSU9OIE1BVFJJWFx0XG4gICAgICAgIGxldCB0cmFuc2xhdGlvbk1hdHJpeCA9IG5ldyBNYXRyaXgoNCwgNCk7XG4gICAgICAgIHRoaXMuaWRlbnRpdHkodHJhbnNsYXRpb25NYXRyaXgpO1xuICAgICAgICB0aGlzLnRyYW5zbGF0ZSh0cmFuc2xhdGlvbk1hdHJpeCwgdHJhbnNsYXRpb24pO1xuXG4gICAgICAgIC8vIFJPVEFUSU9OIE1BVFJJWFxuICAgICAgICBsZXQgcm90YXRpb25NYXRyaXggPSBuZXcgTWF0cml4KDQsIDQpO1xuICAgICAgICB0aGlzLmlkZW50aXR5KHJvdGF0aW9uTWF0cml4KTtcbiAgICAgICAgdGhpcy5yb3RhdGUocm90YXRpb25NYXRyaXgsIHJvdGF0aW9uKTtcblxuICAgICAgICAvLyBTQ0FMSU5HIE1BVFJJWFxuICAgICAgICBsZXQgc2NhbGVNYXRyaXggPSBuZXcgTWF0cml4KDQsIDQpO1xuICAgICAgICB0aGlzLmlkZW50aXR5KHNjYWxlTWF0cml4KTtcbiAgICAgICAgdGhpcy5zY2FsZShzY2FsZU1hdHJpeCwgc2NhbGUpO1xuXG4gICAgICAgIC8vIEFORCBOT1cgTVVMVElQTFkgVEhFTSBUT0dFVEhFUiBJTiBUSEUgQ09SUkVDVCBPUkRFUlxuICAgICAgICBsZXQgdGVtcE1hdHJpeCA9IG5ldyBNYXRyaXgoNCwgNCk7XG4gICAgICAgIHRoaXMubXVsdGlwbHkodGVtcE1hdHJpeCwgdHJhbnNsYXRpb25NYXRyaXgsIHJvdGF0aW9uTWF0cml4KTtcbiAgICAgICAgdGhpcy5tdWx0aXBseShyZXN1bHQsIHRlbXBNYXRyaXgsIHNjYWxlTWF0cml4KTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkocmVzdWx0IDogTWF0cml4LCBtYXQwIDogTWF0cml4LCBtYXQxIDogTWF0cml4KSA6IHZvaWQge1xuICAgICAgICAvLyByZXN1bHQgTUlHSFQgQkUgbWF0MCBPUiBtYXQxIFNPIElUJ1MgQkVTVCBJRiBXRVxuICAgICAgICAvLyBDQUxDVUxBVEUgVEVNUCBWQUxVRVMgRklSU1QgQkVGT1JFIEFTU0lHTk1FTlRcbiAgICAgICAgbGV0IHIwMCA9IChtYXQwLmdldCgwLCAwKSAqIG1hdDEuZ2V0KDAsIDApKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMCwgMSkgKiBtYXQxLmdldCgxLCAwKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDAsIDIpICogbWF0MS5nZXQoMiwgMCkpXG4gICAgICAgICAgICArIChtYXQwLmdldCgwLCAzKSAqIG1hdDEuZ2V0KDMsIDApKTtcbiAgICAgICAgbGV0IHIxMCA9IChtYXQwLmdldCgxLCAwKSAqIG1hdDEuZ2V0KDAsIDApKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMSwgMSkgKiBtYXQxLmdldCgxLCAwKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDEsIDIpICogbWF0MS5nZXQoMiwgMCkpXG4gICAgICAgICAgICArIChtYXQwLmdldCgxLCAzKSAqIG1hdDEuZ2V0KDMsIDApKTtcbiAgICAgICAgbGV0IHIyMCA9IChtYXQwLmdldCgyLCAwKSAqIG1hdDEuZ2V0KDAsIDApKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMiwgMSkgKiBtYXQxLmdldCgxLCAwKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDIsIDIpICogbWF0MS5nZXQoMiwgMCkpXG4gICAgICAgICAgICArIChtYXQwLmdldCgyLCAzKSAqIG1hdDEuZ2V0KDMsIDApKTtcbiAgICAgICAgbGV0IHIzMCA9IChtYXQwLmdldCgzLCAwKSAqIG1hdDEuZ2V0KDAsIDApKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMywgMSkgKiBtYXQxLmdldCgxLCAwKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDMsIDIpICogbWF0MS5nZXQoMiwgMCkpXG4gICAgICAgICAgICArIChtYXQwLmdldCgzLCAzKSAqIG1hdDEuZ2V0KDMsIDApKTtcbiAgICAgICAgbGV0IHIwMSA9IChtYXQwLmdldCgwLCAwKSAqIG1hdDEuZ2V0KDAsIDEpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMCwgMSkgKiBtYXQxLmdldCgxLCAxKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDAsIDIpICogbWF0MS5nZXQoMiwgMSkpXG4gICAgICAgICAgICArIChtYXQwLmdldCgwLCAzKSAqIG1hdDEuZ2V0KDMsIDEpKTtcbiAgICAgICAgbGV0IHIxMSA9IChtYXQwLmdldCgxLCAwKSAqIG1hdDEuZ2V0KDAsIDEpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMSwgMSkgKiBtYXQxLmdldCgxLCAxKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDEsIDIpICogbWF0MS5nZXQoMiwgMSkpXG4gICAgICAgICAgICArIChtYXQwLmdldCgxLCAzKSAqIG1hdDEuZ2V0KDMsIDEpKTtcbiAgICAgICAgbGV0IHIyMSA9IChtYXQwLmdldCgyLCAwKSAqIG1hdDEuZ2V0KDAsIDEpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMiwgMSkgKiBtYXQxLmdldCgxLCAxKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDIsIDIpICogbWF0MS5nZXQoMiwgMSkpXG4gICAgICAgICAgICArIChtYXQwLmdldCgyLCAzKSAqIG1hdDEuZ2V0KDMsIDEpKTtcbiAgICAgICAgbGV0IHIzMSA9IChtYXQwLmdldCgzLCAwKSAqIG1hdDEuZ2V0KDAsIDEpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMywgMSkgKiBtYXQxLmdldCgxLCAxKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDMsIDIpICogbWF0MS5nZXQoMiwgMSkpXG4gICAgICAgICAgICArIChtYXQwLmdldCgzLCAzKSAqIG1hdDEuZ2V0KDMsIDEpKTtcbiAgICAgICAgbGV0IHIwMiA9IChtYXQwLmdldCgwLCAwKSAqIG1hdDEuZ2V0KDAsIDIpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMCwgMSkgKiBtYXQxLmdldCgxLCAyKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDAsIDIpICogbWF0MS5nZXQoMiwgMikpXG4gICAgICAgICAgICArIChtYXQwLmdldCgwLCAzKSAqIG1hdDEuZ2V0KDMsIDIpKTtcbiAgICAgICAgbGV0IHIxMiA9IChtYXQwLmdldCgxLCAwKSAqIG1hdDEuZ2V0KDAsIDIpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMSwgMSkgKiBtYXQxLmdldCgxLCAyKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDEsIDIpICogbWF0MS5nZXQoMiwgMikpXG4gICAgICAgICAgICArIChtYXQwLmdldCgxLCAzKSAqIG1hdDEuZ2V0KDMsIDIpKTtcbiAgICAgICAgbGV0IHIyMiA9IChtYXQwLmdldCgyLCAwKSAqIG1hdDEuZ2V0KDAsIDIpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMiwgMSkgKiBtYXQxLmdldCgxLCAyKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDIsIDIpICogbWF0MS5nZXQoMiwgMikpXG4gICAgICAgICAgICArIChtYXQwLmdldCgyLCAzKSAqIG1hdDEuZ2V0KDMsIDIpKTtcbiAgICAgICAgbGV0IHIzMiA9IChtYXQwLmdldCgzLCAwKSAqIG1hdDEuZ2V0KDAsIDIpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMywgMSkgKiBtYXQxLmdldCgxLCAyKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDMsIDIpICogbWF0MS5nZXQoMiwgMikpXG4gICAgICAgICAgICArIChtYXQwLmdldCgzLCAzKSAqIG1hdDEuZ2V0KDMsIDIpKTtcbiAgICAgICAgbGV0IHIwMyA9IChtYXQwLmdldCgwLCAwKSAqIG1hdDEuZ2V0KDAsIDMpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMCwgMSkgKiBtYXQxLmdldCgxLCAzKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDAsIDIpICogbWF0MS5nZXQoMiwgMykpXG4gICAgICAgICAgICArIChtYXQwLmdldCgwLCAzKSAqIG1hdDEuZ2V0KDMsIDMpKTtcbiAgICAgICAgbGV0IHIxMyA9IChtYXQwLmdldCgxLCAwKSAqIG1hdDEuZ2V0KDAsIDMpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMSwgMSkgKiBtYXQxLmdldCgxLCAzKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDEsIDIpICogbWF0MS5nZXQoMiwgMykpXG4gICAgICAgICAgICArIChtYXQwLmdldCgxLCAzKSAqIG1hdDEuZ2V0KDMsIDMpKTtcbiAgICAgICAgbGV0IHIyMyA9IChtYXQwLmdldCgyLCAwKSAqIG1hdDEuZ2V0KDAsIDMpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMiwgMSkgKiBtYXQxLmdldCgxLCAzKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDIsIDIpICogbWF0MS5nZXQoMiwgMykpXG4gICAgICAgICAgICArIChtYXQwLmdldCgyLCAzKSAqIG1hdDEuZ2V0KDMsIDMpKTtcbiAgICAgICAgbGV0IHIzMyA9IChtYXQwLmdldCgzLCAwKSAqIG1hdDEuZ2V0KDAsIDMpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMywgMSkgKiBtYXQxLmdldCgxLCAzKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDMsIDIpICogbWF0MS5nZXQoMiwgMykpXG4gICAgICAgICAgICArIChtYXQwLmdldCgzLCAzKSAqIG1hdDEuZ2V0KDMsIDMpKTtcblxuICAgICAgICAvLyBOT1cgUFVUIEFMTCBUSEUgQ0FMQ1VMQVRFRCBWQUxVRVMgSU4gVEhFIHJlc3VsdCBNQVRSSVhcbiAgICAgICAgcmVzdWx0LnNldChyMDAsIDAsIDApO1xuICAgICAgICByZXN1bHQuc2V0KHIxMCwgMSwgMCk7XG4gICAgICAgIHJlc3VsdC5zZXQocjIwLCAyLCAwKTtcbiAgICAgICAgcmVzdWx0LnNldChyMzAsIDMsIDApO1xuICAgICAgICByZXN1bHQuc2V0KHIwMSwgMCwgMSk7XG4gICAgICAgIHJlc3VsdC5zZXQocjExLCAxLCAxKTtcbiAgICAgICAgcmVzdWx0LnNldChyMjEsIDIsIDEpO1xuICAgICAgICByZXN1bHQuc2V0KHIzMSwgMywgMSk7XG4gICAgICAgIHJlc3VsdC5zZXQocjAyLCAwLCAyKTtcbiAgICAgICAgcmVzdWx0LnNldChyMTIsIDEsIDIpO1xuICAgICAgICByZXN1bHQuc2V0KHIyMiwgMiwgMik7XG4gICAgICAgIHJlc3VsdC5zZXQocjMyLCAzLCAyKTtcbiAgICAgICAgcmVzdWx0LnNldChyMDMsIDAsIDMpO1xuICAgICAgICByZXN1bHQuc2V0KHIxMywgMSwgMyk7XG4gICAgICAgIHJlc3VsdC5zZXQocjIzLCAyLCAzKTtcbiAgICAgICAgcmVzdWx0LnNldChyMzMsIDMsIDMpO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBwcm9qZWN0aW9uKHJlc3VsdCA6IE1hdHJpeCwgbmVhclogOiBudW1iZXIsIGZhclogOiBudW1iZXIsIHZpZXdwb3J0V2lkdGggOiBudW1iZXIsIHZpZXdwb3J0SGVpZ2h0IDogbnVtYmVyLCBmb3ZZIDogbnVtYmVyKSA6IHZvaWQge1xuICAgICAgICBsZXQgYXNwZWN0UmF0aW8gPSB2aWV3cG9ydFdpZHRoIC8gdmlld3BvcnRIZWlnaHQ7XG4gICAgICAgIGxldCBmaWVsZE9mVmlld1kgPSB0aGlzLm1hdGguZGVncmVlc1RvUmFkaWFucyhmb3ZZKTtcbiAgICAgICAgbGV0IGZpZWxkT2ZWaWV3WCA9IDIgKiBNYXRoLmF0YW4oTWF0aC50YW4oZmllbGRPZlZpZXdZIC8gMikgKiBhc3BlY3RSYXRpbyk7XG5cbiAgICAgICAgLy8gV0UnTEwgVVNFIFRIRVNFIEFTIFNIT1JUSEFORCBGT1IgTE9BRElORyBPVVIgTUFUUklYXG4gICAgICAgIGxldCBuID0gbmVhclo7XG4gICAgICAgIGxldCBmID0gZmFyWjtcbiAgICAgICAgbGV0IHIgPSBNYXRoLnRhbihmaWVsZE9mVmlld1ggLyAyKSAqIG47XG4gICAgICAgIGxldCB0ID0gTWF0aC50YW4oZmllbGRPZlZpZXdZIC8gMikgKiBuO1xuXG4gICAgICAgIC8vIDAtM1xuICAgICAgICByZXN1bHQuc2V0KG4gLyByLCAwLCAwKTtcbiAgICAgICAgcmVzdWx0LnNldCgwLjAsIDAsIDEpO1xuICAgICAgICByZXN1bHQuc2V0KDAuMCwgMCwgMik7XG4gICAgICAgIHJlc3VsdC5zZXQoMC4wLCAwLCAzKTtcbiAgICAgICAgLy8gNC03XG4gICAgICAgIHJlc3VsdC5zZXQoMC4wLCAxLCAwKTtcbiAgICAgICAgcmVzdWx0LnNldChuIC8gdCwgMSwgMSk7XG4gICAgICAgIHJlc3VsdC5zZXQoMC4wLCAxLCAyKTtcbiAgICAgICAgcmVzdWx0LnNldCgwLjAsIDEsIDMpO1xuICAgICAgICAvLyA4LTExXG4gICAgICAgIHJlc3VsdC5zZXQoMC4wLCAyLCAwKTtcbiAgICAgICAgcmVzdWx0LnNldCgwLjAsIDIsIDEpO1xuICAgICAgICByZXN1bHQuc2V0KCgtKGYgKyBuKSkgLyAoZiAtIG4pLCAyLCAyKTtcbiAgICAgICAgcmVzdWx0LnNldCgoLTIgKiBmICogbikgLyAoZiAtIG4pLCAyLCAzKTtcbiAgICAgICAgLy8gMTItMTUgXG4gICAgICAgIHJlc3VsdC5zZXQoMC4wLCAzLCAwKTtcbiAgICAgICAgcmVzdWx0LnNldCgwLjAsIDMsIDEpO1xuICAgICAgICByZXN1bHQuc2V0KC0xLjAsIDMsIDIpO1xuICAgICAgICByZXN1bHQuc2V0KDAuMCwgMywgMyk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShyZXN1bHQgOiBNYXRyaXgsIHJvdGF0aW9uVmVjdG9yIDogVmVjdG9yMykgOiB2b2lkIHtcbiAgICAgICAgLy8gU1RBUlQgV0lUSCBUSEUgWC1BWElTIFJPVEFUSU9OXG4gICAgICAgIGxldCB4Um90YXRpb25NYXRyaXggPSBuZXcgTWF0cml4KDQsIDQpO1xuICAgICAgICB0aGlzLmlkZW50aXR5KHhSb3RhdGlvbk1hdHJpeCk7XG4gICAgICAgIGxldCB0aGV0YVggPSByb3RhdGlvblZlY3Rvci5nZXRUaGV0YVgoKTtcbiAgICAgICAgeFJvdGF0aW9uTWF0cml4LnNldChNYXRoLmNvcyh0aGV0YVgpLCAxLCAxKTtcbiAgICAgICAgeFJvdGF0aW9uTWF0cml4LnNldChNYXRoLnNpbih0aGV0YVgpLCAyLCAxKTtcbiAgICAgICAgeFJvdGF0aW9uTWF0cml4LnNldCgtMSAqIE1hdGguc2luKHRoZXRhWCksIDEsIDIpO1xuICAgICAgICB4Um90YXRpb25NYXRyaXguc2V0KE1hdGguY29zKHRoZXRhWCksIDIsIDIpO1xuXG4gICAgICAgIC8vIFNUQVJUIFdJVEggVEhFIFktQVhJUyBST1RBVElPTlxuICAgICAgICBsZXQgeVJvdGF0aW9uTWF0cml4ID0gbmV3IE1hdHJpeCg0LCA0KTtcbiAgICAgICAgdGhpcy5pZGVudGl0eSh5Um90YXRpb25NYXRyaXgpO1xuICAgICAgICBsZXQgdGhldGFZID0gcm90YXRpb25WZWN0b3IuZ2V0VGhldGFZKCk7XG4gICAgICAgIHlSb3RhdGlvbk1hdHJpeC5zZXQoTWF0aC5jb3ModGhldGFZKSwgMCwgMCk7XG4gICAgICAgIHlSb3RhdGlvbk1hdHJpeC5zZXQoLTEgKiBNYXRoLnNpbih0aGV0YVkpLCAyLCAwKTtcbiAgICAgICAgeVJvdGF0aW9uTWF0cml4LnNldChNYXRoLnNpbih0aGV0YVkpLCAwLCAyKTtcbiAgICAgICAgeVJvdGF0aW9uTWF0cml4LnNldChNYXRoLmNvcyh0aGV0YVkpLCAyLCAyKTtcblxuICAgICAgICAvLyBTVEFSVCBXSVRIIFRIRSBaLUFYSVMgUk9UQVRJT05cbiAgICAgICAgbGV0IHpSb3RhdGlvbk1hdHJpeCA9IG5ldyBNYXRyaXgoNCwgNCk7XG4gICAgICAgIHRoaXMuaWRlbnRpdHkoelJvdGF0aW9uTWF0cml4KTtcbiAgICAgICAgbGV0IHRoZXRhWiA9IHJvdGF0aW9uVmVjdG9yLmdldFRoZXRhWigpO1xuICAgICAgICB6Um90YXRpb25NYXRyaXguc2V0KE1hdGguY29zKHRoZXRhWiksIDAsIDApO1xuICAgICAgICB6Um90YXRpb25NYXRyaXguc2V0KE1hdGguc2luKHRoZXRhWiksIDEsIDApO1xuICAgICAgICB6Um90YXRpb25NYXRyaXguc2V0KC0xICogTWF0aC5zaW4odGhldGFaKSwgMCwgMSk7XG4gICAgICAgIHpSb3RhdGlvbk1hdHJpeC5zZXQoTWF0aC5jb3ModGhldGFaKSwgMSwgMSk7XG5cbiAgICAgICAgLy8gU1RBUlQgV0lUSCBUSEUgWC1BWElTIFJPVEFUSU9OXG4gICAgICAgIGxldCB0ZW1wTWF0cml4ID0gbmV3IE1hdHJpeCg0LCA0KTtcbiAgICAgICAgdGhpcy5pZGVudGl0eSh0ZW1wTWF0cml4KTtcbiAgICAgICAgdGhpcy5tdWx0aXBseSh0ZW1wTWF0cml4LCB4Um90YXRpb25NYXRyaXgsIHlSb3RhdGlvbk1hdHJpeCk7XG4gICAgICAgIHRoaXMubXVsdGlwbHkocmVzdWx0LCB0ZW1wTWF0cml4LCB6Um90YXRpb25NYXRyaXgpO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBzY2FsZShyZXN1bHQgOiBNYXRyaXgsIHNjYWxlVmVjdG9yIDogVmVjdG9yMykgOiB2b2lkIHtcbiAgICAgICAgLy8gU1RBUlQgV0lUSCBUSEUgSURFTlRJVFkgTUFUUklYXG4gICAgICAgIHRoaXMuaWRlbnRpdHkocmVzdWx0LCBzY2FsZVZlY3Rvcik7XG5cbiAgICAgICAgLy8gQU5EIFRIRU4gTE9BRCBJTiBUSEUgVFJBTlNMQVRJT04gVkFMVUVTXG4gICAgICAgIHJlc3VsdC5zZXQoc2NhbGVWZWN0b3IuZ2V0WCgpLCAwLCAwKTtcbiAgICAgICAgcmVzdWx0LnNldChzY2FsZVZlY3Rvci5nZXRZKCksIDEsIDEpO1xuICAgICAgICByZXN1bHQuc2V0KHNjYWxlVmVjdG9yLmdldFooKSwgMiwgMik7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybShyZXN1bHQgOiBWZWN0b3IzLCBtYXQgOiBNYXRyaXgsIHZlYyA6IFZlY3RvcjMpIDogdm9pZCB7XG4gICAgICAgIHJlc3VsdC5zZXRYKChtYXQuZ2V0KDAsIDApICogdmVjLmdldFgoKSkgKyAobWF0LmdldCgwLCAxKSAqIHZlYy5nZXRZKCkpICsgKG1hdC5nZXQoMCwgMikgKiB2ZWMuZ2V0WigpKSArIChtYXQuZ2V0KDAsIDMpICogdmVjLmdldFcoKSkpO1xuICAgICAgICByZXN1bHQuc2V0WSgobWF0LmdldCgxLCAwKSAqIHZlYy5nZXRYKCkpICsgKG1hdC5nZXQoMSwgMSkgKiB2ZWMuZ2V0WSgpKSArIChtYXQuZ2V0KDEsIDIpICogdmVjLmdldFooKSkgKyAobWF0LmdldCgxLCAzKSAqIHZlYy5nZXRXKCkpKTtcbiAgICAgICAgcmVzdWx0LnNldFooKG1hdC5nZXQoMiwgMCkgKiB2ZWMuZ2V0WCgpKSArIChtYXQuZ2V0KDIsIDEpICogdmVjLmdldFkoKSkgKyAobWF0LmdldCgyLCAyKSAqIHZlYy5nZXRaKCkpICsgKG1hdC5nZXQoMiwgMykgKiB2ZWMuZ2V0VygpKSk7XG4gICAgICAgIHJlc3VsdC5zZXRXKChtYXQuZ2V0KDMsIDApICogdmVjLmdldFgoKSkgKyAobWF0LmdldCgzLCAxKSAqIHZlYy5nZXRZKCkpICsgKG1hdC5nZXQoMywgMikgKiB2ZWMuZ2V0WigpKSArIChtYXQuZ2V0KDMsIDMpICogdmVjLmdldFcoKSkpO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUocmVzdWx0IDogTWF0cml4LCB0cmFuc2xhdGlvblZlY3RvciA6IFZlY3RvcjMpIDogdm9pZCB7XG4gICAgICAgIC8vIFNUQVJUIFdJVEggVEhFIElERU5USVRZIE1BVFJJWFxuICAgICAgICB0aGlzLmlkZW50aXR5KHJlc3VsdCk7XG5cbiAgICAgICAgLy8gQU5EIFRIRU4gTE9BRCBJTiBUSEUgVFJBTlNMQVRJT04gVkFMVUVTXG4gICAgICAgIHJlc3VsdC5zZXQodHJhbnNsYXRpb25WZWN0b3IuZ2V0WCgpLCAwLCAzKTtcbiAgICAgICAgcmVzdWx0LnNldCh0cmFuc2xhdGlvblZlY3Rvci5nZXRZKCksIDEsIDMpO1xuICAgICAgICByZXN1bHQuc2V0KHRyYW5zbGF0aW9uVmVjdG9yLmdldFooKSwgMiwgMyk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHRyYW5zcG9zZShyZXN1bHQgOiBNYXRyaXgsIG1hdCA6IE1hdHJpeCkgOiB2b2lkIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgNDsgaisrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRlbXAgPSBtYXQuZ2V0KGksIGopO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5zZXQodGVtcCwgaiwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gdmlldyhyZXN1bHQgOiBNYXRyaXgsIGNhbWVyYVBvc2l0aW9uIDogVmVjdG9yMywgY2FtZXJhT3JpZW50YXRpb24gOiBWZWN0b3IzKSA6IHZvaWQge1xuICAgICAgICBsZXQgcGl0Y2ggPSB0aGlzLm1hdGguZGVncmVlc1RvUmFkaWFucyhjYW1lcmFPcmllbnRhdGlvbi5nZXRUaGV0YVgoKSk7XG4gICAgICAgIGxldCB5YXcgPSB0aGlzLm1hdGguZGVncmVlc1RvUmFkaWFucyhjYW1lcmFPcmllbnRhdGlvbi5nZXRUaGV0YVkoKSk7XG4gICAgICAgIGxldCByb2xsID0gdGhpcy5tYXRoLmRlZ3JlZXNUb1JhZGlhbnMoY2FtZXJhT3JpZW50YXRpb24uZ2V0VGhldGFaKCkpO1xuXG4gICAgICAgIC8vIFRPIFRSQU5TTEFURVxuICAgICAgICBsZXQgdHJhbnNsYXRlVmVjdG9yID0gdGhpcy5tYXRoLnZlY3Rvck1hdGguY3JlYXRlUG9zaXRpb25WZWN0b3IoKTtcbiAgICAgICAgdHJhbnNsYXRlVmVjdG9yLnNldCgtY2FtZXJhUG9zaXRpb24uZ2V0WCgpLCAtY2FtZXJhUG9zaXRpb24uZ2V0WSgpLCAtY2FtZXJhUG9zaXRpb24uZ2V0WigpKTtcbiAgICAgICAgbGV0IHRyYW5zbGF0ZU1hdHJpeCA9IG5ldyBNYXRyaXgoNCwgNCk7XG4gICAgICAgIHRoaXMuaWRlbnRpdHkodHJhbnNsYXRlTWF0cml4KTtcbiAgICAgICAgdGhpcy50cmFuc2xhdGUodHJhbnNsYXRlTWF0cml4LCB0cmFuc2xhdGVWZWN0b3IpO1xuXG4gICAgICAgIC8vIFRPIFJPVEFURVxuICAgICAgICBsZXQgcm90YXRlVmVjdG9yID0gdGhpcy5tYXRoLnZlY3Rvck1hdGguY3JlYXRlUm90YXRpb25WZWN0b3IoKTtcbiAgICAgICAgcm90YXRlVmVjdG9yLnNldCgtcGl0Y2gsIC15YXcsIC1yb2xsKTtcbiAgICAgICAgbGV0IHJvdGF0ZU1hdHJpeCA9IG5ldyBNYXRyaXgoNCwgNCk7XG4gICAgICAgIHRoaXMucm90YXRlKHJvdGF0ZU1hdHJpeCwgcm90YXRlVmVjdG9yKTtcblxuICAgICAgICAvLyBOT1cgQ09NQklORSBUSEUgMiBNQVRSSUNFU1xuICAgICAgICB0aGlzLm11bHRpcGx5KHJlc3VsdCwgcm90YXRlTWF0cml4LCB0cmFuc2xhdGVNYXRyaXgpO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBhZGRWZWN0b3JzKHJlc3VsdCA6IFZlY3RvcjMsIHZlYzAgOiBWZWN0b3IzLCB2ZWMxIDogVmVjdG9yMykgOiB2b2lkIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZWMwLmdldFNpemUoKTsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgdG90YWwgPSB2ZWMwLmdldEF0KGkpICsgdmVjMS5nZXRBdChpKTtcbiAgICAgICAgICAgIHJlc3VsdC5zZXRBdChpLCB0b3RhbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gY3Jvc3NQcm9kdWN0KHJlc3VsdCA6IFZlY3RvcjMsIHZlYzAgOiBWZWN0b3IzLCB2ZWMxIDogVmVjdG9yMykgOiB2b2lkIHtcbiAgICAgICAgbGV0IHJlc3VsdDAgPSAodmVjMC5nZXRZKCkgKiB2ZWMxLmdldFooKSlcbiAgICAgICAgICAgIC0gKHZlYzEuZ2V0WSgpICogdmVjMC5nZXRaKCkpO1xuICAgICAgICBsZXQgcmVzdWx0MSA9ICh2ZWMwLmdldFooKSAqIHZlYzEuZ2V0WCgpKVxuICAgICAgICAgICAgLSAodmVjMS5nZXRaKCkgKiB2ZWMwLmdldFgoKSk7XG4gICAgICAgIGxldCByZXN1bHQyID0gKHZlYzAuZ2V0WCgpICogdmVjMS5nZXRZKCkpXG4gICAgICAgICAgICAtICh2ZWMxLmdldFgoKSAqIHZlYzAuZ2V0WSgpKTtcbiAgICAgICAgcmVzdWx0LnNldFgocmVzdWx0MCk7XG4gICAgICAgIHJlc3VsdC5zZXRZKHJlc3VsdDEpO1xuICAgICAgICByZXN1bHQuc2V0WihyZXN1bHQyKTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gZG90UHJvZHVjdCh2ZWMwIDogVmVjdG9yMywgdmVjMSA6IFZlY3RvcjMpIDogbnVtYmVyIHtcbiAgICAgICAgbGV0IHJlc3VsdFggPSB2ZWMwLmdldFgoKSAqIHZlYzEuZ2V0WCgpO1xuICAgICAgICBsZXQgcmVzdWx0WSA9IHZlYzAuZ2V0WSgpICogdmVjMS5nZXRZKCk7XG4gICAgICAgIGxldCByZXN1bHRaID0gdmVjMC5nZXRaKCkgKiB2ZWMxLmdldFooKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFggKyByZXN1bHRZICsgcmVzdWx0WjtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gbXVsdGlwbHlWZWN0b3JzKHJlc3VsdCA6IFZlY3RvcjMsIHZlYyA6IFZlY3RvcjMsIHNjYWxhciA6IG51bWJlcikgOiB2b2lkIHtcbiAgICAgICAgbGV0IHZlY1ggPSB2ZWMuZ2V0WCgpICogc2NhbGFyO1xuICAgICAgICBsZXQgdmVjWSA9IHZlYy5nZXRZKCkgKiBzY2FsYXI7XG4gICAgICAgIGxldCB2ZWNaID0gdmVjLmdldFooKSAqIHNjYWxhcjtcbiAgICAgICAgcmVzdWx0LnNldFgodmVjWCk7XG4gICAgICAgIHJlc3VsdC5zZXRZKHZlY1kpO1xuICAgICAgICByZXN1bHQuc2V0Wih2ZWNaKTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKHJlc3VsdCA6IFZlY3RvcjMsIHZlYyA6IFZlY3RvcjMpIDogdm9pZCB7XG4gICAgICAgIGxldCB4U3F1YXJlZCA9IHZlYy5nZXRYKCkgKiB2ZWMuZ2V0WCgpO1xuICAgICAgICBsZXQgeVNxdWFyZWQgPSB2ZWMuZ2V0WSgpICogdmVjLmdldFkoKTtcbiAgICAgICAgbGV0IHpTcXVhcmVkID0gdmVjLmdldFooKSAqIHZlYy5nZXRaKCk7XG4gICAgICAgIGxldCBkaXN0YW5jZSA9IE1hdGguc3FydCh4U3F1YXJlZCArIHlTcXVhcmVkICsgelNxdWFyZWQpO1xuICAgICAgICByZXN1bHQuc2V0WCh2ZWMuZ2V0WCgpIC8gZGlzdGFuY2UpO1xuICAgICAgICByZXN1bHQuc2V0WSh2ZWMuZ2V0WSgpIC8gZGlzdGFuY2UpO1xuICAgICAgICByZXN1bHQuc2V0Wih2ZWMuZ2V0WigpIC8gZGlzdGFuY2UpO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBzdWJ0cmFjdFZlY3RvcnMocmVzdWx0IDogVmVjdG9yMywgdmVjMCA6IFZlY3RvcjMsIHZlYzEgOiBWZWN0b3IzKSA6IHZvaWQge1xuICAgICAgICBsZXQgcmVzdWx0WCA9IHZlYzAuZ2V0WCgpIC0gdmVjMS5nZXRYKCk7XG4gICAgICAgIGxldCByZXN1bHRZID0gdmVjMC5nZXRZKCkgLSB2ZWMxLmdldFkoKTtcbiAgICAgICAgbGV0IHJlc3VsdFogPSB2ZWMwLmdldFooKSAtIHZlYzEuZ2V0WigpO1xuICAgICAgICByZXN1bHQuc2V0WChyZXN1bHRYKTtcbiAgICAgICAgcmVzdWx0LnNldFkocmVzdWx0WSk7XG4gICAgICAgIHJlc3VsdC5zZXRaKHJlc3VsdFopO1xuICAgIH1cbn0iLCIvKlxuICogQSBNYXRyaXggaXMgdXNlZCBmb3IgdHJhbnNmb3JtaW5nIHBvaW50cyBmcm9tIGxvY2FsXG4gKiBjb29yZGluYXRlcyB0byB3b3JsZCBjb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIE1hdHJpeCB7XG4gICAgcHJpdmF0ZSBtYXQgOiBGbG9hdDMyQXJyYXk7XG4gICAgcHJpdmF0ZSByb3dzIDogbnVtYmVyO1xuICAgIHByaXZhdGUgY29sdW1ucyA6IG51bWJlcjtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihyb3dzIDogbnVtYmVyLCBjb2x1bW5zIDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMucm93cyA9IHJvd3M7XG4gICAgICAgIHRoaXMuY29sdW1ucyA9IGNvbHVtbnM7XG4gICAgICAgIHRoaXMubWF0ID0gbmV3IEZsb2F0MzJBcnJheShyb3dzICogY29sdW1ucyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgKHJvd3MgKiBjb2x1bW5zKTsgaSsrKVxuICAgICAgICAgICAgdGhpcy5tYXRbaV0gPSAwLjA7XG4gICAgfVxuXG4gICAgcHVibGljIGdldERhdGEoKSA6IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Um93cygpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm93cztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q29sdW1ucygpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sdW1ucztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SW5kZXggKHJvd3MgOiBudW1iZXIsIGNvbHVtbnMgOiBudW1iZXIpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnJvd3MgKiBjb2x1bW5zKSArIHJvd3M7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBnZXQgKHJvdyA6IG51bWJlciwgY29sdW1uIDogbnVtYmVyKSA6IG51bWJlciB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuZ2V0SW5kZXgocm93LCBjb2x1bW4pO1xuICAgICAgICBsZXQgdmFsdWVUb1JldHVybiA9IHRoaXMubWF0W2luZGV4XTtcbiAgICAgICAgcmV0dXJuIHZhbHVlVG9SZXR1cm47XG4gICAgfVxuXG4gICAgcHVibGljIHNldCAodmFsdWUgOiBudW1iZXIsIHJvdyA6IG51bWJlciwgY29sdW1uIDogbnVtYmVyKSB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuZ2V0SW5kZXgocm93LCBjb2x1bW4pO1xuICAgICAgICB0aGlzLm1hdFtpbmRleF0gPSB2YWx1ZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHByaW50ICgpIDogdm9pZCB7XG4gICAgICAgIGxldCBtYXhXaWR0aCA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDQ7IGorKykge1xuICAgICAgICAgICAgICAgIGxldCB0ZXN0TnVtID0gdGhpcy5nZXQoaiwgaSkgKyBcIlwiO1xuICAgICAgICAgICAgICAgIGlmICh0ZXN0TnVtLmxlbmd0aCA+IG1heFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1heFdpZHRoID0gdGVzdE51bS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCB0ZXh0ID0gXCJbIFwiO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm93czsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSA+IDApXG4gICAgICAgICAgICAgICAgdGV4dCArPSBcIiAgXCI7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuY29sdW1uczsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG51bVRleHQgPSB0aGlzLmdldChpLCBqKSArIFwiXCI7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG51bVRleHQubGVuZ3RoIDwgbWF4V2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbnVtVGV4dCA9IFwiIFwiICsgbnVtVGV4dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGV4dCArPSBudW1UZXh0O1xuICAgICAgICAgICAgICAgIGlmIChqIDwgKHRoaXMuY29sdW1ucyAtIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQgKz0gXCIsXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRleHQgKz0gXCIgXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaSA8ICh0aGlzLnJvd3MgLSAxKSkge1xuICAgICAgICAgICAgICAgIHRleHQgKz0gXCJcXG5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRleHQgKz0gXCJdXCI7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0ZXh0KTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCIvKipcbiAqIFZlY3RvcjNcbiAqIFxuICogVGhlIFZlY3RvcjMgY2xhc3MgY2FuIGJlIHVzZWQgZm9yIGFueSAyZCBvciAzZCBwb2ludCwgdmVjdG9yLCBcbiAqIG9yIHJvdGF0aW9uIChpLmUuIGFuZ2xlcyBvZiBvcmllbnRhdGlvbikuXG4gKi9cbmV4cG9ydCBjbGFzcyBWZWN0b3IzIHtcbiAgICBwcml2YXRlIHZlYyA6IEZsb2F0MzJBcnJheTtcbiAgICBwcml2YXRlIHNpemUgOiBudW1iZXI7XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudmVjID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspXG4gICAgICAgICAgICB0aGlzLnZlY1tpXSA9IDAuMDtcbiAgICAgICAgdGhpcy5zaXplID0gNDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U2l6ZSgpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0QXQoaW5kZXggOiBudW1iZXIpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVjW2luZGV4XTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0WCgpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVjWzBdO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRZKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy52ZWNbMV07XG4gICAgfVxuXG4gICAgcHVibGljIGdldFooKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnZlY1syXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VygpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVjWzNdO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUaGV0YVgoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnZlY1swXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGhldGFZKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy52ZWNbMV07XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRoZXRhWigpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVjWzJdO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXQoaW5pdDAgOiBudW1iZXIsIGluaXQxIDogbnVtYmVyLCBpbml0MiA6IG51bWJlciwgaW5pdDMgOiBudW1iZXIpIDogdm9pZCB7XG4gICAgICAgIHRoaXMudmVjWzBdID0gaW5pdDA7XG4gICAgICAgIHRoaXMudmVjWzFdID0gaW5pdDE7XG4gICAgICAgIHRoaXMudmVjWzJdID0gaW5pdDI7XG4gICAgICAgIHRoaXMudmVjWzNdID0gaW5pdDM7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEF0KGluZGV4IDogbnVtYmVyLCB2YWx1ZSA6IG51bWJlcikgOiB2b2lkIHtcbiAgICAgICAgdGhpcy52ZWNbaW5kZXhdID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFgoaW5pdFggOiBudW1iZXIpIDogdm9pZCB7XG4gICAgICAgIHRoaXMudmVjWzBdID0gaW5pdFg7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFkoaW5pdFkgOiBudW1iZXIpIDogdm9pZCB7XG4gICAgICAgIHRoaXMudmVjWzFdID0gaW5pdFk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFooaW5pdFogOiBudW1iZXIpIDogdm9pZCB7XG4gICAgICAgIHRoaXMudmVjWzJdID0gaW5pdFo7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFcoaW5pdFcgOiBudW1iZXIpIDogdm9pZCB7XG4gICAgICAgIHRoaXMudmVjWzNdID0gaW5pdFc7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFRoZXRhWChpbml0VGhldGFYIDogbnVtYmVyKSA6IHZvaWQge1xuICAgICAgICB0aGlzLnNldFgoaW5pdFRoZXRhWCk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFRoZXRhWShpbml0VGhldGFZIDogbnVtYmVyKSA6IHZvaWQge1xuICAgICAgICB0aGlzLnNldFkoaW5pdFRoZXRhWSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFRoZXRhWihpbml0VGhldGFaIDogbnVtYmVyKSA6IHZvaWQge1xuICAgICAgICB0aGlzLnNldFooaW5pdFRoZXRhWik7XG4gICAgfVxuXG4gICAgcHVibGljIHByaW50KCkgOiB2b2lkIHtcbiAgICAgICAgbGV0IHRleHQgPSBcIltcIjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNpemU7IGkrKykge1xuICAgICAgICAgICAgdGV4dCArPSB0aGlzLnZlY1tpXTtcbiAgICAgICAgICAgIGlmIChpIDwgKHRoaXMuc2l6ZSAtIDEpKSB7XG4gICAgICAgICAgICAgICAgdGV4dCArPSBcIiwgXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGV4dCArPSBcIl1cIjtcbiAgICAgICAgY29uc29sZS5sb2codGV4dCk7XG4gICAgfVxufSIsImltcG9ydCB7U2NlbmVHcmFwaH0gZnJvbSAnLi4vc2NlbmUvU2NlbmVHcmFwaCdcbmltcG9ydCB7QW5pbWF0ZWRTcHJpdGV9IGZyb20gXCIuLi9zY2VuZS9zcHJpdGUvQW5pbWF0ZWRTcHJpdGVcIlxuXG5leHBvcnQgY2xhc3MgR2FtZVBoeXNpY3Mge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuXG4gICAgfVxuXG4gICAgdXBkYXRlKHNjZW5lR3JhcGggOiBTY2VuZUdyYXBoKSA6IHZvaWQge1xuICAgICAgICAvLyBVUERBVEUgQUxMIE9CSkVDVCBQT1NJVElPTlMgQUNDT1JESU5HIFRPIFRIRUlSIFZFTE9DSVRJRVNcbiAgICAgICAgLy8gQlVUIE1BS0UgU1VSRSBUTyBQRVJGT1JNIENPTExJU0lPTiBERVRFQ1RJT04gQVMgV0VMTFxuICAgICAgICAvLyBOT1RFLCBGT1IgVEhJUyBZT1UgU0hPVUxEIE1BS0UgU1VSRSBFQUNIIFNDRU5FIE9CSkVDVFxuICAgICAgICAvLyBIQVMgQSBCT1VORElORyBWT0xVTUUgTElLRSBFSVRIRVIgQU4gQUFCQiBPUiBBIENJUkNMRVxuXG4gICAgICAgIC8vQ29sbGlzaW9uIGRldGVjdGlvblxuICAgICAgICBsZXQgbWFpbl9jaGFyYWN0ZXIgOiBBbmltYXRlZFNwcml0ZSA9IHNjZW5lR3JhcGguZ2V0TWFpbkNoYXJhY3RlcigpO1xuICAgICAgICBsZXQgbWFpbl9jaGFyYWN0ZXJfcmFkaXVzID0gTWF0aC5wb3coTWF0aC5wb3cobWFpbl9jaGFyYWN0ZXIuZ2V0U3ByaXRlVHlwZSgpLmdldFNwcml0ZVdpZHRoKCkvMywgMikgKyBNYXRoLnBvdyhtYWluX2NoYXJhY3Rlci5nZXRTcHJpdGVUeXBlKCkuZ2V0U3ByaXRlSGVpZ2h0KCkvMywgMiksIDAuNSk7XG4gICAgICAgIGZvcihsZXQgc3ByaXRlIG9mIDxBcnJheTxBbmltYXRlZFNwcml0ZT4+c2NlbmVHcmFwaC5zY29wZSgpKSB7XG4gICAgICAgICAgICBpZihtYWluX2NoYXJhY3RlciAhPSBudWxsICYmIHNwcml0ZS5nZXRUeXBlTmFtZSgpICE9IFwiTUFJTl9CVUdcIil7XG4gICAgICAgICAgICAgICAgLy9kaXN0YW5jZSA9ICgoeDIteDEpXjIgKyAoeTIteTEpXjIpXjAuNVxuICAgICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IE1hdGguc3FydCgoTWF0aC5wb3coKChtYWluX2NoYXJhY3Rlci5nZXRQb3NpdGlvbigpLmdldFgoKSArIHNjZW5lR3JhcGguZ2V0Vmlld3BvcnQoKS5nZXRYKCkpIC0gKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFgoKSArIHNjZW5lR3JhcGguZ2V0Vmlld3BvcnQoKS5nZXRYKCkpKSwgMilcbiAgICAgICAgICAgICAgICAgKyBNYXRoLnBvdygoKG1haW5fY2hhcmFjdGVyLmdldFBvc2l0aW9uKCkuZ2V0WSgpICsgc2NlbmVHcmFwaC5nZXRWaWV3cG9ydCgpLmdldFkoKSkgLSAoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WSgpICsgc2NlbmVHcmFwaC5nZXRWaWV3cG9ydCgpLmdldFkoKSkpLCAyKSkpO1xuICAgICAgICAgICAgICAgIGxldCBzcHJpdGVfcmFkaXVzID0gTWF0aC5wb3coTWF0aC5wb3coc3ByaXRlLmdldFNwcml0ZVR5cGUoKS5nZXRTcHJpdGVXaWR0aCgpLzksIDIpICsgTWF0aC5wb3coc3ByaXRlLmdldFNwcml0ZVR5cGUoKS5nZXRTcHJpdGVIZWlnaHQoKS85LCAyKSwgMC41KTtcbiAgICAgICAgICAgICAgICBpZihkaXN0YW5jZSA8PSAobWFpbl9jaGFyYWN0ZXJfcmFkaXVzICsgc3ByaXRlX3JhZGl1cykpe1xuICAgICAgICAgICAgICAgICAgICAvL1dlIGhhdmUgYSBjb2xsaXNpb25cbiAgICAgICAgICAgICAgICAgICAgaWYoc3ByaXRlLmdldFR5cGVOYW1lKCkgPT0gXCJCVUdfT05FXCIgJiYgc3ByaXRlLmdldFN0YXRlKCkgIT0gXCJEWUlOR1wiICYmIHNwcml0ZS5nZXRTdGF0ZSgpICE9IFwiREVBRFwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwcml0ZS5zZXRTdGF0ZShcIkRZSU5HXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsIi8qXG4gKiBUaGlzIGNsYXNzIHJlbmRlcnMgdGV4dCB0byBhIGNhbnZhcywgdXBkYXRlZCBlYWNoIGZyYW1lLlxuICovXG5leHBvcnQgY2xhc3MgVGV4dFRvUmVuZGVyIHtcbiAgICBwdWJsaWMgaWQgOiBzdHJpbmc7XG4gICAgcHVibGljIHRleHQgOiBzdHJpbmc7XG4gICAgcHVibGljIHggOiBudW1iZXI7XG4gICAgcHVibGljIHkgOiBudW1iZXI7XG4gICAgcHVibGljIHVwZGF0ZSA6IEZ1bmN0aW9uO1xuICAgIHB1YmxpYyBmb250RmFtaWx5IDogc3RyaW5nO1xuICAgIHB1YmxpYyBmb250U2l6ZSA6IG51bWJlcjtcbiAgICBwdWJsaWMgZm9udENvbG9yIDogc3RyaW5nO1xuICAgIHB1YmxpYyBwcm9wZXJ0aWVzIDogTWFwPHN0cmluZywgb2JqZWN0PjtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihpbml0SWQgOiBzdHJpbmcsIGluaXRUZXh0IDogc3RyaW5nLCBpbml0WCA6IG51bWJlciwgaW5pdFkgOiBudW1iZXIsIGluaXRVcGRhdGUgOiBGdW5jdGlvbikge1xuICAgICAgICB0aGlzLmlkID0gaW5pdElkO1xuICAgICAgICB0aGlzLnRleHQgPSBpbml0VGV4dDtcbiAgICAgICAgdGhpcy54ID0gaW5pdFg7XG4gICAgICAgIHRoaXMueSA9IGluaXRZO1xuICAgICAgICB0aGlzLnVwZGF0ZSA9IGluaXRVcGRhdGU7XG4gICAgICAgIHRoaXMuZm9udEZhbWlseSA9IFwiXCI7XG4gICAgICAgIHRoaXMuZm9udFNpemUgPSAwO1xuICAgICAgICB0aGlzLmZvbnRDb2xvciA9IFwiXCI7XG4gICAgICAgIHRoaXMucHJvcGVydGllcyA9IG5ldyBNYXAoKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUZXh0UmVuZGVyZXIge1xuICAgIHByaXZhdGUgdGV4dFRvUmVuZGVyIDogQXJyYXk8VGV4dFRvUmVuZGVyPjtcbiAgICBwcml2YXRlIHRleHRDYW52YXMgOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICBwcml2YXRlIHRleHRDYW52YXNXaWR0aCA6IG51bWJlcjtcbiAgICBwcml2YXRlIHRleHRDYW52YXNIZWlnaHQgOiBudW1iZXI7XG4gICAgcHJpdmF0ZSB0ZXh0Q3R4IDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICAgIHByaXZhdGUgZGVmYXVsdEZvbnRGYW1pbHkgOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBkZWZhdWx0Rm9udFNpemUgOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBkZWZhdWx0Rm9udENvbG9yIDogc3RyaW5nO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHRleHRDYW52YXNJZCA6IHN0cmluZywgaW5pdEZvbnRGYW1pbHkgOiBzdHJpbmcsIGluaXRGb250U2l6ZSA6IG51bWJlciwgaW5pdEZvbnRDb2xvciA6IHN0cmluZykge1xuICAgICAgICB0aGlzLnRleHRUb1JlbmRlciA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzLnRleHRDYW52YXMgPSA8SFRNTENhbnZhc0VsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGV4dENhbnZhc0lkKTtcbiAgICAgICAgdGhpcy50ZXh0Q2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIHRoaXMudGV4dENhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIHRoaXMudGV4dENhbnZhc1dpZHRoID0gdGhpcy50ZXh0Q2FudmFzLndpZHRoO1xuICAgICAgICB0aGlzLnRleHRDYW52YXNIZWlnaHQgPSB0aGlzLnRleHRDYW52YXMuaGVpZ2h0O1xuICAgICAgICB0aGlzLnRleHRDdHggPSB0aGlzLnRleHRDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICB0aGlzLmRlZmF1bHRGb250RmFtaWx5ID0gaW5pdEZvbnRGYW1pbHk7XG4gICAgICAgIHRoaXMuZGVmYXVsdEZvbnRTaXplID0gaW5pdEZvbnRTaXplO1xuICAgICAgICB0aGlzLmRlZmF1bHRGb250Q29sb3IgPSBpbml0Rm9udENvbG9yO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgYWRkVGV4dFRvUmVuZGVyKHRleHRUb0FkZCA6IFRleHRUb1JlbmRlcikgOiB2b2lkIHtcbiAgICAgICAgdGV4dFRvQWRkLmZvbnRGYW1pbHkgPSB0aGlzLmRlZmF1bHRGb250RmFtaWx5O1xuICAgICAgICB0ZXh0VG9BZGQuZm9udFNpemUgPSB0aGlzLmRlZmF1bHRGb250U2l6ZTtcbiAgICAgICAgdGV4dFRvQWRkLmZvbnRDb2xvciA9IHRoaXMuZGVmYXVsdEZvbnRDb2xvcjtcbiAgICAgICAgdGhpcy50ZXh0VG9SZW5kZXIucHVzaCh0ZXh0VG9BZGQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjbGVhcigpIDogdm9pZCB7XG4gICAgICAgIHRoaXMudGV4dFRvUmVuZGVyID0gW107XG4gICAgfVxuXG4gICAgcHVibGljIGdldENhbnZhc1dpZHRoKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy50ZXh0Q2FudmFzV2lkdGg7XG4gICAgfVxuXG4gICAgcHVibGljIGdldENhbnZhc0hlaWdodCgpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dENhbnZhc0hlaWdodDtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyKCkgOiB2b2lkIHtcbiAgICAgICAgdGhpcy50ZXh0Q3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLnRleHRDYW52YXMud2lkdGgsIHRoaXMudGV4dENhbnZhcy5oZWlnaHQpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudGV4dFRvUmVuZGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdGV4dFRvUmVuZGVyID0gdGhpcy50ZXh0VG9SZW5kZXJbaV07XG4gICAgICAgICAgICB0ZXh0VG9SZW5kZXIudXBkYXRlKCk7XG4gICAgICAgICAgICB0aGlzLnRleHRDdHguZm9udCA9IFwiXCIgKyB0ZXh0VG9SZW5kZXIuZm9udFNpemUgKyBcInB4IFwiICsgdGV4dFRvUmVuZGVyLmZvbnRGYW1pbHk7XG4gICAgICAgICAgICB0aGlzLnRleHRDdHguZmlsbFN0eWxlID0gdGV4dFRvUmVuZGVyLmZvbnRDb2xvcjtcbiAgICAgICAgICAgIHRoaXMudGV4dEN0eC5maWxsVGV4dCh0ZXh0VG9SZW5kZXIudGV4dCwgdGV4dFRvUmVuZGVyLngsIHRleHRUb1JlbmRlci55KTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgeyBXZWJHTEdhbWVTaGFkZXIgfSBmcm9tICcuL1dlYkdMR2FtZVNoYWRlcidcbmltcG9ydCB7IE1hdHJpeCB9IGZyb20gJy4uL21hdGgvTWF0cml4J1xuaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gJy4uL21hdGgvVmVjdG9yMydcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFdlYkdMR2FtZVJlbmRlcmluZ0NvbXBvbmVudCB7XG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IEFfUE9TSVRJT04gPSBcImFfUG9zaXRpb25cIjtcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgQV9URVhfQ09PUkQgPSBcImFfVGV4Q29vcmRcIjtcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgVV9NRVNIX1RSQU5TRk9STSA9IFwidV9NZXNoVHJhbnNmb3JtXCI7XG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IFVfVEVYX0NPT1JEX0ZBQ1RPUiA9IFwidV9UZXhDb29yZEZhY3RvclwiO1xuICAgIHByb3RlY3RlZCByZWFkb25seSBVX1RFWF9DT09SRF9TSElGVCA9IFwidV9UZXhDb29yZFNoaWZ0XCI7XG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IFVfU0FNUExFUiA9IFwidV9TYW1wbGVyXCI7XG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IE5VTV9WRVJUSUNFUyA9IDQ7XG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IEZMT0FUU19QRVJfVkVSVEVYID0gMjtcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgRkxPQVRTX1BFUl9URVhUVVJFX0NPT1JESU5BVEUgPSAyO1xuICAgIHByb3RlY3RlZCByZWFkb25seSBUT1RBTF9CWVRFUyA9IDE2O1xuICAgIHByb3RlY3RlZCByZWFkb25seSBWRVJURVhfUE9TSVRJT05fT0ZGU0VUID0gMDtcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgVEVYVFVSRV9DT09SRElOQVRFX09GRlNFVCA9IDg7XG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IElOREVYX09GX0ZJUlNUX1ZFUlRFWCA9IDA7XG5cbiAgICAvLyBUSEVTRSBXSUxMIEJFIFBST1ZJREVEIENVU1RPTUxZIEFGVEVSIENPTlNUUlVDVElPTiBEVVJJTkcgaW5pdFxuICAgIHByb3RlY3RlZCBzaGFkZXI6IFdlYkdMR2FtZVNoYWRlcjtcbiAgICBwcm90ZWN0ZWQgdmVydGV4RGF0YUJ1ZmZlcjogV2ViR0xCdWZmZXI7XG4gICAgcHJvdGVjdGVkIHdlYkdMQXR0cmlidXRlTG9jYXRpb25zOiBNYXA8c3RyaW5nLCBHTHVpbnQ+O1xuICAgIHByb3RlY3RlZCB3ZWJHTFVuaWZvcm1Mb2NhdGlvbnM6IE1hcDxzdHJpbmcsIFdlYkdMVW5pZm9ybUxvY2F0aW9uPjtcblxuICAgIC8vIFdFJ0xMIFVTRSBUSEVTRSBGT1IgVFJBTlNPRk1SSU5HIE9CSkVDVFMgV0hFTiBXRSBEUkFXIFRIRU1cbiAgICBwcm90ZWN0ZWQgbWVzaFRyYW5zZm9ybTogTWF0cml4O1xuICAgIHByb3RlY3RlZCBtZXNoVHJhbnNsYXRlOiBWZWN0b3IzO1xuICAgIHByb3RlY3RlZCBtZXNoUm90YXRlOiBWZWN0b3IzO1xuICAgIHByb3RlY3RlZCBtZXNoU2NhbGU6IFZlY3RvcjM7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gV0UnTEwgTUFOQUdFIFRIRVNFIEZPUiBPVVIgV2ViR0wgU0hBREVSU1xuICAgICAgICB0aGlzLndlYkdMQXR0cmlidXRlTG9jYXRpb25zID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLndlYkdMVW5pZm9ybUxvY2F0aW9ucyA9IG5ldyBNYXAoKTtcblxuICAgICAgICAvLyBXRSdMTCBVU0UgVEhFU0UgRk9SIFRSQU5TTEFUSU5HLCBST1RBVElORywgQU5EIFNDQUxJTkcgVEhFIE1FU0hcbiAgICAgICAgdGhpcy5tZXNoVHJhbnNmb3JtID0gbmV3IE1hdHJpeCg0LCA0KTtcbiAgICAgICAgdGhpcy5tZXNoVHJhbnNsYXRlID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgdGhpcy5tZXNoUm90YXRlID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgdGhpcy5tZXNoU2NhbGUgPSBuZXcgVmVjdG9yMygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBpbml0KHdlYkdMOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsXG4gICAgICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlOiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2U6IHN0cmluZyxcbiAgICAgICAgICAgICAgICByZW5kZXJTZXR1cERhdGE6IG9iamVjdCk6IHZvaWQge1xuICAgICAgICAvLyBGSVJTVCBXRSBORUVEIFRPIE1BS0UgVEhFIFNIQURFUlxuICAgICAgICB0aGlzLnNoYWRlciA9IG5ldyBXZWJHTEdhbWVTaGFkZXIoKTtcbiAgICAgICAgdGhpcy5zaGFkZXIuaW5pdCh3ZWJHTCwgdmVydGV4U2hhZGVyU291cmNlLCBmcmFnbWVudFNoYWRlclNvdXJjZSk7XG5cbiAgICAgICAgLy8gQ1JFQVRFIFRIRSBCVUZGRVIgT04gVEhFIEdQVVxuICAgICAgICB0aGlzLnZlcnRleERhdGFCdWZmZXIgPSB3ZWJHTC5jcmVhdGVCdWZmZXIoKTtcblxuICAgICAgICAvLyBCSU5EIFRIRSBCVUZGRVIgVE8gQkUgVkVSVEVYIERBVEFcbiAgICAgICAgd2ViR0wuYmluZEJ1ZmZlcih3ZWJHTC5BUlJBWV9CVUZGRVIsIHRoaXMudmVydGV4RGF0YUJ1ZmZlcik7XG5cbiAgICAgICAgLy8gTUFLRSBUSEUgTUVTSCBEQVRBIE9VUlNFTFZFUyBJTiBBIENISUxEIENMQVNTXG4gICAgICAgIGxldCBtZXNoVmVydGV4RGF0YSA6IEZsb2F0MzJBcnJheSA9IHRoaXMuZ2V0VmVydGV4RGF0YShyZW5kZXJTZXR1cERhdGEpO1xuXG4gICAgICAgIC8vIEFORCBTRU5EIFRIRSBEQVRBIFRPIFRIRSBCVUZGRVIgV0UgQ1JFQVRFRCBPTiBUSEUgR1BVXG4gICAgICAgIHdlYkdMLmJ1ZmZlckRhdGEod2ViR0wuQVJSQVlfQlVGRkVSLCBtZXNoVmVydGV4RGF0YSwgd2ViR0wuU1RBVElDX0RSQVcpO1xuXG4gICAgICAgIC8vIFNFVFVQIFRIRSBTSEFERVIgQVRUUklCVVRFUyBBTkQgVU5JRk9STVNcbiAgICAgICAgdGhpcy5sb2FkQXR0cmlidXRlTG9jYXRpb25zKHdlYkdMLCB0aGlzLmdldFNoYWRlckF0dHJpYnV0ZU5hbWVzKCkpO1xuICAgICAgICB0aGlzLmxvYWRVbmlmb3JtTG9jYXRpb25zKHdlYkdMLCB0aGlzLmdldFNoYWRlclVuaWZvcm1OYW1lcygpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0VmVydGV4RGF0YShyZW5kZXJEYXRhIDogb2JqZWN0KSA6IEZsb2F0MzJBcnJheTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0U2hhZGVyQXR0cmlidXRlTmFtZXMoKTogc3RyaW5nW107XG4gICAgcHVibGljIGFic3RyYWN0IGdldFNoYWRlclVuaWZvcm1OYW1lcygpOiBzdHJpbmdbXTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gbG9hZHMgYWxsIHRoZSBhdHRyaWJ1dGUgZGF0YSB2YWx1ZXMgc28gdGhhdCB3ZSBjYW5cbiAgICAgKiByZXRyaWV2ZSB0aGVtIGxhdGVyIHdoZW4gaXQgaXMgdGltZSB0byByZW5kZXIuIE5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uXG4gICAgICogY2FuIG9ubHkgYmUgY2FsbGVkIGFmdGVyIHRoZSBzaGFkZXIgcHJvZ3JhbSBoYXMgYmVlbiBjcmVhdGVkLlxuICAgICAqL1xuICAgIHByb3RlY3RlZCBsb2FkQXR0cmlidXRlTG9jYXRpb25zKHdlYkdMOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIGF0dHJpYnV0ZUxvY2F0aW9uTmFtZXM6IEFycmF5PHN0cmluZz4pIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdHRyaWJ1dGVMb2NhdGlvbk5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbG9jYXRpb25OYW1lOiBzdHJpbmcgPSBhdHRyaWJ1dGVMb2NhdGlvbk5hbWVzW2ldO1xuICAgICAgICAgICAgbGV0IGxvY2F0aW9uOiBHTHVpbnQgPSB3ZWJHTC5nZXRBdHRyaWJMb2NhdGlvbih0aGlzLnNoYWRlci5nZXRQcm9ncmFtKCksIGxvY2F0aW9uTmFtZSk7XG4gICAgICAgICAgICB0aGlzLndlYkdMQXR0cmlidXRlTG9jYXRpb25zLnNldChsb2NhdGlvbk5hbWUsIGxvY2F0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gbG9hZHMgYWxsIHRoZSB1bmlmb3JtIGRhdGEgdmFsdWVzIHNvIHRoYXQgd2UgY2FuXG4gICAgICogcmV0cmlldmUgdGhlbSBsYXRlciB3aGVuIGl0IGlzIHRpbWUgdG8gcmVuZGVyLiBOb3RlIHRoYXQgdGhpcyBmdW5jdGlvblxuICAgICAqIGNhbiBvbmx5IGJlIGNhbGxlZCBhZnRlciB0aGUgc2hhZGVyIHByb2dyYW0gaGFzIGJlZW4gY3JlYXRlZC5cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgbG9hZFVuaWZvcm1Mb2NhdGlvbnMod2ViR0w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdW5pZm9ybUxvY2F0aW9uTmFtZXM6IEFycmF5PHN0cmluZz4pIHtcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHVuaWZvcm1Mb2NhdGlvbk5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbG9jYXRpb25OYW1lOiBzdHJpbmcgPSB1bmlmb3JtTG9jYXRpb25OYW1lc1tpXTtcbiAgICAgICAgICAgIGxldCBsb2NhdGlvbjogV2ViR0xVbmlmb3JtTG9jYXRpb24gPSB3ZWJHTC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5zaGFkZXIuZ2V0UHJvZ3JhbSgpLCBsb2NhdGlvbk5hbWUpO1xuICAgICAgICAgICAgdGhpcy53ZWJHTFVuaWZvcm1Mb2NhdGlvbnMuc2V0KGxvY2F0aW9uTmFtZSwgbG9jYXRpb24pO1xuICAgICAgICB9XG4gICAgfVxufSIsIi8qXG4gKiBUaGlzIHNlcnZlcyBhcyB0aGUgc3Vic3lzdGVtIHRoYXQgbWFuYWdlcyBhbGwgZ2FtZSByZW5kZXJpbmcuXG4gKi9cbmltcG9ydCB7IFRleHRSZW5kZXJlciB9IGZyb20gJy4vVGV4dFJlbmRlcmVyJ1xuaW1wb3J0IHsgV2ViR0xHYW1lVGlsZWRMYXllclJlbmRlcmVyIH0gZnJvbSAnLi9XZWJHTEdhbWVUaWxlZExheWVyUmVuZGVyZXInXG5pbXBvcnQgeyBXZWJHTEdhbWVTcHJpdGVSZW5kZXJlciB9IGZyb20gJy4vV2ViR0xHYW1lU3ByaXRlUmVuZGVyZXInXG5pbXBvcnQgeyBXZWJHTEdhbWVUZXh0dXJlIH0gZnJvbSAnLi9XZWJHTEdhbWVUZXh0dXJlJztcbmltcG9ydCB7IEFuaW1hdGVkU3ByaXRlIH0gZnJvbSAnLi4vc2NlbmUvc3ByaXRlL0FuaW1hdGVkU3ByaXRlJ1xuaW1wb3J0IHsgVGlsZWRMYXllciB9IGZyb20gJy4uL3NjZW5lL3RpbGVzL1RpbGVkTGF5ZXInXG5pbXBvcnQgeyBWaWV3cG9ydCB9IGZyb20gJy4uL3NjZW5lL1ZpZXdwb3J0J1xuXG5cbmV4cG9ydCBjbGFzcyBXZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW0ge1xuICAgIHByaXZhdGUgcmVuZGVyaW5nQ2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICBwcml2YXRlIHdlYkdMOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQ7XG4gICAgcHJpdmF0ZSBjYW52YXNXaWR0aDogbnVtYmVyO1xuICAgIHByaXZhdGUgY2FudmFzSGVpZ2h0OiBudW1iZXI7XG5cbiAgICAvLyBPVVIgR0FNRVMgUkVOREVSIFRIUkVFIERJRkZFUkVOVCBUWVBFUyBPRiBUSElOR1NcbiAgICBwcml2YXRlIHRpbGVkTGF5ZXJSZW5kZXJlcjogV2ViR0xHYW1lVGlsZWRMYXllclJlbmRlcmVyO1xuICAgIHByaXZhdGUgc3ByaXRlUmVuZGVyZXI6IFdlYkdMR2FtZVNwcml0ZVJlbmRlcmVyO1xuICAgIHByaXZhdGUgdGV4dFJlbmRlcmVyOiBUZXh0UmVuZGVyZXI7XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoIHJlbmRlcmluZ0NhbnZhc0lkOiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q2FudmFzSWQ6IHN0cmluZykge1xuICAgICAgICAvLyBGSVJTVCBTRVRVUCB3ZWJHTFxuICAgICAgICB0aGlzLnJlbmRlcmluZ0NhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChyZW5kZXJpbmdDYW52YXNJZCk7XG4gICAgICAgIHRoaXMucmVuZGVyaW5nQ2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIHRoaXMucmVuZGVyaW5nQ2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgdGhpcy5jYW52YXNXaWR0aCA9IHRoaXMucmVuZGVyaW5nQ2FudmFzLndpZHRoO1xuICAgICAgICB0aGlzLmNhbnZhc0hlaWdodCA9IHRoaXMucmVuZGVyaW5nQ2FudmFzLmhlaWdodDtcbiAgICAgICAgdGhpcy53ZWJHTCA9IHRoaXMucmVuZGVyaW5nQ2FudmFzLmdldENvbnRleHQoXCJ3ZWJnbFwiKTtcblxuICAgICAgICAvLyBJRiBUSEUgVVNFUidTIE1BQ0hJTkUvQlJPV1NFUiBET0VTTidUIFNVUFBPUlRcbiAgICAgICAgLy8gV2ViR0wgVEhFTiBUSEVSRSdTIE5PIFBPSU5UIE9GIEdPSU5HIE9OXG4gICAgICAgIGlmICghdGhpcy53ZWJHTCkge1xuICAgICAgICAgICAgLy8gUFJPVklERSBTT01FIEZFRURCQUNLIFRIQVQgV2ViR0wgV09OJ1QgV09SSyBCRUNBVVNFXG4gICAgICAgICAgICAvLyBUSEUgVVNFUidTJyBHUkFQSElDUyBDQVJEIElTIEZPUiBUSEUgQklSRFNcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJXZWJHTCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgZGV2aWNlXCIpO1xuXG4gICAgICAgICAgICAvLyBBTkQgRU5EIElOSVRJQUxJWkFUSU9OXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZWJHTCBJUyBTVVBQT1JURUQsIFNPIElOSVQgRVZFUllUSElORyBUSEFUIFVTRVMgSVRcblxuICAgICAgICAvLyBNQUtFIFRIRSBDTEVBUiBDT0xPUiBCTEFDS1xuICAgICAgICB0aGlzLnNldENsZWFyQ29sb3IoMC4wLCAwLjAsIDAuMCwgMS4wKTtcblxuICAgICAgICAvLyBFTkFCTEUgREVQVEggVEVTVElOR1xuICAgICAgICB0aGlzLndlYkdMLmRpc2FibGUodGhpcy53ZWJHTC5ERVBUSF9URVNUKTtcbiAgICAgICAgdGhpcy53ZWJHTC5lbmFibGUodGhpcy53ZWJHTC5CTEVORCk7XG4gICAgICAgIHRoaXMud2ViR0wuYmxlbmRGdW5jKHRoaXMud2ViR0wuU1JDX0FMUEhBLCB0aGlzLndlYkdMLk9ORV9NSU5VU19TUkNfQUxQSEEpO1xuXG4gICAgICAgIC8vIFRVUk4gT04gQkFDS0ZBQ0UgQ1VMTElOR1xuICAgICAgICB0aGlzLndlYkdMLmVuYWJsZSh0aGlzLndlYkdMLkNVTExfRkFDRSk7XG5cbiAgICAgICAgLy8gVEhJUyBTUEVDSUZJRVMgVEhBVCBXRSdSRSBVU0lORyBUSEUgRU5USVJFIENBTlZBU1xuICAgICAgICB0aGlzLndlYkdMLnZpZXdwb3J0KDAsIDAsIHRoaXMuY2FudmFzV2lkdGgsIHRoaXMuY2FudmFzSGVpZ2h0KTtcblxuICAgICAgICAvLyBNQUtFIFRIRSBUSUxFRCBMQVlFUiBSRU5ERVJFUlxuICAgICAgICB0aGlzLnRpbGVkTGF5ZXJSZW5kZXJlciA9IG5ldyBXZWJHTEdhbWVUaWxlZExheWVyUmVuZGVyZXIoKTtcblxuICAgICAgICAvLyBNQUtFIFRIRSBTUFJJVEUgUkVOREVSRVJcbiAgICAgICAgdGhpcy5zcHJpdGVSZW5kZXJlciA9IG5ldyBXZWJHTEdhbWVTcHJpdGVSZW5kZXJlcigpO1xuXG4gICAgICAgIC8vIFRISVMgV0lMTCBTVE9SRSBPVVIgVEVYVFxuICAgICAgICB0aGlzLnRleHRSZW5kZXJlciA9IG5ldyBUZXh0UmVuZGVyZXIodGV4dENhbnZhc0lkLCBcInNlcmlmXCIsIDE4LCBcIiNGRkZGMDBcIik7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRleHR1cmVDb25zdGFudChpZDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgLy8gV0UgT05MWSBBTExPVyBGT1IgMTAgVEVYVFVSRVMgVE8gQkUgUFVUIE9OIFRIRSBHUFVcbiAgICAgICAgc3dpdGNoIChpZCkge1xuICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gdGhpcy53ZWJHTC5URVhUVVJFMDtcbiAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIHRoaXMud2ViR0wuVEVYVFVSRTE7XG4gICAgICAgICAgICBjYXNlIDI6IHJldHVybiB0aGlzLndlYkdMLlRFWFRVUkUyO1xuICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gdGhpcy53ZWJHTC5URVhUVVJFMztcbiAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIHRoaXMud2ViR0wuVEVYVFVSRTQ7XG4gICAgICAgICAgICBjYXNlIDU6IHJldHVybiB0aGlzLndlYkdMLlRFWFRVUkU1O1xuICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gdGhpcy53ZWJHTC5URVhUVVJFNjtcbiAgICAgICAgICAgIGNhc2UgNzogcmV0dXJuIHRoaXMud2ViR0wuVEVYVFVSRTc7XG4gICAgICAgICAgICBjYXNlIDg6IHJldHVybiB0aGlzLndlYkdMLlRFWFRVUkU4O1xuICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIHRoaXMud2ViR0wuVEVYVFVSRTk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0V2ViR0woKTogV2ViR0xSZW5kZXJpbmdDb250ZXh0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2ViR0w7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRpbGVkTGF5ZXJSZW5kZXJlcigpOiBXZWJHTEdhbWVUaWxlZExheWVyUmVuZGVyZXIge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlZExheWVyUmVuZGVyZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFNwcml0ZVJlbmRlcmVyKCk6IFdlYkdMR2FtZVNwcml0ZVJlbmRlcmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlUmVuZGVyZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRleHRSZW5kZXJlcigpOiBUZXh0UmVuZGVyZXIge1xuICAgICAgICByZXR1cm4gdGhpcy50ZXh0UmVuZGVyZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGluaXRXZWJHTFRleHR1cmUodGV4dHVyZVRvSW5pdDogV2ViR0xHYW1lVGV4dHVyZSwgdGV4dHVyZUlkOiBudW1iZXIsIGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50LCBjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgdGV4dHVyZVRvSW5pdC53aWR0aCA9IGltYWdlLndpZHRoO1xuICAgICAgICB0ZXh0dXJlVG9Jbml0LmhlaWdodCA9IGltYWdlLmhlaWdodDtcblxuICAgICAgICAvLyBDUkVBVEUgQSBXZWJHTCBURVhUVVJFIE9OIFRIRSBHUFVcbiAgICAgICAgdGV4dHVyZVRvSW5pdC53ZWJHTFRleHR1cmUgPSB0aGlzLndlYkdMLmNyZWF0ZVRleHR1cmUoKTtcbiAgICAgICAgdGV4dHVyZVRvSW5pdC53ZWJHTFRleHR1cmVJZCA9IHRleHR1cmVJZDtcblxuICAgICAgICAvLyBGTElQIFRIRSBJTUFHRSdTIHktQVhJU1xuICAgICAgICAvL3dlYkdMLnBpeGVsU3RvcmVpKHdlYkdMLlVOUEFDS19GTElQX1lfV0VCR0wsIDEpO1xuXG4gICAgICAgIC8vIEFDVElWQVRFIFRIRSBXZWJHTCBURVhUVVJFIE9OIFRIRSBHUFVcbiAgICAgICAgLy9sZXQgdGV4dHVyZU51bU5hbWUgOiBzdHJpbmcgPSBcIlRFWFRVUkVcIiArIHRleHR1cmVJZDtcbiAgICAgICAgbGV0IHRleHR1cmVOYW1lQ29uc3RhbnQ6IG51bWJlciA9IHRoaXMuZ2V0VGV4dHVyZUNvbnN0YW50KHRleHR1cmVJZCk7XG4gICAgICAgIHRoaXMud2ViR0wuYWN0aXZlVGV4dHVyZSh0ZXh0dXJlTmFtZUNvbnN0YW50KTtcblxuICAgICAgICAvLyBCSU5EIFRIRSBURVhUVVJFIFRPIEEgMkQgVFlQRVxuICAgICAgICB0aGlzLndlYkdMLmJpbmRUZXh0dXJlKHRoaXMud2ViR0wuVEVYVFVSRV8yRCwgdGV4dHVyZVRvSW5pdC53ZWJHTFRleHR1cmUpO1xuXG4gICAgICAgIC8vIFNQRUNJRlkgUkVOREVSSU5HIFNFVFRJTkdTXG4gICAgICAgIHRoaXMud2ViR0wudGV4UGFyYW1ldGVyaSh0aGlzLndlYkdMLlRFWFRVUkVfMkQsIHRoaXMud2ViR0wuVEVYVFVSRV9NSU5fRklMVEVSLCB0aGlzLndlYkdMLkxJTkVBUik7XG5cbiAgICAgICAgLy8gU0VUIFRIRSBJTUFHRSBGT1IgVEhFIFRFWFRVUkVcbiAgICAgICAgdGhpcy53ZWJHTC50ZXhJbWFnZTJEKHRoaXMud2ViR0wuVEVYVFVSRV8yRCwgMCwgdGhpcy53ZWJHTC5SR0JBLCB0aGlzLndlYkdMLlJHQkEsIHRoaXMud2ViR0wuVU5TSUdORURfQllURSwgaW1hZ2UpO1xuXG4gICAgICAgIC8vIEtFRVAgSVQgRk9SIFdIRU4gV0UgUkVOREVSXG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldENsZWFyQ29sb3IocjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciwgYTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMud2ViR0wuY2xlYXJDb2xvcihyLCBnLCBiLCBhKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyKCAgdmlld3BvcnQgOiBWaWV3cG9ydCxcbiAgICAgICAgICAgICAgICAgICAgdGlsZWRMYXllcnM6IEFycmF5PFRpbGVkTGF5ZXI+LFxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlU3ByaXRlczogQXJyYXk8QW5pbWF0ZWRTcHJpdGU+KTogdm9pZCB7XG4gICAgICAgIC8vIENMRUFSIFRIRSBDQU5WQVNcbiAgICAgICAgdGhpcy53ZWJHTC5jbGVhcih0aGlzLndlYkdMLkNPTE9SX0JVRkZFUl9CSVQgfCB0aGlzLndlYkdMLkRFUFRIX0JVRkZFUl9CSVQpO1xuXG4gICAgICAgIC8vIFJFTkRFUiBUSEUgVElMRUQgTEFZRVIgRklSU1RcbiAgICAgICAgdGhpcy50aWxlZExheWVyUmVuZGVyZXIucmVuZGVyKHRoaXMud2ViR0wsIHZpZXdwb3J0LCB0aWxlZExheWVycyk7XG5cbiAgICAgICAgLy8gUkVOREVSIFRIRSBTUFJJVEVTIE9OIE9ORSBDQU5WQVNcbiAgICAgICAgdGhpcy5zcHJpdGVSZW5kZXJlci5yZW5kZXIodGhpcy53ZWJHTCwgdmlld3BvcnQsIHZpc2libGVTcHJpdGVzKTtcblxuICAgICAgICAvLyBUSEVOIFRIRSBURVhUIE9OIEFOT1RIRVIgT1ZFUkxBUFBJTkcgQ0FOVkFTXG4gICAgICAgIHRoaXMudGV4dFJlbmRlcmVyLnJlbmRlcigpO1xuICAgIH1cbn0iLCIvKlxuICogVGhpcyBpcyBhIHdyYXBwZXIgY2xhc3MgZm9yIGEgV2ViR0xQcm9ncmFtLCBpLmUuIGEgc2hhZGVyIGZvciBjdXN0b20gcmVuZGVyaW5nXG4gKiB1c2luZyBXZWJHTCdzIHByb2dyYW1tYWJsZSBwaXBlbGluZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFdlYkdMR2FtZVNoYWRlciB7XG4gICAgcHJpdmF0ZSBwcm9ncmFtIDogV2ViR0xQcm9ncmFtO1xuICAgIHByaXZhdGUgdmVydGV4U2hhZGVyIDogV2ViR0xTaGFkZXI7XG4gICAgcHJpdmF0ZSBmcmFnbWVudFNoYWRlciA6IFdlYkdMU2hhZGVyO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge31cblxuICAgIHB1YmxpYyBnZXRQcm9ncmFtKCkgOiBXZWJHTFByb2dyYW0ge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9ncmFtO1xuICAgIH1cblxuICAgIHB1YmxpYyBpbml0KHdlYkdMIDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB2U291cmNlIDogc3RyaW5nLCBmU291cmNlIDogc3RyaW5nKSA6IHZvaWQge1xuICAgICAgICB0aGlzLnZlcnRleFNoYWRlciA9IDxXZWJHTFNoYWRlcj50aGlzLmNyZWF0ZVNoYWRlcih3ZWJHTCwgd2ViR0wuVkVSVEVYX1NIQURFUiwgdlNvdXJjZSk7XG4gICAgICAgIHRoaXMuZnJhZ21lbnRTaGFkZXIgPSA8V2ViR0xTaGFkZXI+dGhpcy5jcmVhdGVTaGFkZXIod2ViR0wsIHdlYkdMLkZSQUdNRU5UX1NIQURFUiwgZlNvdXJjZSk7XG4gICAgICAgIHRoaXMucHJvZ3JhbSA9IHRoaXMuY3JlYXRlU2hhZGVyUHJvZ3JhbSh3ZWJHTCwgdGhpcy52ZXJ0ZXhTaGFkZXIsIHRoaXMuZnJhZ21lbnRTaGFkZXIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjcmVhdGVTaGFkZXIod2ViR0wgOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHR5cGUgOiBudW1iZXIsIHNvdXJjZSA6IHN0cmluZykgOiBXZWJHTFNoYWRlciB7XG4gICAgICAgIC8vIE1BS0UgQSBORVcgU0hBREVSIE9CSkVDVCwgTE9BRCBJVCdTIFNPVVJDRSwgQU5EIENPTVBJTEUgSVRcbiAgICAgICAgdmFyIHNoYWRlciA9IHdlYkdMLmNyZWF0ZVNoYWRlcih0eXBlKTtcbiAgICAgICAgd2ViR0wuc2hhZGVyU291cmNlKHNoYWRlciwgc291cmNlKTtcbiAgICAgICAgd2ViR0wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuXG4gICAgICAgIC8vIERJRCBJVCBDT01QSUxFP1xuICAgICAgICB2YXIgc3VjY2VzcyA9IHdlYkdMLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIHdlYkdMLkNPTVBJTEVfU1RBVFVTKTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiBzaGFkZXI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBESVNBU1RFUlxuICAgICAgICBjb25zb2xlLmxvZyh3ZWJHTC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcikpO1xuICAgICAgICB3ZWJHTC5kZWxldGVTaGFkZXIoc2hhZGVyKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZVNoYWRlclByb2dyYW0od2ViR0wgOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHZTaGFkZXIgOiBXZWJHTFNoYWRlciwgZlNoYWRlciA6IFdlYkdMU2hhZGVyKSA6IFdlYkdMUHJvZ3JhbSB7XG4gICAgICAgIC8vIE1BS0UgVEhFIEdMU0wgU0hBREVSIFBST0dSQU1cbiAgICAgICAgbGV0IHByb2dyYW1Ub0NyZWF0ZSA9IHdlYkdMLmNyZWF0ZVByb2dyYW0oKTtcblxuICAgICAgICAvLyBMSU5LIFRIRSBWRVJUIEFORCBGUkFHXG4gICAgICAgIHdlYkdMLmF0dGFjaFNoYWRlcihwcm9ncmFtVG9DcmVhdGUsIHZTaGFkZXIpO1xuICAgICAgICB3ZWJHTC5hdHRhY2hTaGFkZXIocHJvZ3JhbVRvQ3JlYXRlLCBmU2hhZGVyKTtcblxuICAgICAgICAvLyBOT1cgV0UgQ0FOIExJTksgVEhFIFNIQURFUiBQUk9HUkFNXG4gICAgICAgIHdlYkdMLmxpbmtQcm9ncmFtKHByb2dyYW1Ub0NyZWF0ZSk7XG4gICAgICAgIGxldCBsaW5rZWQgOiBib29sZWFuID0gd2ViR0wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtVG9DcmVhdGUsIHdlYkdMLkxJTktfU1RBVFVTKTtcblxuICAgICAgICAvLyBJUyBJVCBMSU5LRUQ/XG4gICAgICAgIGlmICghbGlua2VkKSB7XG4gICAgICAgICAgICAvLyBESVNBU1RFUlxuICAgICAgICAgICAgbGV0IGVycm9yRmVlZGJhY2sgOiBzdHJpbmcgPSB3ZWJHTC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtVG9DcmVhdGUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3JGZWVkYmFjayk7XG5cbiAgICAgICAgICAgIC8vIERJU0FTVEVSXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh3ZWJHTC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtVG9DcmVhdGUpKTtcbiAgICAgICAgICAgIHdlYkdMLmRlbGV0ZVByb2dyYW0ocHJvZ3JhbVRvQ3JlYXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvZ3JhbVRvQ3JlYXRlO1xuICAgIH1cbn0iLCJpbXBvcnQge1dlYkdMR2FtZVJlbmRlcmluZ0NvbXBvbmVudH0gZnJvbSAnLi9XZWJHTEdhbWVSZW5kZXJpbmdDb21wb25lbnQnXG5pbXBvcnQge01hdGhVdGlsaXRpZXN9IGZyb20gJy4uL21hdGgvTWF0aFV0aWxpdGllcydcbmltcG9ydCB7QW5pbWF0ZWRTcHJpdGV9IGZyb20gJy4uL3NjZW5lL3Nwcml0ZS9BbmltYXRlZFNwcml0ZSdcbmltcG9ydCB7QW5pbWF0ZWRTcHJpdGVUeXBlfSBmcm9tICcuLi9zY2VuZS9zcHJpdGUvQW5pbWF0ZWRTcHJpdGVUeXBlJ1xuaW1wb3J0IHtXZWJHTEdhbWVUZXh0dXJlfSBmcm9tICcuL1dlYkdMR2FtZVRleHR1cmUnXG5pbXBvcnQge1ZpZXdwb3J0fSBmcm9tICcuLi9zY2VuZS9WaWV3cG9ydCdcblxuZXhwb3J0IGNsYXNzIFdlYkdMR2FtZVNwcml0ZVJlbmRlcmVyIGV4dGVuZHMgV2ViR0xHYW1lUmVuZGVyaW5nQ29tcG9uZW50IHtcbiAgICBwcm90ZWN0ZWQgdmVydGV4RGF0YSA6IEZsb2F0MzJBcnJheTtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy52ZXJ0ZXhEYXRhID0gbmV3IEZsb2F0MzJBcnJheShbXG4gICAgICAgICAgICAtMC41LCAgMC41LCAwLjAsIDAuMCxcbiAgICAgICAgICAgIC0wLjUsIC0wLjUsIDAuMCwgMS4wLFxuICAgICAgICAgICAgIDAuNSwgIDAuNSwgMS4wLCAwLjAsXG4gICAgICAgICAgICAgMC41LCAtMC41LCAxLjAsIDEuMFxuICAgICAgICBdKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VmVydGV4RGF0YSgpIDogRmxvYXQzMkFycmF5IHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVydGV4RGF0YTtcbiAgICB9XG4gICAgcHVibGljIGdldFNoYWRlckF0dHJpYnV0ZU5hbWVzKCkgOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiBbdGhpcy5BX1BPU0lUSU9OLCB0aGlzLkFfVEVYX0NPT1JEXTtcbiAgICB9XG4gICAgcHVibGljIGdldFNoYWRlclVuaWZvcm1OYW1lcygpIDogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gW3RoaXMuVV9NRVNIX1RSQU5TRk9STSwgdGhpcy5VX1NBTVBMRVIsIHRoaXMuVV9URVhfQ09PUkRfRkFDVE9SLCB0aGlzLlVfVEVYX0NPT1JEX1NISUZUXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyKCAgd2ViR0wgOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgIHZpZXdwb3J0IDogVmlld3BvcnQsXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVTcHJpdGVzIDogQXJyYXk8QW5pbWF0ZWRTcHJpdGU+KSA6IHZvaWQge1xuICAgICAgICAvLyBTRUxFQ1QgVEhFIEFOSU1BVEVEIFNQUklURSBSRU5ERVJJTkcgU0hBREVSIFBST0dSQU0gRk9SIFVTRVxuICAgICAgICBsZXQgc2hhZGVyUHJvZ3JhbVRvVXNlID0gdGhpcy5zaGFkZXIuZ2V0UHJvZ3JhbSgpO1xuICAgICAgICB3ZWJHTC51c2VQcm9ncmFtKHNoYWRlclByb2dyYW1Ub1VzZSk7XG5cbiAgICAgICAvLyBBTkQgVEhFTiBSRU5ERVIgRUFDSCBPTkVcbiAgICAgICBmb3IgKGxldCBzcHJpdGUgb2YgdmlzaWJsZVNwcml0ZXMpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQW5pbWF0ZWRTcHJpdGUod2ViR0wsIHZpZXdwb3J0LCBzcHJpdGUpOyAgICAgICAgXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckFuaW1hdGVkU3ByaXRlKCAgIHdlYkdMIDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld3BvcnQgOiBWaWV3cG9ydCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpdGUgOiBBbmltYXRlZFNwcml0ZSkgOiB2b2lkIHtcbiAgICAgICAgLy8gWU9VJ0xMIE5FRUQgVE8gVVBEQVRFIFRISVMgTUVUSE9EIFRPIE1BS0UgU1VSRSBTUFJJVEVTIFNDUk9MTCBBTkQgUk9UQVRFXG4gICAgICAgIFxuICAgICAgICBsZXQgY2FudmFzV2lkdGggOiBudW1iZXIgPSB3ZWJHTC5jYW52YXMud2lkdGg7XG4gICAgICAgIGxldCBjYW52YXNIZWlnaHQgOiBudW1iZXIgPSB3ZWJHTC5jYW52YXMuaGVpZ2h0O1xuICAgICAgICBsZXQgc3ByaXRlVHlwZSA6IEFuaW1hdGVkU3ByaXRlVHlwZSA9IHNwcml0ZS5nZXRTcHJpdGVUeXBlKCk7XG4gICAgICAgIGxldCB0ZXh0dXJlIDogV2ViR0xHYW1lVGV4dHVyZSA9IHNwcml0ZVR5cGUuZ2V0U3ByaXRlU2hlZXRUZXh0dXJlKCk7XG5cbiAgICAgICAgLy8gQ0FMQ1VMQVRFIEhPVyBNVUNIIFRPIFRSQU5TTEFURSBUSEUgUVVBRCBQRVIgVEhFIFNQUklURSBQT1NJVElPTlxuICAgICAgICBsZXQgc3ByaXRlV2lkdGggOiBudW1iZXIgPSBzcHJpdGVUeXBlLmdldFNwcml0ZVdpZHRoKCk7XG4gICAgICAgIGxldCBzcHJpdGVIZWlnaHQgOiBudW1iZXIgPSBzcHJpdGVUeXBlLmdldFNwcml0ZUhlaWdodCgpO1xuICAgICAgICBsZXQgc3ByaXRlWEluUGl4ZWxzIDogbnVtYmVyID0gc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WCgpICsgKHNwcml0ZVdpZHRoLzIpIC0gdmlld3BvcnQuZ2V0WCgpO1xuICAgICAgICBsZXQgc3ByaXRlWUluUGl4ZWxzIDogbnVtYmVyID0gc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WSgpICsgKHNwcml0ZUhlaWdodC8yKSAtIHZpZXdwb3J0LmdldFkoKTtcbiAgICAgICAgbGV0IHNwcml0ZVhUcmFuc2xhdGUgOiBudW1iZXIgPSAoc3ByaXRlWEluUGl4ZWxzIC0gKGNhbnZhc1dpZHRoLzIpKS8oY2FudmFzV2lkdGgvMik7XG4gICAgICAgIGxldCBzcHJpdGVZVHJhbnNsYXRlIDogbnVtYmVyID0gKHNwcml0ZVlJblBpeGVscyAtIChjYW52YXNIZWlnaHQvMikpLyhjYW52YXNIZWlnaHQvMik7XG4gICAgICAgIHRoaXMubWVzaFRyYW5zbGF0ZS5zZXRYKHNwcml0ZVhUcmFuc2xhdGUpO1xuICAgICAgICB0aGlzLm1lc2hUcmFuc2xhdGUuc2V0WSgtc3ByaXRlWVRyYW5zbGF0ZSk7XG5cbiAgICAgICAgLy8gQ0FMQ1VMQVRFIEhPVyBNVUNIIFRPIFNDQUxFIFRIRSBRVUFEIFBFUiBUSEUgU1BSSVRFIFNJWkVcbiAgICAgICAgbGV0IGRlZmF1bHRXaWR0aCA6IG51bWJlciA9IGNhbnZhc1dpZHRoO1xuICAgICAgICBsZXQgZGVmYXVsdEhlaWdodCA6IG51bWJlciA9IGNhbnZhc0hlaWdodDtcbiAgICAgICAgbGV0IHNjYWxlWCA6IG51bWJlciA9IDIqc3ByaXRlV2lkdGgvZGVmYXVsdFdpZHRoO1xuICAgICAgICBsZXQgc2NhbGVZIDogbnVtYmVyID0gMipzcHJpdGVIZWlnaHQvZGVmYXVsdEhlaWdodDtcbiAgICAgICAgdGhpcy5tZXNoU2NhbGUuc2V0KHNjYWxlWCwgc2NhbGVZLCAwLjAsIDAuMCk7Ly8xLjAsIDEuMCk7XG4gICAgICAgIC8vdGhpcy5tZXNoUm90YXRlLnNldCgwLCAwLCAoMy4xNC80KSwgMCk7XG5cbiAgICAgICAgLy8gQHRvZG8gLSBDT01CSU5FIFRISVMgV0lUSCBUSEUgUk9UQVRFIEFORCBTQ0FMRSBWQUxVRVMgRlJPTSBUSEUgU1BSSVRFXG4gICAgICAgIE1hdGhVdGlsaXRpZXMuaWRlbnRpdHkodGhpcy5tZXNoVHJhbnNmb3JtKTtcbiAgICAgICAgTWF0aFV0aWxpdGllcy5tb2RlbCh0aGlzLm1lc2hUcmFuc2Zvcm0sIHRoaXMubWVzaFRyYW5zbGF0ZSwgdGhpcy5tZXNoUm90YXRlLCB0aGlzLm1lc2hTY2FsZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBGSUdVUkUgT1VUIFRIRSBURVhUVVJFIENPT1JESU5BVEUgRkFDVE9SIEFORCBTSElGVFxuICAgICAgICBsZXQgdGV4Q29vcmRGYWN0b3JYIDogbnVtYmVyID0gc3ByaXRlV2lkdGgvdGV4dHVyZS53aWR0aDtcbiAgICAgICAgbGV0IHRleENvb3JkRmFjdG9yWSA6IG51bWJlciA9IHNwcml0ZUhlaWdodC90ZXh0dXJlLmhlaWdodDtcbiAgICAgICAgbGV0IHNwcml0ZUxlZnQgOiBudW1iZXIgPSBzcHJpdGUuZ2V0TGVmdCgpO1xuICAgICAgICBsZXQgc3ByaXRlVG9wIDogbnVtYmVyID0gc3ByaXRlLmdldFRvcCgpO1xuICAgICAgICBsZXQgdGV4Q29vcmRTaGlmdFggOiBudW1iZXIgPSBzcHJpdGVMZWZ0L3RleHR1cmUud2lkdGg7XG4gICAgICAgIGxldCB0ZXhDb29yZFNoaWZ0WSA6IG51bWJlciA9IHNwcml0ZVRvcC90ZXh0dXJlLmhlaWdodDtcblxuICAgICAgICAvLyBVU0UgVEhFIEFUVFJJQlVURVNcbiAgICAgICAgd2ViR0wuYmluZEJ1ZmZlcih3ZWJHTC5BUlJBWV9CVUZGRVIsIHRoaXMudmVydGV4RGF0YUJ1ZmZlcik7XG4gICAgICAgIHdlYkdMLmJpbmRUZXh0dXJlKHdlYkdMLlRFWFRVUkVfMkQsIHRleHR1cmUud2ViR0xUZXh0dXJlKTtcblxuICAgICAgICAvLyBIT09LIFVQIFRIRSBBVFRSSUJVVEVTXG4gICAgICAgIGxldCBhX1Bvc2l0aW9uTG9jYXRpb24gOiBHTHVpbnQgPSB0aGlzLndlYkdMQXR0cmlidXRlTG9jYXRpb25zLmdldCh0aGlzLkFfUE9TSVRJT04pO1xuICAgICAgICB3ZWJHTC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGFfUG9zaXRpb25Mb2NhdGlvbiwgdGhpcy5GTE9BVFNfUEVSX1RFWFRVUkVfQ09PUkRJTkFURSwgd2ViR0wuRkxPQVQsIGZhbHNlLCB0aGlzLlRPVEFMX0JZVEVTLCB0aGlzLlZFUlRFWF9QT1NJVElPTl9PRkZTRVQpO1xuICAgICAgICB3ZWJHTC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhX1Bvc2l0aW9uTG9jYXRpb24pO1xuICAgICAgICBsZXQgYV9UZXhDb29yZExvY2F0aW9uIDogR0x1aW50ID0gdGhpcy53ZWJHTEF0dHJpYnV0ZUxvY2F0aW9ucy5nZXQodGhpcy5BX1RFWF9DT09SRCk7XG4gICAgICAgIHdlYkdMLnZlcnRleEF0dHJpYlBvaW50ZXIoYV9UZXhDb29yZExvY2F0aW9uLCB0aGlzLkZMT0FUU19QRVJfVEVYVFVSRV9DT09SRElOQVRFLCB3ZWJHTC5GTE9BVCwgZmFsc2UsIHRoaXMuVE9UQUxfQllURVMsIHRoaXMuVEVYVFVSRV9DT09SRElOQVRFX09GRlNFVCk7XG4gICAgICAgIHdlYkdMLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGFfVGV4Q29vcmRMb2NhdGlvbik7XG5cbiAgICAgICAgLy8gVVNFIFRIRSBVTklGT1JNU1xuICAgICAgICBsZXQgdV9NZXNoVHJhbnNmb3JtTG9jYXRpb24gOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbiA9IHRoaXMud2ViR0xVbmlmb3JtTG9jYXRpb25zLmdldCh0aGlzLlVfTUVTSF9UUkFOU0ZPUk0pO1xuICAgICAgICB3ZWJHTC51bmlmb3JtTWF0cml4NGZ2KHVfTWVzaFRyYW5zZm9ybUxvY2F0aW9uLCBmYWxzZSwgdGhpcy5tZXNoVHJhbnNmb3JtLmdldERhdGEoKSk7XG4gICAgICAgIGxldCB1X1NhbXBsZXJMb2NhdGlvbiA6IFdlYkdMVW5pZm9ybUxvY2F0aW9uID0gdGhpcy53ZWJHTFVuaWZvcm1Mb2NhdGlvbnMuZ2V0KHRoaXMuVV9TQU1QTEVSKTtcbiAgICAgICAgd2ViR0wudW5pZm9ybTFpKHVfU2FtcGxlckxvY2F0aW9uLCB0ZXh0dXJlLndlYkdMVGV4dHVyZUlkKTtcbiAgICAgICAgbGV0IHVfVGV4Q29vcmRGYWN0b3JMb2NhdGlvbiA6IFdlYkdMVW5pZm9ybUxvY2F0aW9uID0gdGhpcy53ZWJHTFVuaWZvcm1Mb2NhdGlvbnMuZ2V0KHRoaXMuVV9URVhfQ09PUkRfRkFDVE9SKTtcbiAgICAgICAgd2ViR0wudW5pZm9ybTJmKHVfVGV4Q29vcmRGYWN0b3JMb2NhdGlvbiwgdGV4Q29vcmRGYWN0b3JYLCB0ZXhDb29yZEZhY3RvclkpO1xuICAgICAgICBsZXQgdV9UZXhDb29yZFNoaWZ0TG9jYXRpb24gOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbiA9IHRoaXMud2ViR0xVbmlmb3JtTG9jYXRpb25zLmdldCh0aGlzLlVfVEVYX0NPT1JEX1NISUZUKTtcbiAgICAgICAgd2ViR0wudW5pZm9ybTJmKHVfVGV4Q29vcmRTaGlmdExvY2F0aW9uLCB0ZXhDb29yZFNoaWZ0WCwgdGV4Q29vcmRTaGlmdFkpO1xuXG4gICAgICAgIC8vIERSQVcgVEhFIFNQUklURSBBUyBBIFRSSUFOR0xFIFNUUklQIFVTSU5HIDQgVkVSVElDRVMsIFNUQVJUSU5HIEFUIFRIRSBTVEFSVCBPRiBUSEUgQVJSQVkgKGluZGV4IDApXG4gICAgICAgIHdlYkdMLmRyYXdBcnJheXMod2ViR0wuVFJJQU5HTEVfU1RSSVAsIHRoaXMuSU5ERVhfT0ZfRklSU1RfVkVSVEVYLCB0aGlzLk5VTV9WRVJUSUNFUyk7XG4gICAgfVxufSIsImV4cG9ydCBjbGFzcyBXZWJHTEdhbWVUZXh0dXJlIHtcbiAgICBwdWJsaWMgd2ViR0xUZXh0dXJlSWQ6IG51bWJlcjtcbiAgICBwdWJsaWMgd2ViR0xUZXh0dXJlOiBXZWJHTFRleHR1cmU7XG4gICAgcHVibGljIGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xuICAgIHB1YmxpYyB3aWR0aCA6IG51bWJlcjtcbiAgICBwdWJsaWMgaGVpZ2h0IDogbnVtYmVyO1xufSIsImltcG9ydCB7IE1hdGhVdGlsaXRpZXMgfSBmcm9tIFwiLi4vbWF0aC9NYXRoVXRpbGl0aWVzXCJcbmltcG9ydCB7IFRpbGVkTGF5ZXIgfSBmcm9tIFwiLi4vc2NlbmUvdGlsZXMvVGlsZWRMYXllclwiXG5pbXBvcnQgeyBUaWxlU2V0IH0gZnJvbSBcIi4uL3NjZW5lL3RpbGVzL1RpbGVTZXRcIlxuaW1wb3J0IHsgV2ViR0xHYW1lUmVuZGVyaW5nQ29tcG9uZW50IH0gZnJvbSAnLi9XZWJHTEdhbWVSZW5kZXJpbmdDb21wb25lbnQnXG5pbXBvcnQgeyBXZWJHTEdhbWVUZXh0dXJlIH0gZnJvbSAnLi9XZWJHTEdhbWVUZXh0dXJlJ1xuaW1wb3J0IHsgVmlld3BvcnQgfSBmcm9tICcuLi9zY2VuZS9WaWV3cG9ydCdcblxuZXhwb3J0IGNsYXNzIFdlYkdMR2FtZVRpbGVkTGF5ZXJSZW5kZXJlciBleHRlbmRzIFdlYkdMR2FtZVJlbmRlcmluZ0NvbXBvbmVudCB7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gZ2VuZXJhdGVzIHRoZSBhcnJheSBvZiBhdHRyaWJ1dGUgZGF0YSBuZWVkZWQgdG8gXG4gICAgICogcmVuZGVyIG91ciBUaWxlZExheWVyIGFuZCBwdXRzIGl0IGluIHRoZSB0aWxlZCBsYXllciBhcmd1bWVudC5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2VuZXJhdGVWZXJ0ZXhEYXRhKHRpbGVkTGF5ZXI6IFRpbGVkTGF5ZXIpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICBsZXQgc29tZU51bWJlcllvdUhhdmVUb0RldGVybWluZSA6IG51bWJlciA9IDQ7XG4gICAgICAgIGxldCBkYXRhVG9GaWxsID0gW3NvbWVOdW1iZXJZb3VIYXZlVG9EZXRlcm1pbmVdO1xuICAgICAgICBsZXQgdmVydGV4RGF0YTogRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheShkYXRhVG9GaWxsKTtcbiAgICAgICAgcmV0dXJuIHZlcnRleERhdGE7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFZlcnRleERhdGEocmVuZGVyU2V0dXBEYXRhOiBvYmplY3QpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICAvLyBXRSBXSUxMIE5FRUQgVEhJUyBUTyBLTk9XIEhPVyBMQVJHRSBUTyBNQUtFIE9VUiBWRVJURVggREFUQSBCVUZGRVJcbiAgICAgICAgbGV0IHRpbGVkTGF5ZXJzOiBBcnJheTxUaWxlZExheWVyPiA9IDxBcnJheTxUaWxlZExheWVyPj5yZW5kZXJTZXR1cERhdGE7XG4gICAgICAgIGxldCB0aWxlZExheWVyOiBUaWxlZExheWVyID0gdGlsZWRMYXllcnNbMF07XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlVmVydGV4RGF0YSh0aWxlZExheWVyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U2hhZGVyQXR0cmlidXRlTmFtZXMoKTogc3RyaW5nW10ge1xuICAgICAgICAvLyBZT1UnTEwgTkVFRCBUTyBERUZJTkUgVEhJUyBNRVRIT0RcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTaGFkZXJVbmlmb3JtTmFtZXMoKTogc3RyaW5nW10ge1xuICAgICAgICAvLyBZT1UnTEwgTkVFRCBUTyBERUZJTkUgVEhJUyBNRVRIT0RcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXIoICB3ZWJHTDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICB2aWV3cG9ydCA6IFZpZXdwb3J0LFxuICAgICAgICAgICAgICAgICAgICB0aWxlZExheWVyczogQXJyYXk8VGlsZWRMYXllcj4pOiB2b2lkIHtcblxuICAgICAgICAgICAgLy8gU0VMRUNUIFRIRSBBTklNQVRFRCBTUFJJVEUgUkVOREVSSU5HIFNIQURFUiBQUk9HUkFNIEZPUiBVU0VcbiAgICAgICAgbGV0IHNoYWRlclByb2dyYW1Ub1VzZSA9IHRoaXMuc2hhZGVyLmdldFByb2dyYW0oKTtcbiAgICAgICAgd2ViR0wudXNlUHJvZ3JhbShzaGFkZXJQcm9ncmFtVG9Vc2UpO1xuXG4gICAgICAgIC8vIEFORCBUSEVOIFJFTkRFUiBFQUNIIExBWUVSXG4gICAgICAgIGZvciAobGV0IHRpbGVkTGF5ZXIgb2YgdGlsZWRMYXllcnMpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVGlsZWRMYXllcih3ZWJHTCwgdmlld3BvcnQsIHRpbGVkTGF5ZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJUaWxlZExheWVyKFxuICAgICAgICB3ZWJHTDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LFxuICAgICAgICB2aWV3cG9ydCA6IFZpZXdwb3J0LFxuICAgICAgICB0aWxlZExheWVyOiBUaWxlZExheWVyKSB7XG4gICAgICAgICAgICAvLyBZT1UnTEwgTkVFRCBUTyBERUZJTkUgVEhJUyBNRVRIT0RcbiAgICB9XG59IiwiaW1wb3J0IHtTY2VuZU9iamVjdH0gZnJvbSAnLi9TY2VuZU9iamVjdCdcbmltcG9ydCB7QW5pbWF0ZWRTcHJpdGV9IGZyb20gJy4vc3ByaXRlL0FuaW1hdGVkU3ByaXRlJ1xuaW1wb3J0IHtUaWxlZExheWVyfSBmcm9tICcuL3RpbGVzL1RpbGVkTGF5ZXInXG5pbXBvcnQge1RpbGVTZXR9IGZyb20gJy4vdGlsZXMvVGlsZVNldCdcbmltcG9ydCB7Vmlld3BvcnR9IGZyb20gJy4vVmlld3BvcnQnO1xuXG5leHBvcnQgY2xhc3MgU2NlbmVHcmFwaCB7XG4gICAgLy8gQU5EIEFMTCBPRiBUSEUgQU5JTUFURUQgU1BSSVRFUywgV0hJQ0ggQVJFIE5PVCBTVE9SRURcbiAgICAvLyBTT1JURUQgT1IgSU4gQU5ZIFBBUlRJQ1VMQVIgT1JERVIuIE5PVEUgVEhBVCBBTklNQVRFRCBTUFJJVEVTXG4gICAgLy8gQVJFIFNDRU5FIE9CSkVDVFNcbiAgICBwcml2YXRlIGFuaW1hdGVkU3ByaXRlcyA6IEFycmF5PEFuaW1hdGVkU3ByaXRlPjtcblxuICAgIC8vIFNFVCBPRiBWSVNJQkxFIE9CSkVDVFMsIE5PVEUgVEhBVCBBVCBUSEUgTU9NRU5UIE9VUlxuICAgIC8vIFNDRU5FIEdSQVBIIElTIFFVSVRFIFNJTVBMRSwgU08gVEhJUyBJUyBUSEUgU0FNRSBBU1xuICAgIC8vIE9VUiBMSVNUIE9GIEFOSU1BVEVEIFNQUklURVNcbiAgICBwcml2YXRlIHZpc2libGVTZXQgOiBBcnJheTxTY2VuZU9iamVjdD47XG4gICAgcHJpdmF0ZSBtYWluQ2hhcmFjdGVyIDogQW5pbWF0ZWRTcHJpdGU7XG5cbiAgICAvLyBXRSBBUkUgQUxTTyBVU0lORyBBIFRJTElORyBFTkdJTkUgRk9SIFJFTkRFUklORyBPVVIgTEVWRUxcbiAgICAvLyBOT1RFIFRIQVQgV0UgTUFOQUdFIFRISVMgSEVSRSBCRUNBVVNFIFdFIE1BWSBJTlZPTFZFIFRIRSBUSUxFRFxuICAgIC8vIExBWUVSUyBJTiBQSFlTSUNTIEFORCBQQVRIRklORElORyBBUyBXRUxMXG4gICAgcHJpdmF0ZSB0aWxlZExheWVycyA6IEFycmF5PFRpbGVkTGF5ZXI+O1xuICAgIHByaXZhdGUgdGlsZVNldHMgOiBBcnJheTxUaWxlU2V0PjtcblxuICAgIC8vIFRIRSBWSUVXUE9SVCBJUyBVU0VEIFRPIEZJTFRFUiBPVVQgV0hBVCBJUyBOT1QgVklTSUJMRVxuICAgIHByaXZhdGUgdmlld3BvcnQgOiBWaWV3cG9ydDtcblxuICAgIC8vVEhFU0UgVkFSSUFCTEVTIFdJTEwgQkUgVVNFRCBUTyBNT1ZFIFRIRSBWSUVXUE9SVFxuICAgIHN0YXRpYyBtb3ZlVXAgOiBib29sZWFuO1xuICAgIHN0YXRpYyBtb3ZlRG93biA6IGJvb2xlYW47XG4gICAgc3RhdGljIG1vdmVMZWZ0IDogYm9vbGVhbjtcbiAgICBzdGF0aWMgbW92ZVJpZ2h0IDogYm9vbGVhbjtcbiAgICBwcml2YXRlIHVwUG9zIDogbnVtYmVyO1xuICAgIHByaXZhdGUgZG93blBvcyA6IG51bWJlcjtcbiAgICBwcml2YXRlIGxlZnRQb3MgOiBudW1iZXI7XG4gICAgcHJpdmF0ZSByaWdodFBvcyA6IG51bWJlcjtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gREVGQVVMVCBDT05TVFJVQ1RPUiBJTklUSUFMSVpFUyBPVVIgREFUQSBTVFJVQ1RVUkVTXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2xlYXIoKSA6IHZvaWQge1xuICAgICAgICB0aGlzLmFuaW1hdGVkU3ByaXRlcyA9IFtdO1xuICAgICAgICB0aGlzLnZpc2libGVTZXQgPSBbXTtcbiAgICAgICAgdGhpcy50aWxlZExheWVycyA9IFtdO1xuICAgICAgICB0aGlzLnRpbGVTZXRzID0gW107XG4gICAgICAgIHRoaXMudXBQb3MgPSAwO1xuICAgICAgICB0aGlzLmRvd25Qb3MgPSAwO1xuICAgICAgICB0aGlzLmxlZnRQb3MgPSAwO1xuICAgICAgICB0aGlzLnJpZ2h0UG9zID0gMDtcbiAgICAgICAgLy90aGlzLm1haW5DaGFyYWN0ZXIgPSBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRUaWxlU2V0KHRpbGVTZXRUb0FkZCA6IFRpbGVTZXQpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZVNldHMucHVzaCh0aWxlU2V0VG9BZGQpIC0gMTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TnVtVGlsZVNldHMoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVTZXRzLmxlbmd0aDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGlsZVNldChpbmRleCA6IG51bWJlcikgOiBUaWxlU2V0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZVNldHNbaW5kZXhdO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRMYXllcihsYXllclRvQWRkIDogVGlsZWRMYXllcikgOiB2b2lkIHtcbiAgICAgICAgdGhpcy50aWxlZExheWVycy5wdXNoKGxheWVyVG9BZGQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXROdW1UaWxlZExheWVycygpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZWRMYXllcnMubGVuZ3RoO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUaWxlZExheWVycygpIDogQXJyYXk8VGlsZWRMYXllcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlZExheWVycztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGlsZWRMYXllcihsYXllckluZGV4IDogbnVtYmVyKSA6IFRpbGVkTGF5ZXIge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlZExheWVyc1tsYXllckluZGV4XTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TnVtU3ByaXRlcygpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0ZWRTcHJpdGVzLmxlbmd0aDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0Vmlld3BvcnQoaW5pdFZpZXdwb3J0IDogVmlld3BvcnQpIDogdm9pZCB7XG4gICAgICAgIHRoaXMudmlld3BvcnQgPSBpbml0Vmlld3BvcnQ7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFZpZXdwb3J0KCkgOiBWaWV3cG9ydCB7IFxuICAgICAgICByZXR1cm4gdGhpcy52aWV3cG9ydDtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkQW5pbWF0ZWRTcHJpdGUoc3ByaXRlIDogQW5pbWF0ZWRTcHJpdGUpIDogdm9pZCB7XG4gICAgICAgIHRoaXMuYW5pbWF0ZWRTcHJpdGVzLnB1c2goc3ByaXRlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0QW5pbWF0ZWRTcHJpdGVzKCkgOiBBcnJheTxBbmltYXRlZFNwcml0ZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5hbmltYXRlZFNwcml0ZXM7XG4gICAgfVxuXG4gICAgcHVibGljIHNldE1haW5DaGFyYWN0ZXIoc3ByaXRlIDogQW5pbWF0ZWRTcHJpdGUpIDogdm9pZCB7XG4gICAgICAgIHRoaXMubWFpbkNoYXJhY3RlciA9IHNwcml0ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TWFpbkNoYXJhY3RlcigpIDogQW5pbWF0ZWRTcHJpdGUge1xuICAgICAgICByZXR1cm4gdGhpcy5tYWluQ2hhcmFjdGVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTcHJpdGVBdCh0ZXN0WCA6IG51bWJlciwgdGVzdFkgOiBudW1iZXIpIDogQW5pbWF0ZWRTcHJpdGUge1xuICAgICAgICBmb3IgKGxldCBzcHJpdGUgb2YgdGhpcy5hbmltYXRlZFNwcml0ZXMpIHtcbiAgICAgICAgICAgIGlmIChzcHJpdGUuY29udGFpbnModGVzdFgsIHRlc3RZKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gc3ByaXRlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgc2V0TW92ZVVwKGIgOiBib29sZWFuKXtcbiAgICAgICAgdGhpcy5tb3ZlVXAgPSBiO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgc2V0TW92ZURvd24oYiA6IGJvb2xlYW4pe1xuICAgICAgICB0aGlzLm1vdmVEb3duID0gYjtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHNldE1vdmVMZWZ0KGIgOiBib29sZWFuKXtcbiAgICAgICAgdGhpcy5tb3ZlTGVmdCA9IGI7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzZXRNb3ZlUmlnaHQoYiA6IGJvb2xlYW4pe1xuICAgICAgICB0aGlzLm1vdmVSaWdodCA9IGI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogdXBkYXRlXG4gICAgICogXG4gICAgICogQ2FsbGVkIG9uY2UgcGVyIGZyYW1lLCB0aGlzIGZ1bmN0aW9uIHVwZGF0ZXMgdGhlIHN0YXRlIG9mIGFsbCB0aGUgb2JqZWN0c1xuICAgICAqIGluIHRoZSBzY2VuZS5cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gZGVsdGEgVGhlIHRpbWUgdGhhdCBoYXMgcGFzc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhpcyB1cGRhdGVcbiAgICAgKiBmdW5jYXRpb24gd2FzIGNhbGxlZC5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlKGRlbHRhIDogbnVtYmVyKSA6IHZvaWQge1xuICAgICAgICBmb3IgKGxldCBzcHJpdGUgb2YgdGhpcy5hbmltYXRlZFNwcml0ZXMpIHtcbiAgICAgICAgICAgIHNwcml0ZS51cGRhdGUoZGVsdGEpO1xuICAgICAgICB9XG4gICAgICAgIGlmKFNjZW5lR3JhcGgubW92ZVVwKXtcbiAgICAgICAgICAgIHRoaXMudXBQb3MgKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZihTY2VuZUdyYXBoLm1vdmVEb3duKXtcbiAgICAgICAgICAgIHRoaXMuZG93blBvcyArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmKFNjZW5lR3JhcGgubW92ZUxlZnQpe1xuICAgICAgICAgICAgdGhpcy5sZWZ0UG9zICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYoU2NlbmVHcmFwaC5tb3ZlUmlnaHQpe1xuICAgICAgICAgICAgdGhpcy5yaWdodFBvcyArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudmlld3BvcnQuc2V0UG9zaXRpb24oKHRoaXMubGVmdFBvcyAtIHRoaXMucmlnaHRQb3MpLCAodGhpcy5kb3duUG9zIC0gdGhpcy51cFBvcykpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzY29wZSgpIDogQXJyYXk8U2NlbmVPYmplY3Q+IHtcbiAgICAgICAgLy8gQ0xFQVIgT1VUIFRIRSBPTERcbiAgICAgICAgdGhpcy52aXNpYmxlU2V0ID0gW107XG5cbiAgICAgICAgLy8gUFVUIEFMTCBUSEUgU0NFTkUgT0JKRUNUUyBJTlRPIFRIRSBWSVNJQkxFIFNFVFxuICAgICAgICBmb3IgKGxldCBzcHJpdGUgb2YgdGhpcy5hbmltYXRlZFNwcml0ZXMpIHtcbiAgICAgICAgICAgIGxldCBzcHJpdGVUeXBlID0gc3ByaXRlLmdldFNwcml0ZVR5cGUoKTtcbiAgICAgICAgICAgIGxldCBzcHJpdGVXaWR0aCA6IG51bWJlciA9IHNwcml0ZVR5cGUuZ2V0U3ByaXRlV2lkdGgoKTtcbiAgICAgICAgICAgIGxldCBzcHJpdGVIZWlnaHQgOiBudW1iZXIgPSBzcHJpdGVUeXBlLmdldFNwcml0ZUhlaWdodCgpO1xuICAgICAgICAgICAgbGV0IHNwcml0ZVhJblBpeGVscyA6IG51bWJlciA9IHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFgoKSArIChzcHJpdGVXaWR0aCkgLSB0aGlzLnZpZXdwb3J0LmdldFgoKTtcbiAgICAgICAgICAgIGxldCBzcHJpdGVZSW5QaXhlbHMgOiBudW1iZXIgPSBzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRZKCkgKyAoc3ByaXRlSGVpZ2h0KSAtIHRoaXMudmlld3BvcnQuZ2V0WSgpO1xuICAgICAgICAgICAgaWYoc3ByaXRlWEluUGl4ZWxzID4gMCAmJiBzcHJpdGVYSW5QaXhlbHMgPCAodGhpcy52aWV3cG9ydC5nZXRXaWR0aCgpICsgc3ByaXRlV2lkdGgpXG4gICAgICAgICAgICAgJiYgKHNwcml0ZVlJblBpeGVscyA+IDAgJiYgc3ByaXRlWUluUGl4ZWxzIDwgKHRoaXMudmlld3BvcnQuZ2V0SGVpZ2h0KCkgKyBzcHJpdGVIZWlnaHQpKSl7XG4gICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlU2V0LnB1c2goc3ByaXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnZpc2libGVTZXQ7XG4gICAgfVxufSIsImltcG9ydCB7VmVjdG9yM30gZnJvbSAnLi4vbWF0aC9WZWN0b3IzJ1xuXG4vKipcbiAqIFNjZW5lT2JqZWN0XG4gKiBcbiAqIEEgU2NlbmVPYmplY3QgaXMgc29tZXRoaW5nIHRoYXQgY2FuIGJlIHBsYWNlZCBpbnRvIHRoZSBzY2VuZSBncmFwaC4gSXQgaGFzXG4gKiBhIHBvc2l0aW9uLCByb3RhdGlvbiwgYW5kIHNjYWxlIGluIHRoZSBnYW1lIHdvcmxkLiBOb3RlIHRoYXQgaXRzIHBvc2l0aW9uXG4gKiBpcyB0eXBpY2FsbHkgaXRzIGNlbnRlcmVkIGxvY2F0aW9uLCBzbyBpZiB3ZSdyZSB0YWxraW5nIGFib3V0IGEgMmQgYm94LCBcbiAqIGl0IHdvdWxkIGJlIHRoZSBjZW50ZXIgb2YgdGhhdCBib3guXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTY2VuZU9iamVjdCB7XG4gICAgcHJpdmF0ZSBwb3NpdGlvbiA6IFZlY3RvcjM7XG4gICAgcHJpdmF0ZSByb3RhdGlvbiA6IFZlY3RvcjM7XG4gICAgcHJpdmF0ZSBzY2FsZSA6IFZlY3RvcjM7XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICB0aGlzLnJvdGF0aW9uID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgdGhpcy5zY2FsZSA9IG5ldyBWZWN0b3IzKCk7XG5cbiAgICAgICAgLy8gQ0xFQVIgQUxMIFZBTFVFU1xuICAgICAgICB0aGlzLnBvc2l0aW9uLnNldCgwLjAsIDAuMCwgMC4wLCAxLjApO1xuICAgICAgICB0aGlzLnJvdGF0aW9uLnNldCgwLjAsIDAuMCwgMC4wLCAxLjApO1xuICAgICAgICB0aGlzLnNjYWxlLnNldCgxLjAsIDEuMCwgMS4wLCAxLjApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRQb3NpdGlvbigpIDogVmVjdG9yMyB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uO1xuICAgIH0gICAgXG5cbiAgICBwdWJsaWMgZ2V0Um90YXRpb24oKSA6IFZlY3RvcjMge1xuICAgICAgICByZXR1cm4gdGhpcy5yb3RhdGlvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U2NhbGUoKSA6IFZlY3RvcjMge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2FsZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWJzdHJhY3QgY29udGFpbnModGVzdFggOiBudW1iZXIsIHRlc3RZIDogbnVtYmVyKSA6IGJvb2xlYW47XG59IiwiZXhwb3J0IGNsYXNzIFZpZXdwb3J0IHtcbiAgICBwcml2YXRlIHdpZHRoIDogbnVtYmVyO1xuICAgIHByaXZhdGUgaGVpZ2h0IDogbnVtYmVyO1xuICAgIHByaXZhdGUgeCA6IG51bWJlcjtcbiAgICBwcml2YXRlIHkgOiBudW1iZXI7XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoaW5pdFdpZHRoIDogbnVtYmVyLCBpbml0SGVpZ2h0IDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMud2lkdGggPSBpbml0V2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaW5pdEhlaWdodDtcbiAgICAgICAgdGhpcy54ID0gMDtcbiAgICAgICAgdGhpcy55ID0gMDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0V2lkdGgoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLndpZHRoO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRIZWlnaHQoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmhlaWdodDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0WCgpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0WSgpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW5jKGluY1ggOiBudW1iZXIsIGluY1kgOiBudW1iZXIpIDogdm9pZCB7XG4gICAgICAgIHRoaXMueCArPSBpbmNYO1xuICAgICAgICB0aGlzLnkgKz0gaW5jWTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0UG9zaXRpb24oaW5pdFggOiBudW1iZXIsIGluaXRZIDogbnVtYmVyKSA6IHZvaWQge1xuICAgICAgICB0aGlzLnggPSBpbml0WDtcbiAgICAgICAgdGhpcy55ID0gaW5pdFk7XG4gICAgfVxufSIsImltcG9ydCB7U2NlbmVPYmplY3R9IGZyb20gJy4uL1NjZW5lT2JqZWN0J1xuaW1wb3J0IHtBbmltYXRlZFNwcml0ZVR5cGV9IGZyb20gJy4vQW5pbWF0ZWRTcHJpdGVUeXBlJ1xuaW1wb3J0IHsgU3ByaXRlQmVoYXZpb3IgfSBmcm9tICcuLi8uLi9haS9TcHJpdGVCZWhhdmlvcic7XG5cbmV4cG9ydCBjbGFzcyBBbmltYXRlZFNwcml0ZSBleHRlbmRzIFNjZW5lT2JqZWN0IHtcbiAgICBwcml2YXRlIHNwcml0ZVR5cGUgOiBBbmltYXRlZFNwcml0ZVR5cGU7XG4gICAgcHJpdmF0ZSBzdGF0ZSA6IHN0cmluZztcbiAgICBwcml2YXRlIHR5cGVfbmFtZSA6IHN0cmluZztcbiAgICBwcml2YXRlIGFuaW1hdGlvbkZyYW1lSW5kZXggOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBmcmFtZUNvdW50ZXIgOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBkZWFkRnJhbWU6IG51bWJlcjtcbiAgICBwcml2YXRlIGJlaGF2aW9yIDogU3ByaXRlQmVoYXZpb3I7XG4gICAgXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGluaXRTcHJpdGVUeXBlIDogQW5pbWF0ZWRTcHJpdGVUeXBlLCBpbml0U3RhdGUgOiBzdHJpbmcsIGluaXRUeXBlTmFtZSA6IHN0cmluZywgaW5pdEJlaGF2aW9yIDogU3ByaXRlQmVoYXZpb3IpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zcHJpdGVUeXBlID0gaW5pdFNwcml0ZVR5cGU7XG4gICAgICAgIHRoaXMudHlwZV9uYW1lID0gaW5pdFR5cGVOYW1lO1xuICAgICAgICB0aGlzLmJlaGF2aW9yID0gaW5pdEJlaGF2aW9yO1xuICAgICAgICB0aGlzLmJlaGF2aW9yLnNldFNwcml0ZSh0aGlzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNUQVJUIFJFU0VUXG4gICAgICAgIHRoaXMuc3RhdGUgPSBpbml0U3RhdGU7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uRnJhbWVJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuZnJhbWVDb3VudGVyID0gMDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0QW5pbWF0aW9uRnJhbWVJbmRleCgpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0aW9uRnJhbWVJbmRleDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RnJhbWVDb3VudGVyKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5mcmFtZUNvdW50ZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFNwcml0ZVR5cGUoKSA6IEFuaW1hdGVkU3ByaXRlVHlwZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZVR5cGU7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFN0YXRlKCkgOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VHlwZU5hbWUoKSA6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGVfbmFtZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHNldFN0YXRlKGluaXRTdGF0ZSA6IHN0cmluZykgOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IGluaXRTdGF0ZTtcbiAgICAgICAgdGhpcy5hbmltYXRpb25GcmFtZUluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5mcmFtZUNvdW50ZXIgPSAwO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdXBkYXRlKGRlbHRhIDogbnVtYmVyKSA6IHZvaWQge1xuICAgICAgICB0aGlzLmZyYW1lQ291bnRlcisrO1xuICAgICAgICBcbiAgICAgICAgLy8gSEFWRSBXRSBHT05FIFBBU1QgVEhFIExBU1QgRlJBTUUgSU4gVEhFIEFOSU1BVElPTj9cbiAgICAgICAgdmFyIGN1cnJlbnRBbmltYXRpb24gPSB0aGlzLnNwcml0ZVR5cGUuZ2V0QW5pbWF0aW9uKHRoaXMuc3RhdGUpO1xuICAgICAgICB2YXIgY3VycmVudEZyYW1lID0gY3VycmVudEFuaW1hdGlvblt0aGlzLmFuaW1hdGlvbkZyYW1lSW5kZXhdO1xuICAgICAgICBpZiAodGhpcy5mcmFtZUNvdW50ZXIgPiAoY3VycmVudEZyYW1lLmR1cmF0aW9uKSkge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25GcmFtZUluZGV4Kys7XG4gICAgICAgICAgICBpZiAodGhpcy5hbmltYXRpb25GcmFtZUluZGV4ID49IGN1cnJlbnRBbmltYXRpb24ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5zdGF0ZSA9PSBcIkRZSU5HXCIpe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gXCJERUFEXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uRnJhbWVJbmRleCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZyYW1lQ291bnRlciA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iZWhhdmlvci51cGRhdGUoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29udGFpbnMocG9pbnRYIDogbnVtYmVyLCBwb2ludFkgOiBudW1iZXIpIDogYm9vbGVhbiB7XG4gICAgICAgIGxldCBzcHJpdGVXaWR0aCA9IHRoaXMuZ2V0U3ByaXRlVHlwZSgpLmdldFNwcml0ZVdpZHRoKCk7XG4gICAgICAgIGxldCBzcHJpdGVIZWlnaHQgPSB0aGlzLmdldFNwcml0ZVR5cGUoKS5nZXRTcHJpdGVIZWlnaHQoKTtcbiAgICAgICAgbGV0IHNwcml0ZUxlZnQgPSB0aGlzLmdldFBvc2l0aW9uKCkuZ2V0WCgpO1xuICAgICAgICBsZXQgc3ByaXRlUmlnaHQgPSB0aGlzLmdldFBvc2l0aW9uKCkuZ2V0WCgpICsgc3ByaXRlV2lkdGg7XG4gICAgICAgIGxldCBzcHJpdGVUb3AgPSB0aGlzLmdldFBvc2l0aW9uKCkuZ2V0WSgpO1xuICAgICAgICBsZXQgc3ByaXRlQm90dG9tID0gdGhpcy5nZXRQb3NpdGlvbigpLmdldFkoKSArIHNwcml0ZUhlaWdodDtcbiAgICAgICAgaWYgKCAgICAocG9pbnRYIDwgc3ByaXRlTGVmdClcbiAgICAgICAgICAgIHx8ICAoc3ByaXRlUmlnaHQgPCBwb2ludFgpXG4gICAgICAgICAgICB8fCAgKHBvaW50WSA8IHNwcml0ZVRvcClcbiAgICAgICAgICAgIHx8ICAoc3ByaXRlQm90dG9tIDwgcG9pbnRZKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlJFTkFNRSBUSElTIE1FVEhPRCBTTyBJVCBERU5PVEVTIFBJWEVMIExPQ0FUSU9OIElOIFRFWFRVUkUgKi9cbiAgICBwdWJsaWMgZ2V0TGVmdCgpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlVHlwZS5nZXRMZWZ0KHRoaXMuc3RhdGUsIHRoaXMuYW5pbWF0aW9uRnJhbWVJbmRleCk7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBnZXRUb3AoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZVR5cGUuZ2V0VG9wKHRoaXMuc3RhdGUsIHRoaXMuYW5pbWF0aW9uRnJhbWVJbmRleCk7XG4gICAgfVxuXG4gICAgcHVibGljIHRvU3RyaW5nKCkgOiBzdHJpbmcge1xuICAgICAgICBsZXQgc3VtbWFyeSA6IHN0cmluZyA9ICBcInsgcG9zaXRpb246IChcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgICB0aGlzLmdldFBvc2l0aW9uKCkuZ2V0WCgpICsgXCIsIFwiICsgdGhpcy5nZXRQb3NpdGlvbigpLmdldFkoKSArIFwiKSBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgICBcIihzdGF0ZTogXCIgKyB0aGlzLmdldFN0YXRlKCkgKyBcIikgXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArICAgXCIoYW5pbWF0aW9uRnJhbWVJbmRleDogXCIgKyB0aGlzLmdldEFuaW1hdGlvbkZyYW1lSW5kZXgoKSArIFwiKSBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgICBcIihmcmFtZUNvdW50ZXI6IFwiICsgdGhpcy5nZXRGcmFtZUNvdW50ZXIoKSArIFwiKSBcIjtcbiAgICAgICAgcmV0dXJuIHN1bW1hcnk7XG4gICAgfVxufSIsImltcG9ydCB7V2ViR0xHYW1lVGV4dHVyZX0gZnJvbSAnLi4vLi4vcmVuZGVyaW5nL1dlYkdMR2FtZVRleHR1cmUnXG5cbmV4cG9ydCBjbGFzcyBBbmltYXRpb25GcmFtZSB7XG4gICAgcHVibGljIGxlZnQgOiBudW1iZXI7XG4gICAgcHVibGljIHRvcCA6IG51bWJlcjtcbiAgICBwdWJsaWMgZHVyYXRpb24gOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcihpbml0TGVmdCA6IG51bWJlciwgaW5pdFRvcCA6IG51bWJlciwgaW5pdER1cmF0aW9uIDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMubGVmdCA9IGluaXRMZWZ0O1xuICAgICAgICB0aGlzLnRvcCA9IGluaXRUb3A7XG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSBpbml0RHVyYXRpb247XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQW5pbWF0ZWRTcHJpdGVUeXBlIHtcbiAgICBwcml2YXRlIHNwcml0ZVNoZWV0VGV4dHVyZSA6IFdlYkdMR2FtZVRleHR1cmU7XG4gICAgcHJpdmF0ZSBhbmltYXRpb25zIDogTWFwPHN0cmluZywgQXJyYXk8QW5pbWF0aW9uRnJhbWU+PjtcbiAgICBwcml2YXRlIHNwcml0ZVdpZHRoIDogbnVtYmVyO1xuICAgIHByaXZhdGUgc3ByaXRlSGVpZ2h0IDogbnVtYmVyO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGluaXRTcHJpdGVTaGVldFRleHR1cmUgOiBXZWJHTEdhbWVUZXh0dXJlLCBcbiAgICAgICAgICAgICAgICBpbml0U3ByaXRlV2lkdGggOiBudW1iZXIsIGluaXRTcHJpdGVIZWlnaHQgOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5zcHJpdGVTaGVldFRleHR1cmUgPSBpbml0U3ByaXRlU2hlZXRUZXh0dXJlO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuc3ByaXRlV2lkdGggPSBpbml0U3ByaXRlV2lkdGg7XG4gICAgICAgIHRoaXMuc3ByaXRlSGVpZ2h0ID0gaW5pdFNwcml0ZUhlaWdodDtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkQW5pbWF0aW9uKHN0YXRlIDogc3RyaW5nKSA6IHZvaWQge1xuICAgICAgICB0aGlzLmFuaW1hdGlvbnMuc2V0KHN0YXRlLCBuZXcgQXJyYXk8QW5pbWF0aW9uRnJhbWU+KCkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRBbmltYXRpb25GcmFtZShzdGF0ZSA6IHN0cmluZywgaW5kZXggOiBudW1iZXIsIGZyYW1lRHVyYXRpb24gOiBudW1iZXIpIDogdm9pZCB7XG4gICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5zcHJpdGVTaGVldFRleHR1cmUud2lkdGgvdGhpcy5zcHJpdGVXaWR0aDtcbiAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnNwcml0ZVNoZWV0VGV4dHVyZS5oZWlnaHQvdGhpcy5zcHJpdGVIZWlnaHQ7XG4gICAgICAgIHZhciBjb2wgPSBpbmRleCAlIGNvbHVtbnM7XG4gICAgICAgIHZhciByb3cgPSBNYXRoLmZsb29yKGluZGV4IC8gIGNvbHVtbnMpO1xuICAgICAgICB2YXIgbGVmdCA9IGNvbCAqIHRoaXMuc3ByaXRlV2lkdGg7XG4gICAgICAgIHZhciB0b3AgPSByb3cgKiB0aGlzLnNwcml0ZUhlaWdodDtcbiAgICAgICAgdGhpcy5hbmltYXRpb25zLmdldChzdGF0ZSkucHVzaChuZXcgQW5pbWF0aW9uRnJhbWUobGVmdCwgdG9wLCBmcmFtZUR1cmF0aW9uKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFNwcml0ZVdpZHRoKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGVXaWR0aDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U3ByaXRlSGVpZ2h0KCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGVIZWlnaHQ7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFNwcml0ZVNoZWV0VGV4dHVyZSgpIDogV2ViR0xHYW1lVGV4dHVyZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZVNoZWV0VGV4dHVyZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0QW5pbWF0aW9uKHN0YXRlIDogc3RyaW5nKSA6IEFycmF5PEFuaW1hdGlvbkZyYW1lPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmFuaW1hdGlvbnMuZ2V0KHN0YXRlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TGVmdChzdGF0ZSA6IHN0cmluZywgZnJhbWVJbmRleCA6IG51bWJlcikgOiBudW1iZXIge1xuICAgICAgICBsZXQgYW5pbWF0aW9uRnJhbWUgOiBBbmltYXRpb25GcmFtZSA9IHRoaXMuYW5pbWF0aW9ucy5nZXQoc3RhdGUpW2ZyYW1lSW5kZXhdO1xuICAgICAgICByZXR1cm4gYW5pbWF0aW9uRnJhbWUubGVmdDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VG9wKHN0YXRlIDogc3RyaW5nLCBmcmFtZUluZGV4IDogbnVtYmVyKSA6IG51bWJlciB7XG4gICAgICAgIGxldCBhbmltYXRpb25GcmFtZSA6IEFuaW1hdGlvbkZyYW1lID0gdGhpcy5hbmltYXRpb25zLmdldChzdGF0ZSlbZnJhbWVJbmRleF07XG4gICAgICAgIHJldHVybiBhbmltYXRpb25GcmFtZS50b3A7XG4gICAgfVxufSIsImltcG9ydCB7IFdlYkdMR2FtZVRleHR1cmUgfSBmcm9tIFwiLi4vLi4vcmVuZGVyaW5nL1dlYkdMR2FtZVRleHR1cmVcIjtcblxuZXhwb3J0IGNsYXNzIFRpbGVTZXQge1xuICAgIHByaXZhdGUgbmFtZSA6IHN0cmluZztcbiAgICBwcml2YXRlIGNvbHVtbnMgOiBudW1iZXI7XG4gICAgcHJpdmF0ZSByb3dzIDogbnVtYmVyO1xuICAgIHByaXZhdGUgdGlsZVdpZHRoIDogbnVtYmVyO1xuICAgIHByaXZhdGUgdGlsZUhlaWdodCA6IG51bWJlcjtcbiAgICBwcml2YXRlIHRpbGVTcGFjaW5nIDogbnVtYmVyO1xuICAgIHByaXZhdGUgdGlsZVNoZWV0V2lkdGggOiBudW1iZXI7XG4gICAgcHJpdmF0ZSB0aWxlU2hlZXRIZWlnaHQgOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBmaXJzdEluZGV4IDogbnVtYmVyO1xuICAgIHByaXZhdGUgdGV4dHVyZSA6IFdlYkdMR2FtZVRleHR1cmU7XG5cbiAgICBjb25zdHJ1Y3Rvcihpbml0TmFtZSA6IHN0cmluZywgXG4gICAgICAgICAgICAgICAgaW5pdENvbHVtbnMgOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgaW5pdFJvd3MgOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgaW5pdFRpbGVXaWR0aCA6IG51bWJlcixcbiAgICAgICAgICAgICAgICBpbml0VGlsZUhlaWdodCA6IG51bWJlcixcbiAgICAgICAgICAgICAgICBpbml0VGlsZVNwYWNpbmcgOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgaW5pdFRpbGVTaGVldFdpZHRoIDogbnVtYmVyLFxuICAgICAgICAgICAgICAgIGluaXRUaWxlU2hlZXRIZWlnaHQgOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgaW5pdEZpcnN0SW5kZXggOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgaW5pdFRleHR1cmUgOiBXZWJHTEdhbWVUZXh0dXJlKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IGluaXROYW1lO1xuICAgICAgICB0aGlzLmNvbHVtbnMgPSBpbml0Q29sdW1ucztcbiAgICAgICAgdGhpcy5yb3dzID0gaW5pdFJvd3M7XG4gICAgICAgIHRoaXMudGlsZVdpZHRoID0gaW5pdFRpbGVXaWR0aDtcbiAgICAgICAgdGhpcy50aWxlSGVpZ2h0ID0gaW5pdFRpbGVIZWlnaHQ7XG4gICAgICAgIHRoaXMudGlsZVNwYWNpbmcgPSBpbml0VGlsZVNwYWNpbmc7XG4gICAgICAgIHRoaXMudGlsZVNoZWV0V2lkdGggPSBpbml0VGlsZVNoZWV0V2lkdGg7XG4gICAgICAgIHRoaXMudGlsZVNoZWV0SGVpZ2h0ID0gaW5pdFRpbGVTaGVldEhlaWdodDtcbiAgICAgICAgdGhpcy5maXJzdEluZGV4ID0gaW5pdEZpcnN0SW5kZXg7XG4gICAgICAgIHRoaXMudGV4dHVyZSA9IGluaXRUZXh0dXJlO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXROYW1lKCkgOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDb2x1bW5zKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2x1bW5zO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRSb3dzKCkgOiBudW1iZXIgeyBcbiAgICAgICAgcmV0dXJuIHRoaXMucm93cztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGlsZVdpZHRoKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlV2lkdGg7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRpbGVIZWlnaHQoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVIZWlnaHQ7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRpbGVTcGFjaW5nKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlU3BhY2luZztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGlsZVNoZWV0V2lkdGgoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVTaGVldFdpZHRoO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUaWxlU2hlZXRIZWlnaHQoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVTaGVldEhlaWdodDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Rmlyc3RJbmRleCgpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlyc3RJbmRleDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGV4dHVyZSgpIDogV2ViR0xHYW1lVGV4dHVyZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRleHR1cmU7XG4gICAgfVxufSIsImltcG9ydCB7IFRpbGVTZXQgfSBmcm9tIFwiLi9UaWxlU2V0XCI7XG5cbmV4cG9ydCBjbGFzcyBUaWxlZExheWVyIHtcbiAgICBwcml2YXRlIGNvbGxpZGFibGUgOiBib29sZWFuO1xuICAgIHByaXZhdGUgdGlsZXMgOiBBcnJheTxudW1iZXI+O1xuICAgIHByaXZhdGUgY29sdW1ucyA6IG51bWJlcjtcbiAgICBwcml2YXRlIHJvd3MgOiBudW1iZXI7XG4gICAgcHJpdmF0ZSB0aWxlU2V0IDogVGlsZVNldDtcbiAgICBcbiAgICAvLyBXRSBXSUxMIFNUT1JFIFJFTkRFUklORy1TUEVDSUZJQyBEQVRBIEhFUkVcbiAgICBwcml2YXRlIHJlbmRlckRhdGEgOiBvYmplY3Q7XG5cbiAgICBjb25zdHJ1Y3Rvcihpbml0Q29sdW1ucyA6IG51bWJlcixcbiAgICAgICAgICAgICAgICBpbml0Um93cyA6IG51bWJlcixcbiAgICAgICAgICAgICAgICBpbml0VGlsZVNldCA6IFRpbGVTZXQpIHtcbiAgICAgICAgdGhpcy50aWxlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzLmNvbHVtbnMgPSBpbml0Q29sdW1ucztcbiAgICAgICAgdGhpcy5yb3dzID0gaW5pdFJvd3M7XG4gICAgICAgIHRoaXMudGlsZVNldCA9IGluaXRUaWxlU2V0O1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRSZW5kZXJEYXRhKGluaXRSZW5kZXJEYXRhIDogb2JqZWN0KSA6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbmRlckRhdGEgPSBpbml0UmVuZGVyRGF0YTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UmVuZGVyRGF0YSgpIDogb2JqZWN0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyRGF0YTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TWluaW11bVZpc2libGVDb2x1bW4odmlld3BvcnRMZWZ0IDogbnVtYmVyKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiAodmlld3BvcnRMZWZ0IC8gdGhpcy50aWxlU2V0LmdldFRpbGVXaWR0aCgpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TWF4aW11bVZpc2libGVDb2x1bW4odmlld3BvcnRSaWdodCA6IG51bWJlcikgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gKHZpZXdwb3J0UmlnaHQgLyB0aGlzLnRpbGVTZXQuZ2V0VGlsZVdpZHRoKCkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRNaW5pbXVtVmlzaWJsZVJvdyh2aWV3cG9ydFRvcCA6IG51bWJlcikgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gKHZpZXdwb3J0VG9wIC8gdGhpcy50aWxlU2V0LmdldFRpbGVIZWlnaHQoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE1heGltdW1WaXNpYmxlUm93KHZpZXdwb3J0Qm90dG9tIDogbnVtYmVyKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiAodmlld3BvcnRCb3R0b20gLyB0aGlzLnRpbGVTZXQuZ2V0VGlsZUhlaWdodCgpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TnVtQ2VsbHMoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbHVtbnMgKiB0aGlzLnJvd3M7XG4gICAgfVxuXG4gICAgcHVibGljIGdldENvbHVtbnMoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbHVtbnM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJvd3MoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvd3M7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRpbGVTZXQoKSA6IFRpbGVTZXQge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlU2V0O1xuICAgIH1cblxuICAgIHB1YmxpYyBpc0NvbGxpZGFibGUoKSA6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xsaWRhYmxlO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRUaWxlKHRpbGVTZXRDZWxsSW5kZXggOiBudW1iZXIpIDogdm9pZCB7XG4gICAgICAgIHRoaXMudGlsZXMucHVzaCh0aWxlU2V0Q2VsbEluZGV4KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0VGlsZShjb2x1bW4gOiBudW1iZXIsIHJvdyA6IG51bWJlciwgdGlsZVNldENlbGxJbmRleCA6IG51bWJlcikge1xuICAgICAgICBsZXQgdGlsZUluZGV4IDogbnVtYmVyID0gdGhpcy5nZXRUaWxlSW5kZXgoY29sdW1uLCByb3cpO1xuICAgICAgICB0aGlzLnRpbGVzW3RpbGVJbmRleF0gPSB0aWxlU2V0Q2VsbEluZGV4O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUaWxlSW5kZXgoY29sdW1uIDogbnVtYmVyLCByb3cgOiBudW1iZXIpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIChyb3cgKiB0aGlzLmNvbHVtbnMpICsgY29sdW1uO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUaWxlU2V0Q2VsbEluZGV4KGNvbHVtbiA6IG51bWJlciwgcm93IDogbnVtYmVyKSA6IG51bWJlciB7XG4gICAgICAgIGxldCB0aWxlSW5kZXggOiBudW1iZXIgPSB0aGlzLmdldFRpbGVJbmRleChjb2x1bW4sIHJvdyk7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVzW3RpbGVJbmRleF07XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRpbGUoY29sdW1uIDogbnVtYmVyLCByb3cgOiBudW1iZXIpIDogbnVtYmVyIHtcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5nZXRUaWxlSW5kZXgoY29sdW1uLCByb3cpO1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlc1tpbmRleF07XG4gICAgfVxufSIsIi8qXG4gKiBUaGlzIHByb3ZpZGVzIHJlc3BvbnNlcyB0byBVSSBpbnB1dC5cbiAqL1xuaW1wb3J0IHtBbmltYXRlZFNwcml0ZX0gZnJvbSBcIi4uL3NjZW5lL3Nwcml0ZS9BbmltYXRlZFNwcml0ZVwiXG5pbXBvcnQge1NjZW5lR3JhcGh9IGZyb20gXCIuLi9zY2VuZS9TY2VuZUdyYXBoXCJcblxuZXhwb3J0IGNsYXNzIFVJQ29udHJvbGxlciB7XG4gICAgcHJpdmF0ZSBzcHJpdGVUb0RyYWcgOiBBbmltYXRlZFNwcml0ZTtcbiAgICBwcml2YXRlIHNjZW5lIDogU2NlbmVHcmFwaDtcbiAgICBwcml2YXRlIGRyYWdPZmZzZXRYIDogbnVtYmVyO1xuICAgIHByaXZhdGUgZHJhZ09mZnNldFkgOiBudW1iZXI7XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoY2FudmFzSWQgOiBzdHJpbmcsIGluaXRTY2VuZSA6IFNjZW5lR3JhcGgpIHtcbiAgICAgICAgdGhpcy5zcHJpdGVUb0RyYWcgPSBudWxsO1xuICAgICAgICB0aGlzLnNjZW5lID0gaW5pdFNjZW5lO1xuICAgICAgICB0aGlzLmRyYWdPZmZzZXRYID0gLTE7XG4gICAgICAgIHRoaXMuZHJhZ09mZnNldFkgPSAtMTtcblxuICAgICAgICBsZXQgY2FudmFzIDogSFRNTENhbnZhc0VsZW1lbnQgPSA8SFRNTENhbnZhc0VsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2FudmFzSWQpO1xuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLm1vdXNlRG93bkhhbmRsZXIpO1xuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLm1vdXNlTW92ZUhhbmRsZXIpO1xuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5tb3VzZVVwSGFuZGxlcik7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLmtleURvd25IYW5kbGVyKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLmtleVVwSGFuZGxlcik7XG4gICAgfVxuXG4gICAgcHVibGljIGtleURvd25IYW5kbGVyID0gKGV2ZW50IDogS2V5Ym9hcmRFdmVudCkgOiB2b2lkID0+IHtcbiAgICAgICAgaWYoZXZlbnQua2V5ID09IFwid1wiKXtcbiAgICAgICAgICAgIFNjZW5lR3JhcGguc2V0TW92ZVVwKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmKGV2ZW50LmtleSA9PSBcInNcIil7XG4gICAgICAgICAgICBTY2VuZUdyYXBoLnNldE1vdmVEb3duKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmKGV2ZW50LmtleSA9PSBcImFcIil7XG4gICAgICAgICAgICBTY2VuZUdyYXBoLnNldE1vdmVSaWdodCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZihldmVudC5rZXkgPT0gXCJkXCIpe1xuICAgICAgICAgICAgU2NlbmVHcmFwaC5zZXRNb3ZlTGVmdCh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBrZXlVcEhhbmRsZXIgPSAoZXZlbnQgOiBLZXlib2FyZEV2ZW50KSA6IHZvaWQgPT4ge1xuICAgICAgICBpZihldmVudC5rZXkgPT0gXCJ3XCIpe1xuICAgICAgICAgICAgU2NlbmVHcmFwaC5zZXRNb3ZlVXAoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmKGV2ZW50LmtleSA9PSBcInNcIil7XG4gICAgICAgICAgICBTY2VuZUdyYXBoLnNldE1vdmVEb3duKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZihldmVudC5rZXkgPT0gXCJhXCIpe1xuICAgICAgICAgICAgU2NlbmVHcmFwaC5zZXRNb3ZlUmlnaHQoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmKGV2ZW50LmtleSA9PSBcImRcIil7XG4gICAgICAgICAgICBTY2VuZUdyYXBoLnNldE1vdmVMZWZ0KGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBtb3VzZURvd25IYW5kbGVyID0gKGV2ZW50IDogTW91c2VFdmVudCkgOiB2b2lkID0+IHtcbiAgICAgICAgbGV0IG1vdXNlUHJlc3NYIDogbnVtYmVyID0gZXZlbnQuY2xpZW50WDtcbiAgICAgICAgbGV0IG1vdXNlUHJlc3NZIDogbnVtYmVyID0gZXZlbnQuY2xpZW50WTtcbiAgICAgICAgbGV0IHNwcml0ZSA6IEFuaW1hdGVkU3ByaXRlID0gdGhpcy5zY2VuZS5nZXRTcHJpdGVBdChtb3VzZVByZXNzWCwgbW91c2VQcmVzc1kpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIm1vdXNlUHJlc3NYOiBcIiArIG1vdXNlUHJlc3NYKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJtb3VzZVByZXNzWTogXCIgKyBtb3VzZVByZXNzWSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwic3ByaXRlOiBcIiArIHNwcml0ZSk7XG4gICAgICAgIGlmIChzcHJpdGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gU1RBUlQgRFJBR0dJTkcgSVRcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlVG9EcmFnID0gc3ByaXRlO1xuICAgICAgICAgICAgdGhpcy5kcmFnT2Zmc2V0WCA9IHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFgoKSAtIG1vdXNlUHJlc3NYO1xuICAgICAgICAgICAgdGhpcy5kcmFnT2Zmc2V0WSA9IHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFkoKSAtIG1vdXNlUHJlc3NZO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBtb3VzZU1vdmVIYW5kbGVyID0gKGV2ZW50IDogTW91c2VFdmVudCkgOiB2b2lkID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc3ByaXRlVG9EcmFnICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlVG9EcmFnLmdldFBvc2l0aW9uKCkuc2V0KGV2ZW50LmNsaWVudFggKyB0aGlzLmRyYWdPZmZzZXRYLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmNsaWVudFkgKyB0aGlzLmRyYWdPZmZzZXRZLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3ByaXRlVG9EcmFnLmdldFBvc2l0aW9uKCkuZ2V0WigpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3ByaXRlVG9EcmFnLmdldFBvc2l0aW9uKCkuZ2V0VygpKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFpbl9jaGFyYWN0ZXIgOiBBbmltYXRlZFNwcml0ZTtcbiAgICAgICAgbWFpbl9jaGFyYWN0ZXIgPSB0aGlzLnNjZW5lLmdldE1haW5DaGFyYWN0ZXIoKTtcbiAgICAgICAgaWYobWFpbl9jaGFyYWN0ZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgIG1haW5fY2hhcmFjdGVyLmdldFBvc2l0aW9uKCkuc2V0KGV2ZW50LmNsaWVudFggLSBtYWluX2NoYXJhY3Rlci5nZXRTcHJpdGVUeXBlKCkuZ2V0U3ByaXRlV2lkdGgoKS8yICsgdGhpcy5zY2VuZS5nZXRWaWV3cG9ydCgpLmdldFgoKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuY2xpZW50WSAtIG1haW5fY2hhcmFjdGVyLmdldFNwcml0ZVR5cGUoKS5nZXRTcHJpdGVIZWlnaHQoKS8yICsgdGhpcy5zY2VuZS5nZXRWaWV3cG9ydCgpLmdldFkoKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbl9jaGFyYWN0ZXIuZ2V0UG9zaXRpb24oKS5nZXRaKCksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5fY2hhcmFjdGVyLmdldFBvc2l0aW9uKCkuZ2V0VygpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBtb3VzZVVwSGFuZGxlciA9IChldmVudCA6IE1vdXNlRXZlbnQpIDogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMuc3ByaXRlVG9EcmFnID0gbnVsbDtcbiAgICB9XG59Il19"}